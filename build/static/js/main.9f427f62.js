/*! For license information please see main.9f427f62.js.LICENSE.txt */
!function(){var e={110:function(e,t,n){"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),m=0;m<o.length;++m){var y=o[m];if(!a[y]&&(!r||!r[y])&&(!v||!v[y])&&(!u||!u[y])){var g=h(n,y);try{c(t,y,g)}catch(k){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case m:case v:case s:return e;default:return t}}case i:return t}}}function x(e){return b(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=m,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return x(e)||b(e)===l},t.isConcurrentMode=x,t.isContextConsumer=function(e){return b(e)===c},t.isContextProvider=function(e){return b(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return b(e)===h},t.isFragment=function(e){return b(e)===a},t.isLazy=function(e){return b(e)===m},t.isMemo=function(e){return b(e)===v},t.isPortal=function(e){return b(e)===i},t.isProfiler=function(e){return b(e)===u},t.isStrictMode=function(e){return b(e)===o},t.isSuspense=function(e){return b(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===w||e.$$typeof===y)},t.typeOf=b},309:function(e,t,n){"use strict";e.exports=n(746)},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case E:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){X(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function ae(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Ie=null;function Ee(e){if(e=ki(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=bi(t),xe(e.stateNode,e.type,t))}}function Se(e){_e?Ie?Ie.push(e):Ie=[e]:_e=e}function Te(){if(_e){var e=_e,t=Ie;if(Ie=_e=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function De(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==_e||null!==Ie)&&(Ne(),Te())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Re=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){Re=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,je=null,Ve={onError:function(e){Me=!0,Fe=e}};function ze(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(Be(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ge(i),e;if(o===r)return Ge(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,xt,_t,It,Et,St=!1,Tt=[],Ct=null,Nt=null,At=null,Dt=new Map,Pt=new Map,Rt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Et(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function Vt(){St=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==At&&Ut(At)&&(At=null),Dt.forEach(jt),Pt.forEach(jt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Tt.length){zt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&zt(Ct,e),null!==Nt&&zt(Nt,e),null!==At&&zt(At,e),Dt.forEach(t),Pt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Rt.shift()}var qt=w.ReactCurrentBatchConfig,Gt=!0;function Kt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Ht(e,t,n,r)}finally{kt=i,qt.transition=a}}function Wt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Ht(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){if(Gt){var i=Yt(e,t,n,r);if(null===i)Gr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Dt.set(a,Mt(Dt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&bt(a),null===(a=Yt(e,t,n,r))&&Gr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Gr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=be(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),mn=an(F({},fn,{relatedTarget:0})),yn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),wn=an(F({},cn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function En(){return In}var Sn=F({},fn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Sn),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),An=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(Dn),Rn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Kn(e,t,n,r){Se(r),0<(t=Wr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Hn=null;function Qn(e){Ur(e,0)}function Yn(e){if(H(wi(e)))return e}function $n(e,t){if("change"===e)return t}var Xn=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Hn=Wn=null)}function nr(e){if("value"===e.propertyName&&Yn(Hn)){var t=[];Kn(t,Hn,e,be(e)),De(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Hn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Wr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},_r={},Ir={};function Er(e){if(_r[e])return _r[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return _r[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Sr=Er("animationend"),Tr=Er("animationiteration"),Cr=Er("animationstart"),Nr=Er("transitionend"),Ar=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Ar.set(e,t),s(t,[e])}for(var Rr=0;Rr<Dr.length;Rr++){var Or=Dr[Rr];Pr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Pr(Sr,"onAnimationEnd"),Pr(Tr,"onAnimationIteration"),Pr(Cr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(ze.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,je=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch($t(t)){case 1:var i=Kt;break;case 4:i=Wt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Gr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}De((function(){var r=a,i=be(n),o=[];e:{var u=Ar.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Sr:case Tr:case Cr:s=yn;break;case Nr:s=An;break;case"scroll":s=hn;break;case"wheel":s=Pn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Pe(p,h))&&l.push(Kr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:wi(s),d=null==c?u:wi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Hr(d))p++;for(d=0,v=h;v;v=Hr(v))d++;for(;0<p-d;)l=Hr(l),p--;for(;0<d-p;)h=Hr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Hr(l),h=Hr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?wi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=$n;else if(Gn(u))if(Xn)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Kn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?wi(r):window,e){case"focusin":(Gn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,wr(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":wr(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Bn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Bn&&(g=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,Bn=!0)),0<(y=Wr(r,k)).length&&(k=new wn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=zn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=Jt=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Pe(e,n))&&r.unshift(Kr(e,a,i)),null!=(a=Pe(e,t))&&r.push(Kr(e,a,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Pe(n,a))&&o.unshift(Kr(n,s,u)):i||null!=(s=Pe(n,a))&&o.push(Kr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function bi(e){return e[di]||null}var xi=[],_i=-1;function Ii(e){return{current:e}}function Ei(e){0>_i||(e.current=xi[_i],xi[_i]=null,_i--)}function Si(e,t){_i++,xi[_i]=e.current,e.current=t}var Ti={},Ci=Ii(Ti),Ni=Ii(!1),Ai=Ti;function Di(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){Ei(Ni),Ei(Ci)}function Oi(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Si(Ci,t),Si(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ai=Ci.current,Si(Ci,e),Si(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ni),Ei(Ci),Si(Ci,e)):Ei(Ni),Si(Ni,n)}var Ui=null,ji=!1,Vi=!1;function zi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),He(Ze,Bi),i}finally{kt=t,Vi=!1}}return null}var qi=[],Gi=0,Ki=null,Wi=0,Hi=[],Qi=0,Yi=null,$i=1,Xi="";function Ji(e,t){qi[Gi++]=Wi,qi[Gi++]=Ki,Ki=e,Wi=t}function Zi(e,t,n){Hi[Qi++]=$i,Hi[Qi++]=Xi,Hi[Qi++]=Yi,Yi=e;var r=$i;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Xi=a+e}else $i=1<<a|n<<i|r,Xi=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Ki;)Ki=qi[--Gi],qi[Gi]=null,Wi=qi[--Gi],qi[Gi]=null;for(;e===Yi;)Yi=Hi[--Qi],Hi[Qi]=null,Xi=Hi[--Qi],Hi[Qi]=null,$i=Hi[--Qi],Hi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=w.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Ii(null),ga=null,ka=null,wa=null;function ba(){wa=ka=ga=null}function xa(e){var t=ya.current;Ei(ya),e._currentValue=t}function _a(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){ga=e,wa=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wu=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(wa!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Sa=null;function Ta(e){null===Sa?Sa=[e]:Sa.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Aa=!1;function Da(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ra(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ns)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Aa=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fs|=o,e.lanes=o,e.memoizedState=f}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var ja=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var za={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Ra(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Ra(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Ra(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function Ba(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Pi(t)?Ai:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Di(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=za,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ga(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&za.enqueueReplaceState(t,t.state,null)}function Ka(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ja,Da(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Pi(t)?Ai:Ci.current,i.context=Di(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&za.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Wa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ja&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ha(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===_?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Wa(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Wa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Wa(e,null,t),n.return=e,n;case x:return(t=jc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Ha(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case P:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Ha(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Ha(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),ia&&Ji(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Ji(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),c}function m(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),ia&&Ji(i,m),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return ia&&Ji(i,m),l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Ji(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===_){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Wa(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===_?((a=Mc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Lc(o.type,o.key,o.props,null,r.mode,s)).ref=Wa(r,a,o),s.return=r,r=s)}return u(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=jc(o,r.mode,s)).return=r,r=a}return u(r);case P:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return m(r,a,o,s);Ha(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Uc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var $a=Ya(!0),Xa=Ya(!1),Ja={},Za=Ii(Ja),eo=Ii(Ja),to=Ii(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Si(to,t),Si(eo,e),Si(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Za),Si(Za,t)}function io(){Ei(Za),Ei(eo),Ei(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Si(eo,e),Si(Za,n))}function oo(e){eo.current===e&&(Ei(Za),Ei(eo))}var uo=Ii(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=w.ReactCurrentDispatcher,ho=w.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,ko=!1,wo=0,bo=0;function xo(){throw Error(a(321))}function _o(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,wo=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==wo;return wo=0,e}function So(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function To(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Fs|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(wu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Fs|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(wu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Do(){}function Po(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,wu=!0),r=r.queue,Go(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,jo(9,Oo.bind(null,n,r,i,t),void 0,null),null===As)throw Error(a(349));0!==(30&po)||Ro(n,t,i)}return i}function Ro(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&rc(t,e,1,-1)}function Uo(e){var t=So();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return To().memoizedState}function zo(e,t,n,r){var i=So();vo.flags|=e,i.memoizedState=jo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&_o(r,o.deps))return void(i.memoizedState=jo(t,n,a,r))}vo.flags|=e,i.memoizedState=jo(1|t,n,a,r)}function qo(e,t){return zo(8390656,8,e,t)}function Go(e,t){return Bo(2048,8,e,t)}function Ko(e,t){return Bo(4,2,e,t)}function Wo(e,t){return Bo(4,4,e,t)}function Ho(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Ho.bind(null,t,e),n)}function Yo(){}function $o(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,wu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Fs|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){rc(n,e,r,tc()),au(n,t,r)}}function nu(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(rc(n,e,r,i=tc()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Ea,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},uu={readContext:Ea,useCallback:function(e,t){return So().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=So();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=So();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},So().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return So().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),So().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=So();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===As)throw Error(a(349));0!==(30&po)||Ro(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,jo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=So(),t=As.identifierPrefix;if(ia){var n=Xi;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=wo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=bo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ea,useCallback:$o,useContext:Ea,useEffect:Go,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Wo,useMemo:Xo,useReducer:No,useRef:Vo,useState:function(){return No(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Jo(To(),mo.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Do,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Ea,useCallback:$o,useContext:Ea,useEffect:Go,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Wo,useMemo:Xo,useReducer:Ao,useRef:Vo,useState:function(){return Ao(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:Jo(t,mo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:Do,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Ra(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ks||(Ks=!0,Ws=r),hu(0,t)},n}function vu(e,t,n){(n=Ra(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Hs?Hs=new Set([this]):Hs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function yu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ra(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=w.ReactCurrentOwner,wu=!1;function bu(e,t,n,r){t.child=null===e?Xa(t,null,n,r):$a(t,e.child,n,r)}function xu(e,t,n,r,i){n=n.render;var a=t.ref;return Ia(t,i),r=Io(e,t,n,r,a,i),n=Eo(),null===e||wu?(ia&&n&&ea(t),t.flags|=1,bu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function _u(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Rc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Iu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Ku(e,t,i)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function Iu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(wu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ku(e,t,i);0!==(131072&e.flags)&&(wu=!0)}}return Tu(e,t,n,r,i)}function Eu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Os,Rs),Rs|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Os,Rs),Rs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Si(Os,Rs),Rs|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Si(Os,Rs),Rs|=r;return bu(e,t,i,n),t.child}function Su(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Pi(n)?Ai:Ci.current;return a=Di(t,a),Ia(t,i),n=Io(e,t,n,r,a,i),r=Eo(),null===e||wu?(ia&&r&&ea(t),t.flags|=1,bu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function Cu(e,t,n,r,i){if(Pi(n)){var a=!0;Mi(t)}else a=!1;if(Ia(t,i),null===t.stateNode)Gu(e,t),qa(t,n,r),Ka(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ea(c):c=Di(t,c=Pi(n)?Ai:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ga(t,o,r,c),Aa=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ni.current||Aa?("function"===typeof l&&(Va(t,n,l,r),s=t.memoizedState),(u=Aa||Ba(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Pa(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ma(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ea(s):s=Di(t,s=Pi(n)?Ai:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ga(t,o,r,s),Aa=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ni.current||Aa?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Aa||Ba(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Nu(e,t,n,r,a,i)}function Nu(e,t,n,r,i,a){Su(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ku(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$a(t,e.child,null,a),t.child=$a(t,null,u,a)):bu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Au(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Du(e,t,n,r,i){return da(),pa(i),t.flags|=256,bu(e,t,n,r),t.child}var Pu,Ru,Ou,Lu,Mu={dehydrated:null,treeContext:null,retryLane:0};function Fu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Si(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Fc(s,i,0,null),e=Mc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Fu(n),t.memoizedState=Mu,e):ju(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Vu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$a(t,e.child,null,u),t.child.memoizedState=Fu(u),t.memoizedState=Mu,o);if(0===(1&t.mode))return Vu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Vu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),wu||s){if(null!==(r=As)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),rc(r,e,i,-1))}return mc(),Vu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Hi[Qi++]=$i,Hi[Qi++]=Xi,Hi[Qi++]=Yi,$i=e.id,Xi=e.overflow,Yi=t),t=ju(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Oc(r,u):(u=Mc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Fu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Mu,i}return e=(u=e.child).sibling,i=Oc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function ju(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vu(e,t,n,r){return null!==r&&pa(r),$a(t,e.child,null,n),(e=ju(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_a(e.return,t,n)}function Bu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(bu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zu(e,n,t);else if(19===e.tag)zu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bu(t,!0,n,null,a);break;case"together":Bu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ku(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hu(t),null;case 1:case 17:return Pi(t.type)&&Ri(),Hu(t),null;case 3:return r=t.stateNode,io(),Ei(Ni),Ei(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(uc(aa),aa=null))),Ru(e,t),Hu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ou(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":$(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&jr("scroll",r)}switch(n){case"input":W(r),Z(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Pu(e,t,!1,!1),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&jr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hu(t),null;case 6:if(e&&null!=t.stateNode)Lu(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Hu(t),null;case 13:if(Ei(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hu(t),o=!1}else null!==aa&&(uc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ls&&(Ls=3):mc())),null!==t.updateQueue&&(t.flags|=4),Hu(t),null);case 4:return io(),Ru(e,t),null===e&&Br(t.stateNode.containerInfo),Hu(t),null;case 10:return xa(t.type._context),Hu(t),null;case 19:if(Ei(uo),null===(o=t.memoizedState))return Hu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Wu(o,!1);else{if(0!==Ls||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Wu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>qs&&(t.flags|=128,r=!0,Wu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Hu(t),null}else 2*Xe()-o.renderingStartTime>qs&&1073741824!==n&&(t.flags|=128,r=!0,Wu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=uo.current,Si(uo,r?1&n|2:1&n),t):(Hu(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rs)&&(Hu(t),6&t.subtreeFlags&&(t.flags|=8192)):Hu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Yu(e,t){switch(ta(t),t.tag){case 1:return Pi(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ei(Ni),Ei(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ei(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(uo),null;case 4:return io(),null;case 10:return xa(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Pu=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ru=function(){},Ou=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&jr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var $u=!1,Xu=!1,Ju="function"===typeof WeakSet?WeakSet:Set,Zu=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}var fs=null,hs=!1;function ds(e,t,n){for(n=n.child;null!==n;)ps(e,t,n),n=n.sibling}function ps(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Xu||es(n,t);case 6:var r=fs,i=hs;fs=null,ds(e,t,n),hs=i,null!==(fs=r)&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fs.removeChild(n.stateNode));break;case 18:null!==fs&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),Bt(e)):si(fs,n.stateNode));break;case 4:r=fs,i=hs,fs=n.stateNode.containerInfo,hs=!0,ds(e,t,n),fs=r,hs=i;break;case 0:case 11:case 14:case 15:if(!Xu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!Xu&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ec(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?(Xu=(r=Xu)||null!==n.memoizedState,ds(e,t,n),Xu=r):ds(e,t,n);break;default:ds(e,t,n)}}function vs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ju),t.forEach((function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ms(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:fs=s.stateNode,hs=!1;break e;case 3:case 4:fs=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===fs)throw Error(a(160));ps(o,u,i),fs=null,hs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ec(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ms(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(m){Ec(e,e.return,m)}try{rs(5,e,e.return)}catch(m){Ec(e,e.return,m)}}break;case 1:ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Ec(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&X(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Ec(e,e.return,m)}}break;case 6:if(ms(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Ec(e,e.return,m)}}break;case 3:if(ms(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){Ec(e,e.return,m)}break;case 4:default:ms(t,e),gs(e);break;case 13:ms(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bs=Xe())),4&r&&vs(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Xu=(l=Xu)||f,ms(t,e),Xu=l):ms(t,e),gs(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zu=e,f=e.child;null!==f;){for(h=Zu=f;null!==Zu;){switch(p=(d=Zu).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Ec(r,n,m)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){xs(h);continue}}null!==p?(p.return=d,Zu=p):xs(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(m){Ec(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Ec(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ms(t,e),gs(e),4&r&&vs(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ls(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cs(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){Ec(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ks(e,t,n){Zu=e,ws(e,t,n)}function ws(e,t,n){for(var r=0!==(1&e.mode);null!==Zu;){var i=Zu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$u;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Xu;u=$u;var c=Xu;if($u=o,(Xu=s)&&!c)for(Zu=i;null!==Zu;)s=(o=Zu).child,22===o.tag&&null!==o.memoizedState?_s(i):null!==s?(s.return=o,Zu=s):_s(i);for(;null!==a;)Zu=a,ws(a,t,n),a=a.sibling;Zu=i,$u=u,Xu=c}bs(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zu=a):bs(e)}}function bs(e){for(;null!==Zu;){var t=Zu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xu||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(a(163))}Xu||512&t.flags&&as(t)}catch(d){Ec(t,t.return,d)}}if(t===e){Zu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zu=n;break}Zu=t.return}}function xs(e){for(;null!==Zu;){var t=Zu;if(t===e){Zu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zu=n;break}Zu=t.return}}function _s(e){for(;null!==Zu;){var t=Zu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){Ec(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ec(t,i,s)}}var a=t.return;try{as(t)}catch(s){Ec(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){Ec(t,o,s)}}}catch(s){Ec(t,t.return,s)}if(t===e){Zu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Zu=u;break}Zu=t.return}}var Is,Es=Math.ceil,Ss=w.ReactCurrentDispatcher,Ts=w.ReactCurrentOwner,Cs=w.ReactCurrentBatchConfig,Ns=0,As=null,Ds=null,Ps=0,Rs=0,Os=Ii(0),Ls=0,Ms=null,Fs=0,Us=0,js=0,Vs=null,zs=null,Bs=0,qs=1/0,Gs=null,Ks=!1,Ws=null,Hs=null,Qs=!1,Ys=null,$s=0,Xs=0,Js=null,Zs=-1,ec=0;function tc(){return 0!==(6&Ns)?Xe():-1!==Zs?Zs:Zs=Xe()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Ns)&&0!==Ps?Ps&-Ps:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function rc(e,t,n,r){if(50<Xs)throw Xs=0,Js=null,Error(a(185));yt(e,n,r),0!==(2&Ns)&&e===As||(e===As&&(0===(2&Ns)&&(Us|=n),4===Ls&&sc(e,Ps)),ic(e,r),1===n&&0===Ns&&0===(1&t.mode)&&(qs=Xe()+500,ji&&Bi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===As?Ps:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){ji=!0,zi(e)}(cc.bind(null,e)):zi(cc.bind(null,e)),oi((function(){0===(6&Ns)&&Bi()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zs=-1,ec=0,0!==(6&Ns))throw Error(a(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===As?Ps:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Ns;Ns|=2;var o=vc();for(As===e&&Ps===t||(Gs=null,qs=Xe()+500,dc(e,t));;)try{kc();break}catch(s){pc(e,s)}ba(),Ss.current=o,Ns=i,null!==Ds?t=0:(As=null,Ps=0,t=Ls)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ms,dc(e,0),sc(e,r),ic(e,Xe()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ms,dc(e,0),sc(e,r),ic(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:xc(e,zs,Gs);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Bs+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,zs,Gs),t);break}xc(e,zs,Gs);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Es(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,zs,Gs),r);break}xc(e,zs,Gs);break;default:throw Error(a(329))}}}return ic(e,Xe()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Vs;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=zs,zs=n,null!==t&&uc(t)),e}function uc(e){null===zs?zs=e:zs.push.apply(zs,e)}function sc(e,t){for(t&=~js,t&=~Us,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Ns))throw Error(a(327));_c();var t=ht(e,0);if(0===(1&t))return ic(e,Xe()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ms,dc(e,0),sc(e,t),ic(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,zs,Gs),ic(e,Xe()),null}function lc(e,t){var n=Ns;Ns|=1;try{return e(t)}finally{0===(Ns=n)&&(qs=Xe()+500,ji&&Bi())}}function fc(e){null!==Ys&&0===Ys.tag&&0===(6&Ns)&&_c();var t=Ns;Ns|=1;var n=Cs.transition,r=kt;try{if(Cs.transition=null,kt=1,e)return e()}finally{kt=r,Cs.transition=n,0===(6&(Ns=t))&&Bi()}}function hc(){Rs=Os.current,Ei(Os)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ds)for(n=Ds.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:io(),Ei(Ni),Ei(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(uo);break;case 10:xa(r.type._context);break;case 22:case 23:hc()}n=n.return}if(As=e,Ds=e=Oc(e.current,null),Ps=Rs=t,Ls=0,Ms=null,js=Us=Fs=0,zs=Vs=null,null!==Sa){for(t=0;t<Sa.length;t++)if(null!==(r=(n=Sa[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Sa=null}return e}function pc(e,t){for(;;){var n=Ds;try{if(ba(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,ko=!1,wo=0,Ts.current=null,null===n||null===n.return){Ls=1,Ms=t,Ds=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Ps,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=yu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&mu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){mu(o,l,t),mc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var y=yu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gu(y,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Ls&&(Ls=2),null===Vs?Vs=[o]:Vs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Hs||!Hs.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(w){t=w,Ds===n&&null!==n&&(Ds=n=n.return);continue}break}}function vc(){var e=Ss.current;return Ss.current=ou,null===e?ou:e}function mc(){0!==Ls&&3!==Ls&&2!==Ls||(Ls=4),null===As||0===(268435455&Fs)&&0===(268435455&Us)||sc(As,Ps)}function yc(e,t){var n=Ns;Ns|=2;var r=vc();for(As===e&&Ps===t||(Gs=null,dc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(ba(),Ns=n,Ss.current=r,null!==Ds)throw Error(a(261));return As=null,Ps=0,Ls}function gc(){for(;null!==Ds;)wc(Ds)}function kc(){for(;null!==Ds&&!Ye();)wc(Ds)}function wc(e){var t=Is(e.alternate,e,Rs);e.memoizedProps=e.pendingProps,null===t?bc(e):Ds=t,Ts.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qu(n,t,Rs)))return void(Ds=n)}else{if(null!==(n=Yu(n,t)))return n.flags&=32767,void(Ds=n);if(null===e)return Ls=6,void(Ds=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ds=t);Ds=t=e}while(null!==t);0===Ls&&(Ls=5)}function xc(e,t,n){var r=kt,i=Cs.transition;try{Cs.transition=null,kt=1,function(e,t,n,r){do{_c()}while(null!==Ys);if(0!==(6&Ns))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===As&&(Ds=As=null,Ps=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qs||(Qs=!0,Ac(tt,(function(){return _c(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cs.transition,Cs.transition=null;var u=kt;kt=1;var s=Ns;Ns|=4,Ts.current=null,function(e,t){if(ei=Gt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Gt=!1,Zu=t;null!==Zu;)if(e=(t=Zu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zu=e;else for(;null!==Zu;){t=Zu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(a(163))}}catch(b){Ec(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Zu=e;break}Zu=t.return}v=ns,ns=!1}(e,n),ys(n,e),pr(ti),Gt=!!ei,ti=ei=null,e.current=n,ks(n,e,i),$e(),Ns=s,kt=u,Cs.transition=o}else e.current=n;if(Qs&&(Qs=!1,Ys=e,$s=i),o=e.pendingLanes,0===o&&(Hs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ks)throw Ks=!1,e=Ws,Ws=null,e;0!==(1&$s)&&0!==e.tag&&_c(),o=e.pendingLanes,0!==(1&o)?e===Js?Xs++:(Xs=0,Js=e):Xs=0,Bi()}(e,t,n,r)}finally{Cs.transition=i,kt=r}return null}function _c(){if(null!==Ys){var e=wt($s),t=Cs.transition,n=kt;try{if(Cs.transition=null,kt=16>e?16:e,null===Ys)var r=!1;else{if(e=Ys,Ys=null,$s=0,0!==(6&Ns))throw Error(a(331));var i=Ns;for(Ns|=4,Zu=e.current;null!==Zu;){var o=Zu,u=o.child;if(0!==(16&Zu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Zu=l;null!==Zu;){var f=Zu;switch(f.tag){case 0:case 11:case 15:rs(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zu=h;else for(;null!==Zu;){var d=(f=Zu).sibling,p=f.return;if(os(f),f===l){Zu=null;break}if(null!==d){d.return=p,Zu=d;break}Zu=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Zu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Zu=u;else e:for(;null!==Zu;){if(0!==(2048&(o=Zu).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zu=g;break e}Zu=o.return}}var k=e.current;for(Zu=k;null!==Zu;){var w=(u=Zu).child;if(0!==(2064&u.subtreeFlags)&&null!==w)w.return=u,Zu=w;else e:for(u=k;null!==Zu;){if(0!==(2048&(s=Zu).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(x){Ec(s,s.return,x)}if(s===u){Zu=null;break e}var b=s.sibling;if(null!==b){b.return=s.return,Zu=b;break e}Zu=s.return}}if(Ns=i,Bi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{kt=n,Cs.transition=t}}return!1}function Ic(e,t,n){e=Oa(e,t=pu(0,t=lu(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Ec(e,t,n){if(3===e.tag)Ic(e,e,n);else for(;null!==t;){if(3===t.tag){Ic(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hs||!Hs.has(r))){t=Oa(t,e=vu(t,e=lu(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,As===e&&(Ps&n)===n&&(4===Ls||3===Ls&&(130023424&Ps)===Ps&&500>Xe()-Bs?dc(e,0):js|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Na(e,t))&&(yt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Ac(e,t){return He(e,t)}function Dc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Dc(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Rc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case _:return Mc(n.children,i,o,t);case I:u=8,i|=8;break;case E:return(e=Pc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case N:return(e=Pc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Pc(19,n,t,i)).elementType=A,e.lanes=o,e;case R:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case T:u=9;break e;case C:u=11;break e;case D:u=14;break e;case P:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Pc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function jc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,a,o,u,s){return e=new Vc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Da(a),e}function Bc(e){if(!e)return Ti;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=zc(n,r,!0,e,0,a,0,u,s)).context=Bc(null),n=e.current,(a=Ra(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Gc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ra(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}Is=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)wu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wu=!1,function(e,t,n){switch(t.tag){case 3:Au(t),da();break;case 5:ao(t);break;case 1:Pi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Uu(e,t,n):(Si(uo,1&uo.current),null!==(e=Ku(e,t,n))?e.sibling:null);Si(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Eu(e,t,n)}return Ku(e,t,n)}(e,t,n);wu=0!==(131072&e.flags)}else wu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Gu(e,t),e=t.pendingProps;var i=Di(t,Ci.current);Ia(t,n),i=Io(null,t,r,e,i,n);var o=Eo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Da(t),i.updater=za,t.stateNode=i,i._reactInternals=t,Ka(t,r,e,n),t=Nu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),bu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Gu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===D)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=xu(null,t,r,e,n);break e;case 14:t=_u(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Au(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Pa(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Du(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Du(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Ku(e,t,n);break e}bu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Su(e,t),bu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Uu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$a(t,null,r,n):bu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return bu(e,t,t.pendingProps,n),t.child;case 8:case 12:return bu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Si(ya,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Ku(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Ra(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),_a(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),_a(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}bu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ia(t,n),r=r(i=Ea(i)),t.flags|=1,bu(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),_u(e,t,r,i=ma(r.type,i),n);case 15:return Iu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Gu(e,t),t.tag=1,Pi(r)?(e=!0,Mi(t)):e=!1,Ia(t,n),qa(t,r,i),Ka(t,r,i,n),Nu(null,t,r,!0,e,n);case 19:return qu(e,t,n);case 22:return Eu(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Kc(o);u.call(e)}}Gc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Kc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Kc(s);u.call(e)}}var s=zc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,Br(8===e.nodeType?e.parentNode:e),fc((function(){Gc(t,s,n,r)})),s}(n,t,e,i,r);return Kc(o)}$c.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Gc(e,t,null,null)},$c.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Gc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Ft(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,Xe()),0===(6&Ns)&&(qs=Xe()+500,Bi()))}break;case 13:fc((function(){var t=Na(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Hc(e,1)}},xt=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)rc(t,e,134217728,tc());Hc(e,134217728)}},_t=function(e){if(13===e.tag){var t=nc(e),n=Na(e,t);if(null!==n)rc(n,e,t,tc());Hc(e,t)}},It=function(){return kt},Et=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bi(r);if(!i)throw Error(a(90));H(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=lc,Ne=fc;var tl={usingClientEntryPoint:!1,Events:[ki,wi,bi,Se,Te,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},381:function(e){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},239:function(e,t,n){var r=n(381);e.exports=d,e.exports.parse=a,e.exports.compile=function(e,t){return u(a(e,t),t)},e.exports.tokensToFunction=u,e.exports.tokensToRegExp=h;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function a(e,t){for(var n,r=[],a=0,o=0,u="",l=t&&t.delimiter||"/";null!=(n=i.exec(e));){var f=n[0],h=n[1],d=n.index;if(u+=e.slice(o,d),o=d+f.length,h)u+=h[1];else{var p=e[o],v=n[2],m=n[3],y=n[4],g=n[5],k=n[6],w=n[7];u&&(r.push(u),u="");var b=null!=v&&null!=p&&p!==v,x="+"===k||"*"===k,_="?"===k||"*"===k,I=n[2]||l,E=y||g;r.push({name:m||a++,prefix:v||"",delimiter:I,optional:_,repeat:x,partial:b,asterisk:!!w,pattern:E?c(E):w?".*":"[^"+s(I)+"]+?"})}}return o<e.length&&(u+=e.substr(o)),u&&r.push(u),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function u(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",f(t)));return function(t,i){for(var a="",u=t||{},s=(i||{}).pretty?o:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var f,h=u[l.name];if(null==h){if(l.optional){l.partial&&(a+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(h)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<h.length;d++){if(f=s(h[d]),!n[c].test(f))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(f)+"`");a+=(0===d?l.prefix:l.delimiter)+f}}else{if(f=l.asterisk?encodeURI(h).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):s(h),!n[c].test(f))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+f+'"');a+=l.prefix+f}}else a+=l}return a}}function s(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function f(e){return e&&e.sensitive?"":"i"}function h(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,a=!1!==n.end,o="",u=0;u<e.length;u++){var c=e[u];if("string"===typeof c)o+=s(c);else{var h=s(c.prefix),d="(?:"+c.pattern+")";t.push(c),c.repeat&&(d+="(?:"+h+d+")*"),o+=d=c.optional?c.partial?h+"("+d+")?":"(?:"+h+"("+d+"))?":h+"("+d+")"}}var p=s(n.delimiter||"/"),v=o.slice(-p.length)===p;return i||(o=(v?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=a?"$":i&&v?"":"(?="+p+"|$)",l(new RegExp("^"+o,f(n)),t)}function d(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(d(e[i],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",f(n)),t)}(e,t,n):function(e,t,n){return h(a(e,n),t,n)}(e,t,n)}},195:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case m:case v:case s:return e;default:return t}}case i:return t}}}function x(e){return b(e)===f}},228:function(e,t,n){"use strict";n(195)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var w=k.prototype=new g;w.constructor=k,v(w,y.prototype),w.isPureReactComponent=!0;var b=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:_.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,b(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",b(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},R={transition:null},O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:R,ReactCurrentOwner:_};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)x.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function b(e){if(m=!1,w(e),!v)if(null!==r(c))v=!0,R(x);else{var t=r(l);null!==t&&O(b,t.startTime-e)}}function x(e,n){v=!1,m&&(m=!1,g(S),S=-1),p=!0;var a=d;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&O(b,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,I=!1,E=null,S=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function A(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?_():(I=!1,E=null)}}else I=!1}if("function"===typeof k)_=function(){k(A)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,P=D.port2;D.port1.onmessage=A,_=function(){P.postMessage(null)}}else _=function(){y(A,0)};function R(e){E=e,I||(I=!0,_())}function O(e,n){S=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,R(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(S),S=-1):m=!0,O(b,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,R(x))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return rt},SDK_VERSION:function(){return mn},_DEFAULT_ENTRY_NAME:function(){return nn},_addComponent:function(){return un},_addOrOverwriteComponent:function(){return sn},_apps:function(){return an},_clearComponents:function(){return hn},_components:function(){return on},_getProvider:function(){return ln},_registerComponent:function(){return cn},_removeServiceInstance:function(){return fn},deleteApp:function(){return wn},getApp:function(){return gn},getApps:function(){return kn},initializeApp:function(){return yn},onLog:function(){return _n},registerVersion:function(){return xn},setLogLevel:function(){return In}});var t=n(791),r=n(164);function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t)}function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}function u(e){return"/"===e.charAt(0)}function s(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var c=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],a=e&&u(e),o=t&&u(t),c=a||o;if(e&&u(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var l=i[i.length-1];n="."===l||".."===l||""===l}else n=!1;for(var f=0,h=i.length;h>=0;h--){var d=i[h];"."===d?s(i,h):".."===d?(s(i,h),f++):f&&(s(i,h),f--)}if(!c)for(;f--;f)i.unshift("..");!c||""===i[0]||i[0]&&u(i[0])||i.unshift("");var p=i.join("/");return n&&"/"!==p.substr(-1)&&(p+="/"),p},l=!0,f="Invariant failed";function h(e,t){if(!e){if(l)throw new Error(f);var n="function"===typeof t?t():t,r=n?"".concat(f,": ").concat(n):f;throw new Error(r)}}function d(e){return"/"===e.charAt(0)?e:"/"+e}function p(e){return"/"===e.charAt(0)?e.substr(1):e}function v(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function m(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function y(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function g(e,t,n,r){var i;"string"===typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var a=t.indexOf("?");return-1!==a&&(n=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),i.state=t):(void 0===(i=o({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(a){throw a instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):a}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=c(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function k(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var a="function"===typeof e?e(t,n):e;"string"===typeof a?"function"===typeof r?r(a,i):i(!0):i(!1!==a)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var w=!("undefined"===typeof window||!window.document||!window.document.createElement);function b(e,t){t(window.confirm(e))}var x="popstate",_="hashchange";function I(){try{return window.history.state||{}}catch(e){return{}}}function E(e){void 0===e&&(e={}),w||h(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,a=i.forceRefresh,u=void 0!==a&&a,s=i.getUserConfirmation,c=void 0===s?b:s,l=i.keyLength,f=void 0===l?6:l,p=e.basename?m(d(e.basename)):"";function E(e){var t=e||{},n=t.key,r=t.state,i=window.location,a=i.pathname+i.search+i.hash;return p&&(a=v(a,p)),g(a,r,n)}function S(){return Math.random().toString(36).substr(2,f)}var T=k();function C(e){o(V,e),V.length=t.length,T.notifyListeners(V.location,V.action)}function N(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||P(E(e.state))}function A(){P(E(I()))}var D=!1;function P(e){if(D)D=!1,C();else{T.confirmTransitionTo(e,"POP",c,(function(t){t?C({action:"POP",location:e}):function(e){var t=V.location,n=O.indexOf(t.key);-1===n&&(n=0);var r=O.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(D=!0,M(i))}(e)}))}}var R=E(I()),O=[R.key];function L(e){return p+y(e)}function M(e){t.go(e)}var F=0;function U(e){1===(F+=e)&&1===e?(window.addEventListener(x,N),r&&window.addEventListener(_,A)):0===F&&(window.removeEventListener(x,N),r&&window.removeEventListener(_,A))}var j=!1;var V={length:t.length,action:"POP",location:R,createHref:L,push:function(e,r){var i="PUSH",a=g(e,r,S(),V.location);T.confirmTransitionTo(a,i,c,(function(e){if(e){var r=L(a),o=a.key,s=a.state;if(n)if(t.pushState({key:o,state:s},null,r),u)window.location.href=r;else{var c=O.indexOf(V.location.key),l=O.slice(0,c+1);l.push(a.key),O=l,C({action:i,location:a})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",a=g(e,r,S(),V.location);T.confirmTransitionTo(a,i,c,(function(e){if(e){var r=L(a),o=a.key,s=a.state;if(n)if(t.replaceState({key:o,state:s},null,r),u)window.location.replace(r);else{var c=O.indexOf(V.location.key);-1!==c&&(O[c]=a.key),C({action:i,location:a})}else window.location.replace(r)}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&(e=!1);var t=T.setPrompt(e);return j||(U(1),j=!0),function(){return j&&(j=!1,U(-1)),t()}},listen:function(e){var t=T.appendListener(e);return U(1),function(){U(-1),t()}}};return V}var S="hashchange",T={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+p(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:p,decodePath:d},slash:{encodePath:d,decodePath:d}};function C(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function N(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function A(e){window.location.replace(C(window.location.href)+"#"+e)}function D(e){void 0===e&&{},w||h(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,i=void 0===r?b:r,a=n.hashType,u=void 0===a?"slash":a,s=e.basename?m(d(e.basename)):"",c=T[u],l=c.encodePath,f=c.decodePath;function p(){var e=f(N());return s&&v(e,s),g(e)}var x=k();function _(e){o(V,e),V.length=t.length,x.notifyListeners(V.location,V.action)}var I=!1,E=null;function D(){var e=N(),t=l(e);if(e!==t)A(t);else{var n=p(),r=V.location;if(!I&&function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash}(r,n))return;if(E===y(n))return;null,function(e){if(I)!1,_();else{var t="POP";x.confirmTransitionTo(e,t,i,(function(n){n?_({action:t,location:e}):function(e){var t=V.location,n=L.lastIndexOf(y(t));-1===n&&0;var r=L.lastIndexOf(y(e));-1===r&&0;var i=n-r;i&&(!0,M(i))}(e)}))}}(n)}}var P=N(),R=l(P);P!==R&&A(R);var O=p(),L=[y(O)];function M(e){t.go(e)}var F=0;function U(e){1===(F+=e)&&1===e?window.addEventListener(S,D):0===F&&window.removeEventListener(S,D)}var j=!1;var V={length:t.length,action:"POP",location:O,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&C(window.location.href),n+"#"+l(s+y(e))},push:function(e,t){var n="PUSH",r=g(e,void 0,void 0,V.location);x.confirmTransitionTo(r,n,i,(function(e){if(e){var t=y(r),i=l(s+t);if(N()!==i){t,function(e){window.location.hash=e}(i);var a=L.lastIndexOf(y(V.location)),o=L.slice(0,a+1);o.push(t),o,_({action:n,location:r})}else _()}}))},replace:function(e,t){var n="REPLACE",r=g(e,void 0,void 0,V.location);x.confirmTransitionTo(r,n,i,(function(e){if(e){var t=y(r),i=l(s+t);N()!==i&&(t,A(i));var a=L.indexOf(y(V.location));-1!==a&&(L[a]=t),_({action:n,location:r})}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&!1;var t=x.setPrompt(e);return j||(U(1),!0),function(){return j&&(!1,U(-1)),t()}},listen:function(e){var t=x.appendListener(e);return U(1),function(){U(-1),t()}}};return V}function P(e,t,n){return Math.min(Math.max(e,t),n)}var R=n(7),O=n.n(R),L=1073741823,M="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{};var F=t.createContext||function(e,n){var r,i,o="__create-react-context-"+function(){var e="__global_unique_id__";return M[e]=(M[e]||0)+1}()+"__",u=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).emitter=function(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}(t.props.value),t}a(t,e);var r=t.prototype;return r.getChildContext=function(){var e;return(e={})[o]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var t,r=this.props.value,i=e.value;!function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(r,i)?(t="function"===typeof n?n(r,i):L,0!==(t|=0)&&this.emitter.set(e.value,t)):t=0}},r.render=function(){return this.props.children},t}(t.Component);u.childContextTypes=((r={})[o]=O().object.isRequired,r);var s=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}a(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?L:t},r.componentDidMount=function(){this.context[o]&&this.context[o].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?L:e},r.componentWillUnmount=function(){this.context[o]&&this.context[o].off(this.onUpdate)},r.getValue=function(){return this.context[o]?this.context[o].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(t.Component);return s.contextTypes=((i={})[o]=O().object,i),{Provider:u,Consumer:s}},U=F,j=n(239),V=n.n(j);n(228);function z(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n(110);var B=function(e){var t=U();return t.displayName=e,t},q=B("Router-History"),G=function(e){var t=U();return t.displayName=e,t},K=G("Router"),W=function(e){function n(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}a(n,e),n.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var r=n.prototype;return r.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},r.componentWillUnmount=function(){this.unlisten&&this.unlisten()},r.render=function(){return t.createElement(K.Provider,{value:{history:this.props.history,location:this.state.location,match:n.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},t.createElement(q.Provider,{children:this.props.children||null,value:this.props.history}))},n}(t.Component);t.Component;t.Component;var H={},Q=1e4,Y=0;function $(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,a=void 0!==i&&i,o=n.strict,u=void 0!==o&&o,s=n.sensitive,c=void 0!==s&&s;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=H[n]||(H[n]={});if(r[e])return r[e];var i=[],a={regexp:V()(e,i,t),keys:i};return Y<Q&&(r[e]=a,Y++),a}(n,{end:a,strict:u,sensitive:c}),i=r.regexp,o=r.keys,s=i.exec(e);if(!s)return null;var l=s[0],f=s.slice(1),h=e===l;return a&&!h?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:h,params:o.reduce((function(e,t,n){return e[t.name]=f[n],e}),{})}}),null)}var X=function(e){function n(){return e.apply(this,arguments)||this}return a(n,e),n.prototype.render=function(){var e=this;return t.createElement(K.Consumer,null,(function(n){n||h(!1);var r=e.props.location||n.location,i=o({},n,{location:r,match:e.props.computedMatch?e.props.computedMatch:e.props.path?$(r.pathname,e.props):n.match}),a=e.props,u=a.children,s=a.component,c=a.render;return Array.isArray(u)&&0===u.length&&(u=null),t.createElement(K.Provider,{value:i},i.match?u?"function"===typeof u?u(i):u:s?t.createElement(s,i):c?c(i):null:"function"===typeof u?u(i):null)}))},n}(t.Component);function J(e){return"/"===e.charAt(0)?e:"/"+e}function Z(e,t){if(!e)return t;var n=J(e);return 0!==t.pathname.indexOf(n)?t:o({},t,{pathname:t.pathname.substr(n.length)})}function ee(e){return"string"===typeof e?e:y(e)}function te(e){return function(){h(!1)}}function ne(){}t.Component;var re=function(e){function n(){return e.apply(this,arguments)||this}return a(n,e),n.prototype.render=function(){var e=this;return t.createElement(K.Consumer,null,(function(n){n||h(!1);var r,i,a=e.props.location||n.location;return t.Children.forEach(e.props.children,(function(e){if(null==i&&t.isValidElement(e)){r=e;var u=e.props.path||e.props.from;i=u?$(a.pathname,o({},e.props,{path:u})):n.match}})),i?t.cloneElement(r,{location:a,computedMatch:i}):null}))},n}(t.Component);var ie=t.useContext;var ae=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=E(t.props),t}return a(n,e),n.prototype.render=function(){return t.createElement(W,{history:this.history,children:this.props.children})},n}(t.Component);t.Component;var oe=function(e,t){return"function"===typeof e?e(t):e},ue=function(e,t){return"string"===typeof e?g(e,null,null,t):e},se=function(e){return e},ce=t.forwardRef;"undefined"===typeof ce&&(ce=se);var le=ce((function(e,n){var r=e.innerRef,i=e.navigate,a=e.onClick,u=z(e,["innerRef","navigate","onClick"]),s=u.target,c=o({},u,{onClick:function(e){try{a&&a(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||s&&"_self"!==s||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),i())}});return c.ref=se!==ce&&n||r,t.createElement("a",c)}));var fe=ce((function(e,n){var r=e.component,i=void 0===r?le:r,a=e.replace,u=e.to,s=e.innerRef,c=z(e,["component","replace","to","innerRef"]);return t.createElement(K.Consumer,null,(function(e){e||h(!1);var r=e.history,l=ue(oe(u,e.location),e.location),f=l?r.createHref(l):"",d=o({},c,{href:f,navigate:function(){var t=oe(u,e.location);(a?r.replace:r.push)(t)}});return se!==ce?d.ref=n||s:d.innerRef=s,t.createElement(i,d)}))})),he=function(e){return e},de=t.forwardRef;"undefined"===typeof de&&(de=he);de((function(e,n){var r=e["aria-current"],i=void 0===r?"page":r,a=e.activeClassName,u=void 0===a?"active":a,s=e.activeStyle,c=e.className,l=e.exact,f=e.isActive,d=e.location,p=e.sensitive,v=e.strict,m=e.style,y=e.to,g=e.innerRef,k=z(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return t.createElement(K.Consumer,null,(function(e){e||h(!1);var r=d||e.location,a=ue(oe(y,r),r),w=a.pathname,b=w&&w.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),x=b?$(r.pathname,{path:b,exact:l,sensitive:p,strict:v}):null,_=!!(f?f(x,r):x),I=_?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(c,u):c,E=_?o({},m,{},s):m,S=o({"aria-current":_&&i||null,className:I,style:E,to:a},k);return he!==de?S.ref=n||g:S.innerRef=g,t.createElement(fe,S)}))}));var pe=n(184),ve=function(){return(0,pe.jsxs)("div",{children:[(0,pe.jsxs)("header",{className:"header",children:[(0,pe.jsx)("nav",{className:"navbar",children:(0,pe.jsxs)("ul",{children:[(0,pe.jsx)("li",{children:(0,pe.jsx)(fe,{to:"/",children:"Home"})}),(0,pe.jsx)("li",{children:(0,pe.jsx)(fe,{to:"/about",children:"About"})}),(0,pe.jsx)("li",{children:(0,pe.jsx)(fe,{to:"/contact",children:"Contact"})})]})}),(0,pe.jsx)("h1",{className:"title",children:"AlectoWatch"}),(0,pe.jsx)("p",{className:"subtitle",children:"Defend with Trend"}),(0,pe.jsx)(fe,{to:"/signin",className:"cta-button",children:"Get Started"})]}),(0,pe.jsxs)("section",{id:"features",className:"features-section",children:[(0,pe.jsx)("h2",{children:"Features"}),(0,pe.jsxs)("ul",{children:[(0,pe.jsx)("li",{children:(0,pe.jsx)(fe,{to:"/surveillance",children:"24/7 Surveillance"})}),(0,pe.jsx)("li",{children:(0,pe.jsx)(fe,{to:"/IntelligentIntrusionDetection",children:"Intelligent Intrusion Detection"})}),(0,pe.jsx)("li",{children:(0,pe.jsx)(fe,{to:"/NightVision",children:"Night Vision"})}),(0,pe.jsx)("li",{children:(0,pe.jsx)(fe,{to:"/SmartHomeIntegration",children:"Smart Home Integration"})}),(0,pe.jsx)("li",{children:(0,pe.jsx)(fe,{to:"/CloudStorage",children:"Cloud Storage"})}),(0,pe.jsx)("li",{children:(0,pe.jsx)(fe,{to:"/MultiUserAccess",children:"Multi-User Access"})}),(0,pe.jsx)("li",{children:(0,pe.jsx)(fe,{to:"/FacialRecognition",children:"Facial Recognition"})}),(0,pe.jsx)("li",{children:(0,pe.jsx)(fe,{to:"/SmartMonitoringZones",children:"Smart Monitoring Zones"})}),(0,pe.jsx)("li",{children:(0,pe.jsx)(fe,{to:"/AdaptiveLearning",children:"Adaptive Learning"})}),(0,pe.jsx)("li",{children:(0,pe.jsx)(fe,{to:"/SmartInsightsAndRecommendations",children:"Smart Insights and Recommendations"})})]})]}),(0,pe.jsx)("footer",{className:"footer",children:(0,pe.jsx)("p",{children:"\xa9 2023 AlectoWatch. All rights reserved."})})]})},me=function(){return(0,pe.jsxs)("div",{children:[(0,pe.jsx)("h2",{children:"About AlectoWatch"}),(0,pe.jsx)("p",{children:"AlectoWatch is a state-of-the-art smart security system designed to provide comprehensive protection for your home. With advanced AI technology, it offers real-time monitoring, facial recognition, and intelligent access control. Experience peace of mind knowing that your home is safeguarded with the latest security measures."})]})},ye=function(){return(0,pe.jsxs)("div",{className:"contact-container",children:[(0,pe.jsx)("h2",{children:"Contact Us"}),(0,pe.jsxs)("form",{className:"contact-form",children:[(0,pe.jsx)("input",{type:"text",name:"name",placeholder:"Your Name",required:!0}),(0,pe.jsx)("input",{type:"email",name:"email",placeholder:"Your Email",required:!0}),(0,pe.jsx)("textarea",{name:"message",placeholder:"Your Message",required:!0}),(0,pe.jsx)("button",{type:"submit",children:"Send Message"})]})]})};function ge(e){return ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ge(e)}function ke(){ke=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(C){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),u=new E(i||[]);return r(o,"_invoke",{value:b(e,n,u)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};s(v,a,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(S([])));y&&y!==t&&n.call(y,a)&&(v=y);var g=p.prototype=h.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(r,a,o,u){var s=l(e[r],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==ge(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,u)}))}u(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function b(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return T()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=x(o,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function S(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return d.prototype=p,r(g,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,u,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},k(w.prototype),s(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(g),s(g,u,"Generator"),s(g,a,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=S,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function we(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function be(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){we(a,r,i,o,u,"next",e)}function u(e){we(a,r,i,o,u,"throw",e)}o(void 0)}))}}function xe(e){if(Array.isArray(e))return e}function _e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ie(e,t){if(e){if("string"===typeof e)return _e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_e(e,t):void 0}}function Ee(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Se(e,t){return xe(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||Ie(e,t)||Ee()}function Te(e){var t=function(e,t){if("object"!==ge(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ge(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ge(t)?t:String(t)}function Ce(e,t,n){return(t=Te(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Te(r.key),r)}}function De(e,t,n){return t&&Ae(e.prototype,t),n&&Ae(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Pe(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ie(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oe(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}function Le(e){return Le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Le(e)}function Me(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Fe(e){var t=Me();return function(){var n,r=Le(e);if(t){var i=Le(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ge(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Re(e)}(this,n)}}function Ue(e,t,n){return Ue=Me()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&i(a,n.prototype),a},Ue.apply(null,arguments)}function je(e){var t="function"===typeof Map?new Map:void 0;return je=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Ue(e,arguments,Le(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),i(n,e)},je(e)}var Ve=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ze={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ve(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new Be;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Be=function(e){Oe(n,e);var t=Fe(n);function n(){var e;return Ne(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return De(n)}(je(Error)),qe=function(e){return function(e){var t=Ve(e);return ze.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Ge=function(e){try{return ze.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Ke(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&We(n)&&(e[n]=Ke(e[n],t[n]));return e}function We(e){return"__proto__"!==e}var He=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},Qe=function(){try{return He()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&Ge(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Ye=function(){var e;return null===(e=Qe())||void 0===e?void 0:e.config},$e=function(){function e(){var t=this;Ne(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return De(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Xe(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Je(){var e,t=null===(e=Qe())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function Ze(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function et(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function tt(){var e=Xe();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function nt(){try{return"object"===typeof indexedDB}catch(e){return!1}}var rt=function(e){Oe(n,e);var t=Fe(n);function n(e,r,i){var a;return Ne(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(Re(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(Re(a),it.prototype.create),a}return De(n)}(je(Error)),it=function(){function e(t,n,r){Ne(this,e),this.service=t,this.serviceName=n,this.errors=r}return De(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(at,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new rt(n,a,t)}}]),e}();var at=/\{\$([^}]+)}/g;function ot(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ut(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function st(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(ct(u)&&ct(s)){if(!st(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function ct(e){return null!==e&&"object"===typeof e}function lt(e){for(var t=[],n=function(){var e=Se(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function ft(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=Se(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function ht(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function dt(e,t){var n=new pt(e,t);return n.subscribe.bind(n)}var pt=function(){function e(t,n){var r=this;Ne(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return De(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=Pe(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=vt),void 0===r.error&&(r.error=vt),void 0===r.complete&&(r.complete=vt);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function vt(){}function mt(e){return e&&e._delegate?e._delegate:e}function yt(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function gt(e){return function(e){if(Array.isArray(e))return _e(e)}(e)||yt(e)||Ie(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var kt=function(){function e(t,n,r){Ne(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return De(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),wt="[DEFAULT]",bt=function(){function e(t,n){Ne(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return De(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new $e;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:wt})}catch(s){}var t,n=Pe(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=Se(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=be(ke().mark((function e(){var t;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(gt(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),gt(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=Pe(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=Se(i.value,2),s=u[0],c=u[1];r===this.normalizeInstanceIdentifier(s)&&c.resolve(a)}}catch(l){o.e(l)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=Pe(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(tE){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===wt?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(tE){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt;return this.component?this.component.multipleInstances?e:wt:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var xt,_t,It=function(){function e(t){Ne(this,e),this.name=t,this.providers=new Map}return De(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new bt(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Et=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(_t||(_t={}));var St={debug:_t.DEBUG,verbose:_t.VERBOSE,info:_t.INFO,warn:_t.WARN,error:_t.ERROR,silent:_t.SILENT},Tt=_t.INFO,Ct=(Ce(xt={},_t.DEBUG,"log"),Ce(xt,_t.VERBOSE,"log"),Ce(xt,_t.INFO,"info"),Ce(xt,_t.WARN,"warn"),Ce(xt,_t.ERROR,"error"),xt),Nt=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Ct[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},At=function(){function e(t){Ne(this,e),this.name=t,this._logLevel=Tt,this._logHandler=Nt,this._userLogHandler=null,Et.push(this)}return De(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in _t))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?St[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,_t.DEBUG].concat(t)),this._logHandler.apply(this,[this,_t.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,_t.VERBOSE].concat(t)),this._logHandler.apply(this,[this,_t.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,_t.INFO].concat(t)),this._logHandler.apply(this,[this,_t.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,_t.WARN].concat(t)),this._logHandler.apply(this,[this,_t.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,_t.ERROR].concat(t)),this._logHandler.apply(this,[this,_t.ERROR].concat(t))}}]),e}();function Dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dt(Object(n),!0).forEach((function(t){Ce(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Rt,Ot,Lt=function(e,t){return t.some((function(t){return e instanceof t}))};var Mt=new WeakMap,Ft=new WeakMap,Ut=new WeakMap,jt=new WeakMap,Vt=new WeakMap;var zt={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ft.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ut.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gt(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Bt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ot||(Ot=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Kt(this),n),Gt(Mt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Gt(e.apply(Kt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Kt(this),t].concat(r));return Ut.set(a,t.sort?t.sort():[t]),Gt(a)}}function qt(e){return"function"===typeof e?Bt(e):(e instanceof IDBTransaction&&function(e){if(!Ft.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Ft.set(e,t)}}(e),Lt(e,Rt||(Rt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,zt):e)}function Gt(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Gt(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Mt.set(t,e)})).catch((function(){})),Vt.set(t,e),t}(e);if(jt.has(e))return jt.get(e);var t=qt(e);return t!==e&&(jt.set(e,t),Vt.set(t,e)),t}var Kt=function(e){return Vt.get(e)};var Wt,Ht,Qt=["get","getKey","getAll","getAllKeys","count"],Yt=["put","add","delete","clear"],$t=new Map;function Xt(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if($t.get(t))return $t.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Yt.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Qt.includes(n))){var a=function(){var e=be(ke().mark((function e(t){var a,o,u,s,c,l,f=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return $t.set(t,a),a}}}zt=function(e){return Pt(Pt({},e),{},{get:function(t,n,r){return Xt(t,n)||e.get(t,n,r)},has:function(t,n){return!!Xt(t,n)||e.has(t,n)}})}(zt);var Jt=function(){function e(t){Ne(this,e),this.container=t}return De(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Zt="@firebase/app",en="0.9.11",tn=new At("@firebase/app"),nn="[DEFAULT]",rn=(Ce(Wt={},Zt,"fire-core"),Ce(Wt,"@firebase/app-compat","fire-core-compat"),Ce(Wt,"@firebase/analytics","fire-analytics"),Ce(Wt,"@firebase/analytics-compat","fire-analytics-compat"),Ce(Wt,"@firebase/app-check","fire-app-check"),Ce(Wt,"@firebase/app-check-compat","fire-app-check-compat"),Ce(Wt,"@firebase/auth","fire-auth"),Ce(Wt,"@firebase/auth-compat","fire-auth-compat"),Ce(Wt,"@firebase/database","fire-rtdb"),Ce(Wt,"@firebase/database-compat","fire-rtdb-compat"),Ce(Wt,"@firebase/functions","fire-fn"),Ce(Wt,"@firebase/functions-compat","fire-fn-compat"),Ce(Wt,"@firebase/installations","fire-iid"),Ce(Wt,"@firebase/installations-compat","fire-iid-compat"),Ce(Wt,"@firebase/messaging","fire-fcm"),Ce(Wt,"@firebase/messaging-compat","fire-fcm-compat"),Ce(Wt,"@firebase/performance","fire-perf"),Ce(Wt,"@firebase/performance-compat","fire-perf-compat"),Ce(Wt,"@firebase/remote-config","fire-rc"),Ce(Wt,"@firebase/remote-config-compat","fire-rc-compat"),Ce(Wt,"@firebase/storage","fire-gcs"),Ce(Wt,"@firebase/storage-compat","fire-gcs-compat"),Ce(Wt,"@firebase/firestore","fire-fst"),Ce(Wt,"@firebase/firestore-compat","fire-fst-compat"),Ce(Wt,"fire-js","fire-js"),Ce(Wt,"firebase","fire-js-all"),Wt),an=new Map,on=new Map;function un(e,t){try{e.container.addComponent(t)}catch(n){tn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function sn(e,t){e.container.addOrOverwriteComponent(t)}function cn(e){var t=e.name;if(on.has(t))return tn.debug("There were multiple attempts to register component ".concat(t,".")),!1;on.set(t,e);var n,r=Pe(an.values());try{for(r.s();!(n=r.n()).done;){un(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function ln(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function fn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:nn;ln(e,t).clearInstance(n)}function hn(){on.clear()}var dn=(Ce(Ht={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),Ce(Ht,"bad-app-name","Illegal App name: '{$appName}"),Ce(Ht,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Ce(Ht,"app-deleted","Firebase App named '{$appName}' already deleted"),Ce(Ht,"no-options","Need to provide options, when not being deployed to hosting via source."),Ce(Ht,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Ce(Ht,"invalid-log-argument","First argument to `onLog` must be null or a function."),Ce(Ht,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),Ce(Ht,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),Ce(Ht,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),Ce(Ht,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Ht),pn=new it("app","Firebase",dn),vn=function(){function e(t,n,r){var i=this;Ne(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new kt("app",(function(){return i}),"PUBLIC"))}return De(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw pn.create("app-deleted",{appName:this._name})}}]),e}(),mn="9.22.1";function yn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:nn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw pn.create("bad-app-name",{appName:String(i)});if(n||(n=Ye()),!n)throw pn.create("no-options");var a=an.get(i);if(a){if(st(n,a.options)&&st(r,a.config))return a;throw pn.create("duplicate-app",{appName:i})}var o,u=new It(i),s=Pe(on.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new vn(n,r,u);return an.set(i,l),l}function gn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nn,t=an.get(e);if(!t&&e===nn&&Ye())return yn();if(!t)throw pn.create("no-app",{appName:e});return t}function kn(){return Array.from(an.values())}function wn(e){return bn.apply(this,arguments)}function bn(){return(bn=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!an.has(n)){e.next=6;break}return an.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xn(e,t,n){var r,i=null!==(r=rn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void tn.warn(u.join(" "))}cn(new kt("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function _n(e,t){if(null!==e&&"function"!==typeof e)throw pn.create("invalid-log-argument");!function(e,t){var n,r=Pe(Et);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=St[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:_t[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function In(e){var t;t=e,Et.forEach((function(e){e.setLogLevel(t)}))}var En="firebase-heartbeat-database",Sn=1,Tn="firebase-heartbeat-store",Cn=null;function Nn(){return Cn||(Cn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Gt(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Gt(u.result),e.oldVersion,e.newVersion,Gt(u.transaction),e)})),r&&u.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),s}(En,Sn,{upgrade:function(e,t){if(0===t)e.createObjectStore(Tn)}}).catch((function(e){throw pn.create("idb-open",{originalErrorMessage:e.message})}))),Cn}function An(e){return Dn.apply(this,arguments)}function Dn(){return Dn=be(ke().mark((function e(t){var n,r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Nn();case 3:return n=e.sent,e.next=6,n.transaction(Tn).objectStore(Tn).get(On(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof rt?tn.warn(e.t0.message):(i=pn.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),tn.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),Dn.apply(this,arguments)}function Pn(e,t){return Rn.apply(this,arguments)}function Rn(){return Rn=be(ke().mark((function e(t,n){var r,i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Nn();case 3:return r=e.sent,i=r.transaction(Tn,"readwrite"),a=i.objectStore(Tn),e.next=8,a.put(n,On(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof rt?tn.warn(e.t0.message):(o=pn.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),tn.warn(o.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),Rn.apply(this,arguments)}function On(e){return"".concat(e.name,"!").concat(e.options.appId)}var Ln=function(){function e(t){var n=this;Ne(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Vn(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return De(e,[{key:"triggerHeartbeat",value:function(){var e=be(ke().mark((function e(){var t,n,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Mn(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=be(ke().mark((function e(){var t,n,r,i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Mn(),n=Fn(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=qe(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Mn(){return(new Date).toISOString().substring(0,10)}function Fn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=Pe(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),zn(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),zn(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Un,jn,Vn=function(){function e(t){Ne(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return De(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(nt()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=be(ke().mark((function e(){var t;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,An(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=be(ke().mark((function e(t){var n,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Pn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=be(ke().mark((function e(t){var n,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Pn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(gt(r.heartbeats),gt(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function zn(e){return qe(JSON.stringify({version:2,heartbeats:e})).length}Un="",cn(new kt("platform-logger",(function(e){return new Jt(e)}),"PRIVATE")),cn(new kt("heartbeat",(function(e){return new Ln(e)}),"PRIVATE")),xn(Zt,en,Un),xn(Zt,en,"esm2017"),xn("fire-js","");var Bn=function(){function e(t,n){var r=this;Ne(this,e),this._delegate=t,this.firebase=n,un(t,new kt("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return De(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),wn(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nn;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nn;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){un(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){sn(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),qn=(Ce(jn={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Ce(jn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),jn),Gn=new it("app-compat","Firebase",qn);var Kn=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=yn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(ot(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:xn,setLogLevel:In,onLog:_n,apps:null,SDK_VERSION:mn,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(cn(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Gn.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Ke(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!ot(n,e=e||nn))throw Gn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Bn);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Ke(n,e)},createSubscribe:dt,ErrorFactory:it,deepExtend:Ke}),n}(),Wn=new At("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Wn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Hn=self.firebase.SDK_VERSION;Hn&&Hn.indexOf("LITE")>=0&&Wn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Qn=Kn;!function(e){xn("@firebase/app-compat","0.2.11",e)}();function Yn(){return Yn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Le(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Yn.apply(this,arguments)}Qn.registerVersion("firebase","9.22.1","app-compat");function $n(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;var Xn,Jn={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Zn="EMAIL_SIGNIN",er="PASSWORD_RESET",tr="RECOVER_EMAIL",nr="REVERT_SECOND_FACTOR_ADDITION",rr="VERIFY_AND_CHANGE_EMAIL",ir="VERIFY_EMAIL";function ar(){return Ce({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var or=function(){var e;return Ce(e={},"admin-restricted-operation","This operation is restricted to administrators only."),Ce(e,"argument-error",""),Ce(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),Ce(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),Ce(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),Ce(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),Ce(e,"cordova-not-ready","Cordova framework is not ready."),Ce(e,"cors-unsupported","This browser is not supported."),Ce(e,"credential-already-in-use","This credential is already associated with a different user account."),Ce(e,"custom-token-mismatch","The custom token corresponds to a different audience."),Ce(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),Ce(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),Ce(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),Ce(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),Ce(e,"email-already-in-use","The email address is already in use by another account."),Ce(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),Ce(e,"expired-action-code","The action code has expired."),Ce(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),Ce(e,"internal-error","An internal AuthError has occurred."),Ce(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),Ce(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),Ce(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),Ce(e,"invalid-auth-event","An internal AuthError has occurred."),Ce(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),Ce(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),Ce(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),Ce(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),Ce(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),Ce(e,"invalid-email","The email address is badly formatted."),Ce(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),Ce(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),Ce(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),Ce(e,"invalid-credential","The supplied auth credential is malformed or has expired."),Ce(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),Ce(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),Ce(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),Ce(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),Ce(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),Ce(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),Ce(e,"wrong-password","The password is invalid or the user does not have a password."),Ce(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),Ce(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),Ce(e,"invalid-provider-id","The specified provider ID is invalid."),Ce(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),Ce(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),Ce(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),Ce(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),Ce(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),Ce(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),Ce(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),Ce(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),Ce(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),Ce(e,"missing-continue-uri","A continue URL must be provided in the request."),Ce(e,"missing-iframe-start","An internal AuthError has occurred."),Ce(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),Ce(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),Ce(e,"missing-password","A non-empty password must be provided"),Ce(e,"missing-multi-factor-info","No second factor identifier is provided."),Ce(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),Ce(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),Ce(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),Ce(e,"app-deleted","This instance of FirebaseApp has been deleted."),Ce(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),Ce(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),Ce(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),Ce(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),Ce(e,"no-auth-event","An internal AuthError has occurred."),Ce(e,"no-such-provider","User was not linked to an account with the given provider."),Ce(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),Ce(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),Ce(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),Ce(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),Ce(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),Ce(e,"provider-already-linked","User can only be linked to one identity for the given provider."),Ce(e,"quota-exceeded","The project's quota for this operation has been exceeded."),Ce(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),Ce(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),Ce(e,"rejected-credential","The request contains malformed or mismatching credentials."),Ce(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),Ce(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),Ce(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),Ce(e,"timeout","The operation has timed out."),Ce(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),Ce(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),Ce(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),Ce(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),Ce(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),Ce(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),Ce(e,"unverified-email","The operation requires a verified email."),Ce(e,"user-cancelled","The user did not grant your application the permissions it requested."),Ce(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),Ce(e,"user-disabled","The user account has been disabled by an administrator."),Ce(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),Ce(e,"user-signed-out",""),Ce(e,"weak-password","The password must be 6 characters long or more."),Ce(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),Ce(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),Ce(e,"missing-recaptcha-token","The reCAPTCHA token is missing when sending request to the backend."),Ce(e,"invalid-recaptcha-token","The reCAPTCHA token is invalid when sending request to the backend."),Ce(e,"invalid-recaptcha-action","The reCAPTCHA action is invalid when sending request to the backend."),Ce(e,"recaptcha-not-enabled","reCAPTCHA Enterprise integration is not enabled for this project."),Ce(e,"missing-client-type","The reCAPTCHA client type is missing when sending request to the backend."),Ce(e,"missing-recaptcha-version","The reCAPTCHA version is missing when sending request to the backend."),Ce(e,"invalid-req-type","Invalid request parameters."),Ce(e,"invalid-recaptcha-version","The reCAPTCHA version is invalid when sending request to the backend."),e},ur=ar,sr=new it("auth","Firebase",ar()),cr=new At("@firebase/auth");function lr(e){if(cr.logLevel<=_t.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];cr.warn.apply(cr,["Auth (".concat(mn,"): ").concat(e)].concat(n))}}function fr(e){if(cr.logLevel<=_t.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];cr.error.apply(cr,["Auth (".concat(mn,"): ").concat(e)].concat(n))}}function hr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw mr.apply(void 0,[e].concat(n))}function dr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return mr.apply(void 0,[e].concat(n))}function pr(e,t,n){var r=Object.assign(Object.assign({},ur()),Ce({},t,n));return new it("auth","Firebase",r).create(t,{appName:e.name})}function vr(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&hr(e,"argument-error"),pr(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function mr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=gt(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(gt(o)))}return sr.create.apply(sr,[e].concat(n))}function yr(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw mr.apply(void 0,[t].concat(r))}}function gr(e){var t="INTERNAL ASSERTION FAILED: "+e;throw fr(t),new Error(t)}function kr(e,t){e||gr(t)}function wr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function br(){return"http:"===xr()||"https:"===xr()}function xr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var _r=function(){function e(t,n){Ne(this,e),this.shortDelay=t,this.longDelay=n,kr(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xe())||et()}return De(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(br()||Ze()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Ir(e,t){kr(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Er=function(){function e(){Ne(this,e)}return De(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void gr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void gr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void gr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Sr=(Ce(Xn={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),Ce(Xn,"MISSING_CUSTOM_TOKEN","internal-error"),Ce(Xn,"INVALID_IDENTIFIER","invalid-email"),Ce(Xn,"MISSING_CONTINUE_URI","internal-error"),Ce(Xn,"INVALID_PASSWORD","wrong-password"),Ce(Xn,"MISSING_PASSWORD","missing-password"),Ce(Xn,"EMAIL_EXISTS","email-already-in-use"),Ce(Xn,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),Ce(Xn,"INVALID_IDP_RESPONSE","invalid-credential"),Ce(Xn,"INVALID_PENDING_TOKEN","invalid-credential"),Ce(Xn,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),Ce(Xn,"MISSING_REQ_TYPE","internal-error"),Ce(Xn,"EMAIL_NOT_FOUND","user-not-found"),Ce(Xn,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),Ce(Xn,"EXPIRED_OOB_CODE","expired-action-code"),Ce(Xn,"INVALID_OOB_CODE","invalid-action-code"),Ce(Xn,"MISSING_OOB_CODE","internal-error"),Ce(Xn,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),Ce(Xn,"INVALID_ID_TOKEN","invalid-user-token"),Ce(Xn,"TOKEN_EXPIRED","user-token-expired"),Ce(Xn,"USER_NOT_FOUND","user-token-expired"),Ce(Xn,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),Ce(Xn,"INVALID_CODE","invalid-verification-code"),Ce(Xn,"INVALID_SESSION_INFO","invalid-verification-id"),Ce(Xn,"INVALID_TEMPORARY_PROOF","invalid-credential"),Ce(Xn,"MISSING_SESSION_INFO","missing-verification-id"),Ce(Xn,"SESSION_EXPIRED","code-expired"),Ce(Xn,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),Ce(Xn,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),Ce(Xn,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),Ce(Xn,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),Ce(Xn,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),Ce(Xn,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),Ce(Xn,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),Ce(Xn,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),Ce(Xn,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),Ce(Xn,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),Ce(Xn,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Ce(Xn,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),Ce(Xn,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),Ce(Xn,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),Ce(Xn,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),Ce(Xn,"MISSING_CLIENT_TYPE","missing-client-type"),Ce(Xn,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),Ce(Xn,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),Ce(Xn,"INVALID_REQ_TYPE","invalid-req-type"),Xn),Tr=new _r(3e4,6e4);function Cr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Nr(e,t,n,r){return Ar.apply(this,arguments)}function Ar(){return Ar=be(ke().mark((function e(t,n,r,i){var a,o=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Dr(t,a,be(ke().mark((function e(){var a,o,u,s;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=lt(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Er.fetch()(Lr(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Ar.apply(this,arguments)}function Dr(e,t,n){return Pr.apply(this,arguments)}function Pr(){return Pr=be(ke().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Sr),n),e.prev=2,a=new Mr(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw Fr(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),l=Se(c,2),f=l[0],h=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw Fr(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw Fr(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw Fr(t,"user-disabled",u);case 29:if(d=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!h){e.next=34;break}throw pr(t,d,h);case 34:hr(t,d);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof rt)){e.next=41;break}throw e.t0;case 41:hr(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),Pr.apply(this,arguments)}function Rr(e,t,n,r){return Or.apply(this,arguments)}function Or(){return Or=be(ke().mark((function e(t,n,r,i){var a,o,u=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,Nr(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&hr(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Or.apply(this,arguments)}function Lr(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Ir(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Mr=function(){function e(t){var n=this;Ne(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(dr(n.auth,"network-request-failed"))}),Tr.get())}))}return De(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Fr(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=dr(e,t,r);return i.customData._tokenResponse=n,i}function Ur(e,t){return jr.apply(this,arguments)}function jr(){return jr=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nr(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),jr.apply(this,arguments)}function Vr(e,t){return zr.apply(this,arguments)}function zr(){return zr=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),zr.apply(this,arguments)}function Br(e,t){return qr.apply(this,arguments)}function qr(){return qr=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nr(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),qr.apply(this,arguments)}function Gr(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Kr(){return Kr=be(ke().mark((function e(t){var n,r,i,a,o,u,s=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=mt(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,yr((a=Hr(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Gr(Wr(a.auth_time)),issuedAtTime:Gr(Wr(a.iat)),expirationTime:Gr(Wr(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Kr.apply(this,arguments)}function Wr(e){return 1e3*Number(e)}function Hr(e){var t=Se(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return fr("JWT malformed, contained fewer than 3 sections"),null;try{var a=Ge(r);return a?JSON.parse(a):(fr("Failed to decode base64 JWT payload"),null)}catch(o){return fr("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function Qr(e,t){return Yr.apply(this,arguments)}function Yr(){return Yr=be(ke().mark((function e(t,n){var r=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof rt&&$r(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Yr.apply(this,arguments)}function $r(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Xr=function(){function e(t){Ne(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return De(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(be(ke().mark((function t(){return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Jr=function(){function e(t,n){Ne(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return De(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Gr(this.lastLoginAt),this.creationTime=Gr(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Zr(e){return ei.apply(this,arguments)}function ei(){return ei=be(ke().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Qr(t,Br(r,{idToken:i}));case 6:yr(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=$n(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],s=ni(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Jr(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),ei.apply(this,arguments)}function ti(){return(ti=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=mt(t),e.next=3,Zr(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ni(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(gt(n),gt(t))}function ri(e,t){return ii.apply(this,arguments)}function ii(){return ii=be(ke().mark((function e(t,n){var r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dr(t,{},be(ke().mark((function e(){var r,i,a,o,u,s;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lt({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=Lr(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Er.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),ii.apply(this,arguments)}var ai=function(){function e(){Ne(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return De(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){yr(e.idToken,"internal-error"),yr("undefined"!==typeof e.idToken,"internal-error"),yr("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Hr(e);return yr(t,"internal-error"),yr("undefined"!==typeof t.exp,"internal-error"),yr("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=be(ke().mark((function e(t){var n,r=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],yr(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=be(ke().mark((function e(t,n){var r,i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ri(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return gr("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(yr("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(yr("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(yr("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function oi(e,t){yr("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var ui=function(){function e(t){Ne(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=$n(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Xr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?gt(a.providerData):[],this.metadata=new Jr(a.createdAt||void 0,a.lastLoginAt||void 0)}return De(e,[{key:"getIdToken",value:function(){var e=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qr(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(yr(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Kr.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return ti.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(yr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){yr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=be(ke().mark((function e(t){var n,r,i=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Zr(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=be(ke().mark((function e(){var t;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Qr(this,Ur(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;yr(k&&_,t,"internal-error");var I=ai.fromJSON(this.name,_);yr("string"===typeof k,t,"internal-error"),oi(f,t.name),oi(h,t.name),yr("boolean"===typeof w,t,"internal-error"),yr("boolean"===typeof b,t,"internal-error"),oi(d,t.name),oi(p,t.name),oi(v,t.name),oi(m,t.name),oi(y,t.name),oi(g,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:w,displayName:f,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:y,lastLoginAt:g});return x&&Array.isArray(x)&&(E.providerData=x.map((function(e){return Object.assign({},e)}))),m&&(E._redirectEventId=m),E}},{key:"_fromIdTokenResponse",value:function(){var t=be(ke().mark((function t(n,r){var i,a,o,u=arguments;return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new ai).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Zr(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),si=new Map;function ci(e){kr(e instanceof Function,"Expected a class definition");var t=si.get(e);return t?(kr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,si.set(e,t),t)}var li=function(){function e(){Ne(this,e),this.type="NONE",this.storage={}}return De(e,[{key:"_isAvailable",value:function(){var e=be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();li.type="NONE";var fi=li;function hi(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var di=function(){function e(t,n,r){Ne(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=hi(this.userKey,a.apiKey,o),this.fullPersistenceKey=hi("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return De(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=be(ke().mark((function e(){var t;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?ui._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=be(ke().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(ci(fi),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||ci(fi),u=hi(i,n.config.apiKey,n.name),s=null,c=Pe(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=ui._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function pi(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(gi(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(vi(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(wi(t))return"Blackberry";if(bi(t))return"Webos";if(mi(t))return"Safari";if((t.includes("chrome/")||yi(t))&&!t.includes("edge/"))return"Chrome";if(ki(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function vi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/firefox\//i.test(e)}function mi(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/crios\//i.test(e)}function gi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/iemobile/i.test(e)}function ki(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/android/i.test(e)}function wi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/blackberry/i.test(e)}function bi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/webos/i.test(e)}function xi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function _i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return xi(e)||ki(e)||bi(e)||wi(e)||/windows phone/i.test(e)||gi(e)}function Ii(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=pi(Xe());break;case"Worker":t="".concat(pi(Xe()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(mn,"/").concat(r)}function Ei(e){return Si.apply(this,arguments)}function Si(){return Si=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nr(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),Si.apply(this,arguments)}function Ti(e,t){return Ci.apply(this,arguments)}function Ci(){return Ci=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nr(t,"GET","/v2/recaptchaConfig",Cr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ci.apply(this,arguments)}function Ni(e){return void 0!==e&&void 0!==e.getResponse}function Ai(e){return void 0!==e&&void 0!==e.enterprise}var Di=De((function e(t){if(Ne(this,e),this.siteKey="",this.emailPasswordEnabled=!1,void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some((function(e){return"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState}))}));function Pi(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=dr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Ri(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Oi=function(){function e(t){Ne(this,e),this.type="recaptcha-enterprise",this.auth=ji(t)}return De(e,[{key:"verify",value:function(){var e=be(ke().mark((function e(){var t,n,r,i,a,o=this,u=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,n,r){var i=window.grecaptcha;Ai(i)?i.enterprise.ready((function(){i.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(){n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))},i=function(){return i=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=t.tenantId||null==t._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",t._agentRecaptchaConfig.siteKey);case 3:if(null==t.tenantId||void 0===t._tenantRecaptchaConfigs[t.tenantId]){e.next=5;break}return e.abrupt("return",t._tenantRecaptchaConfigs[t.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=be(ke().mark((function e(n,r){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ti(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var i=new Di(e);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,n(i.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){r(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},r=function(e){return i.apply(this,arguments)},t=u.length>0&&void 0!==u[0]?u[0]:"verify",n=u.length>1&&void 0!==u[1]&&u[1],e.abrupt("return",new Promise((function(e,t){r(o.auth).then((function(r){if(!n&&Ai(window.grecaptcha))a(r,e,t);else{if("undefined"===typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));Pi("https://www.google.com/recaptcha/enterprise.js?render="+r).then((function(){a(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Li(e,t,n){return Mi.apply(this,arguments)}function Mi(){return Mi=be(ke().mark((function e(t,n,r){var i,a,o,u,s=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>3&&void 0!==s[3]&&s[3],a=new Oi(t),e.prev=2,e.next=5,a.verify(r);case 5:o=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,a.verify(r,!0);case 12:o=e.sent;case 13:return u=Object.assign({},n),i?Object.assign(u,{captchaResp:o}):Object.assign(u,{captchaResponse:o}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",u);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),Mi.apply(this,arguments)}var Fi=function(){function e(t){Ne(this,e),this.auth=t,this.queue=[]}return De(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=be(ke().mark((function e(t){var n,r,i,a,o,u,s;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=Pe(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=Pe(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ui=function(){function e(t,n,r,i){Ne(this,e),this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vi(this),this.idTokenSubscription=new Vi(this),this.beforeStateQueue=new Fi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sr,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}return De(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=ci(t)),this._initializationPromise=this.queue(be(ke().mark((function r(){var i,a;return ke().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,di.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=be(ke().mark((function e(){var t;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=be(ke().mark((function e(t){var n,r,i,a,o,u,s;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return yr(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Zr(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?mt(t):null)&&yr(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=be(ke().mark((function e(t){var n,r=this,i=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&yr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(be(ke().mark((function n(){return ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(ci(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"initializeRecaptchaConfig",value:function(){var e=be(ke().mark((function e(){var t,n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ti(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"});case 2:t=e.sent,n=new Di(t),null==this.tenantId?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new Oi(this).verify();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new it("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=be(ke().mark((function e(t,n){var r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return yr(n=t&&ci(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,di.create(this,[ci(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=be(ke().mark((function e(t){var n,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=be(ke().mark((function e(t){var n=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return yr(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return yr(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ii(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=be(ke().mark((function e(){var t,n,r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ce({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.next=8,this._getAppCheckToken();case 8:return(i=e.sent)&&(n["X-Firebase-AppCheck"]=i),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=be(ke().mark((function e(){var t,n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();case 2:return(null===(n=e.sent)||void 0===n?void 0:n.error)&&lr("Error while retrieving App Check token: ".concat(n.error)),e.abrupt("return",null===n||void 0===n?void 0:n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ji(e){return mt(e)}var Vi=function(){function e(t){var n=this;Ne(this,e),this.auth=t,this.observer=null,this.addObserver=dt((function(e){return n.observer=e}))}return De(e,[{key:"next",get:function(){return yr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function zi(e,t,n){var r=ji(e);yr(r._canInitEmulator,r,"emulator-config-failed"),yr(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Bi(t),o=function(e){var t=Bi(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:qi(r.substr(a.length+1))}}var o=Se(r.split(":"),2);return{host:o[0],port:qi(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Bi(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function qi(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Gi=function(){function e(t,n){Ne(this,e),this.providerId=t,this.signInMethod=n}return De(e,[{key:"toJSON",value:function(){return gr("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return gr("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return gr("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return gr("not implemented")}}]),e}();function Ki(e,t){return Wi.apply(this,arguments)}function Wi(){return Wi=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nr(t,"POST","/v1/accounts:resetPassword",Cr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Wi.apply(this,arguments)}function Hi(e,t){return Qi.apply(this,arguments)}function Qi(){return Qi=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Qi.apply(this,arguments)}function Yi(e,t){return $i.apply(this,arguments)}function $i(){return $i=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nr(t,"POST","/v1/accounts:update",Cr(t,n)));case 1:case"end":return e.stop()}}),e)}))),$i.apply(this,arguments)}function Xi(e,t){return Ji.apply(this,arguments)}function Ji(){return Ji=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rr(t,"POST","/v1/accounts:signInWithPassword",Cr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ji.apply(this,arguments)}function Zi(e,t){return ea.apply(this,arguments)}function ea(){return ea=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nr(t,"POST","/v1/accounts:sendOobCode",Cr(t,n)));case 1:case"end":return e.stop()}}),e)}))),ea.apply(this,arguments)}function ta(e,t){return na.apply(this,arguments)}function na(){return na=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zi(t,n));case 1:case"end":return e.stop()}}),e)}))),na.apply(this,arguments)}function ra(e,t){return ia.apply(this,arguments)}function ia(){return ia=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zi(t,n));case 1:case"end":return e.stop()}}),e)}))),ia.apply(this,arguments)}function aa(e,t){return oa.apply(this,arguments)}function oa(){return oa=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zi(t,n));case 1:case"end":return e.stop()}}),e)}))),oa.apply(this,arguments)}function ua(e,t){return sa.apply(this,arguments)}function sa(){return sa=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zi(t,n));case 1:case"end":return e.stop()}}),e)}))),sa.apply(this,arguments)}function ca(e,t){return la.apply(this,arguments)}function la(){return la=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rr(t,"POST","/v1/accounts:signInWithEmailLink",Cr(t,n)));case 1:case"end":return e.stop()}}),e)}))),la.apply(this,arguments)}function fa(e,t){return ha.apply(this,arguments)}function ha(){return ha=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rr(t,"POST","/v1/accounts:signInWithEmailLink",Cr(t,n)));case 1:case"end":return e.stop()}}),e)}))),ha.apply(this,arguments)}var da=function(e){Oe(n,e);var t=Fe(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Ne(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return De(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=be(ke().mark((function e(t){var n,r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?12:13;break;case 3:if(r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},!(null===(n=t._getRecaptchaConfig())||void 0===n?void 0:n.emailPasswordEnabled)){e.next=11;break}return e.next=7,Li(t,r,"signInWithPassword");case 7:return i=e.sent,e.abrupt("return",Xi(t,i));case 11:return e.abrupt("return",Xi(t,r).catch(function(){var e=be(ke().mark((function e(n){var i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,Li(t,r,"signInWithPassword");case 4:return i=e.sent,e.abrupt("return",Xi(t,i));case 8:return e.abrupt("return",Promise.reject(n));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return e.abrupt("return",ca(t,{email:this._email,oobCode:this._password}));case 13:hr(t,"internal-error");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Hi(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",fa(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:hr(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Gi);function pa(e,t){return va.apply(this,arguments)}function va(){return va=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rr(t,"POST","/v1/accounts:signInWithIdp",Cr(t,n)));case 1:case"end":return e.stop()}}),e)}))),va.apply(this,arguments)}var ma=function(e){Oe(n,e);var t=Fe(n);function n(){var e;return Ne(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return De(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return pa(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,pa(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,pa(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=lt(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):hr("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=$n(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Gi);function ya(e,t){return ga.apply(this,arguments)}function ga(){return ga=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nr(t,"POST","/v1/accounts:sendVerificationCode",Cr(t,n)));case 1:case"end":return e.stop()}}),e)}))),ga.apply(this,arguments)}function ka(){return ka=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rr(t,"POST","/v1/accounts:signInWithPhoneNumber",Cr(t,n)));case 1:case"end":return e.stop()}}),e)}))),ka.apply(this,arguments)}function wa(){return wa=be(ke().mark((function e(t,n){var r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rr(t,"POST","/v1/accounts:signInWithPhoneNumber",Cr(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Fr(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),wa.apply(this,arguments)}var ba=Ce({},"USER_NOT_FOUND","user-not-found");function xa(){return xa=be(ke().mark((function e(t,n){var r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Rr(t,"POST","/v1/accounts:signInWithPhoneNumber",Cr(t,r),ba));case 2:case"end":return e.stop()}}),e)}))),xa.apply(this,arguments)}var _a=function(e){Oe(n,e);var t=Fe(n);function n(e){var r;return Ne(this,n),(r=t.call(this,"phone","phone")).params=e,r}return De(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return ka.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return wa.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return xa.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Gi);var Ia=function(){function e(t){var n,r,i,a,o,u;Ne(this,e);var s=ft(ht(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);yr(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return De(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=ft(ht(e)).link,n=t?ft(ht(t)).deep_link_id:null,r=ft(ht(e)).deep_link_id;return(r?ft(ht(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(tE){return null}}}]),e}();var Ea=function(){function e(){Ne(this,e),this.providerId=e.PROVIDER_ID}return De(e,null,[{key:"credential",value:function(e,t){return da._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Ia.parseLink(t);return yr(n,"argument-error"),da._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Ea.PROVIDER_ID="password",Ea.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ea.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Sa=function(){function e(t){Ne(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return De(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Ta=function(e){Oe(n,e);var t=Fe(n);function n(){var e;return Ne(this,n),(e=t.apply(this,arguments)).scopes=[],e}return De(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return gt(this.scopes)}}]),n}(Sa),Ca=function(e){Oe(n,e);var t=Fe(n);function n(){return Ne(this,n),t.apply(this,arguments)}return De(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return yr(e.idToken||e.accessToken,"argument-error"),ma._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return yr("providerId"in t&&"signInMethod"in t,"argument-error"),ma._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(Ta),Na=function(e){Oe(n,e);var t=Fe(n);function n(){return Ne(this,n),t.call(this,"facebook.com")}return De(n,null,[{key:"credential",value:function(e){return ma._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(tE){return null}}}]),n}(Ta);Na.FACEBOOK_SIGN_IN_METHOD="facebook.com",Na.PROVIDER_ID="facebook.com";var Aa=function(e){Oe(n,e);var t=Fe(n);function n(){var e;return Ne(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return De(n,null,[{key:"credential",value:function(e,t){return ma._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(tE){return null}}}]),n}(Ta);Aa.GOOGLE_SIGN_IN_METHOD="google.com",Aa.PROVIDER_ID="google.com";var Da=function(e){Oe(n,e);var t=Fe(n);function n(){return Ne(this,n),t.call(this,"github.com")}return De(n,null,[{key:"credential",value:function(e){return ma._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(tE){return null}}}]),n}(Ta);Da.GITHUB_SIGN_IN_METHOD="github.com",Da.PROVIDER_ID="github.com";var Pa=function(e){Oe(n,e);var t=Fe(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return De(n,[{key:"_getIdTokenResponse",value:function(e){return pa(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,pa(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,pa(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Gi),Ra=function(e){Oe(n,e);var t=Fe(n);function n(e){return Ne(this,n),yr(e.startsWith("saml."),"argument-error"),t.call(this,e)}return De(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Pa.fromJSON(e);return yr(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Pa._create(r,n)}catch(i){return null}}}]),n}(Sa),Oa=function(e){Oe(n,e);var t=Fe(n);function n(){return Ne(this,n),t.call(this,"twitter.com")}return De(n,null,[{key:"credential",value:function(e,t){return ma._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(tE){return null}}}]),n}(Ta);function La(e,t){return Ma.apply(this,arguments)}function Ma(){return Ma=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rr(t,"POST","/v1/accounts:signUp",Cr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ma.apply(this,arguments)}Oa.TWITTER_SIGN_IN_METHOD="twitter.com",Oa.PROVIDER_ID="twitter.com";var Fa=function(){function e(t){Ne(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return De(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=be(ke().mark((function t(n,r,i){var a,o,u,s,c=arguments;return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,ui._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=Ua(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=be(ke().mark((function t(n,r,i){var a;return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Ua(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Ua(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function ja(){return ja=be(ke().mark((function e(t){var n,r,i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ji(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Fa({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,La(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Fa._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),ja.apply(this,arguments)}var Va=function(e){Oe(n,e);var t=Fe(n);function n(e,r,i,a){var o,u;return Ne(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(Re(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return De(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(rt);function za(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Va._fromErrorAndOperation(e,n,t,r);throw n}))}function Ba(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function qa(e,t){return Ga.apply(this,arguments)}function Ga(){return Ga=be(ke().mark((function e(t,n){var r,i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=mt(t),e.next=3,Ha(!0,r,n);case 3:return e.t0=Vr,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Ba(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Ga.apply(this,arguments)}function Ka(e,t){return Wa.apply(this,arguments)}function Wa(){return Wa=be(ke().mark((function e(t,n){var r,i,a=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Qr,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Fa._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Wa.apply(this,arguments)}function Ha(e,t,n){return Qa.apply(this,arguments)}function Qa(){return(Qa=be(ke().mark((function e(t,n,r){var i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zr(n);case 2:i=Ba(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",yr(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ya(e,t){return $a.apply(this,arguments)}function $a(){return $a=be(ke().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Qr(t,za(i,a,n,t),r);case 6:return yr((o=e.sent).idToken,i,"internal-error"),yr(u=Hr(o.idToken),i,"internal-error"),s=u.sub,yr(t.uid===s,i,"user-mismatch"),e.abrupt("return",Fa._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&hr(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),$a.apply(this,arguments)}function Xa(e,t){return Ja.apply(this,arguments)}function Ja(){return Ja=be(ke().mark((function e(t,n){var r,i,a,o,u=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,za(t,i,n);case 4:return a=e.sent,e.next=7,Fa._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Ja.apply(this,arguments)}function Za(e,t){return eo.apply(this,arguments)}function eo(){return eo=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xa(ji(t),n));case 1:case"end":return e.stop()}}),e)}))),eo.apply(this,arguments)}function to(e,t){return no.apply(this,arguments)}function no(){return(no=be(ke().mark((function e(t,n){var r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=mt(t),e.next=3,Ha(!1,r,n.providerId);case 3:return e.abrupt("return",Ka(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ro(e,t){return io.apply(this,arguments)}function io(){return(io=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ya(mt(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ao(e,t){return oo.apply(this,arguments)}function oo(){return oo=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rr(t,"POST","/v1/accounts:signInWithCustomToken",Cr(t,n)));case 1:case"end":return e.stop()}}),e)}))),oo.apply(this,arguments)}function uo(){return uo=be(ke().mark((function e(t,n){var r,i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ji(t),e.next=3,ao(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Fa._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),uo.apply(this,arguments)}var so=function(){function e(t,n){Ne(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return De(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?co._fromServerResponse(e,t):"totpInfo"in t?lo._fromServerResponse(e,t):hr(e,"internal-error")}}]),e}(),co=function(e){Oe(n,e);var t=Fe(n);function n(e){var r;return Ne(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return De(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(so),lo=function(e){Oe(n,e);var t=Fe(n);function n(e){return Ne(this,n),t.call(this,"totp",e)}return De(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(so);function fo(e,t,n){var r;yr((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),yr("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(yr(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(yr(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function ho(){return ho=be(ke().mark((function e(t,n,r){var i,a,o,u;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=ji(t),o={requestType:"PASSWORD_RESET",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=11;break}return e.next=5,Li(a,o,"getOobCode",!0);case 5:return u=e.sent,r&&fo(a,u,r),e.next=9,ra(a,u);case 9:e.next=14;break;case 11:return r&&fo(a,o,r),e.next=14,ra(a,o).catch(function(){var e=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow."),e.next=4,Li(a,o,"getOobCode",!0);case 4:return n=e.sent,r&&fo(a,n,r),e.next=8,ra(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e)}))),ho.apply(this,arguments)}function po(){return po=be(ke().mark((function e(t,n,r){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ki(mt(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),po.apply(this,arguments)}function vo(){return vo=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yi(mt(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),vo.apply(this,arguments)}function mo(e,t){return yo.apply(this,arguments)}function yo(){return yo=be(ke().mark((function e(t,n){var r,i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=mt(t),e.next=3,Ki(r,{oobCode:n});case 3:i=e.sent,yr(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return yr(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:yr(i.mfaInfo,r,"internal-error");case 13:yr(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=so._fromServerResponse(ji(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),yo.apply(this,arguments)}function go(){return go=be(ke().mark((function e(t,n){var r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mo(mt(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),go.apply(this,arguments)}function ko(e,t,n){return wo.apply(this,arguments)}function wo(){return wo=be(ke().mark((function e(t,n,r){var i,a,o,u,s,c,l;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=ji(t),o={returnSecureToken:!0,email:n,password:r,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=9;break}return e.next=5,Li(a,o,"signUpPassword");case 5:s=e.sent,u=La(a,s),e.next=10;break;case 9:u=La(a,o).catch(function(){var e=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow."),e.next=4,Li(a,o,"signUpPassword");case 4:return n=e.sent,e.abrupt("return",La(a,n));case 8:return e.abrupt("return",Promise.reject(t));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:return e.next=12,u.catch((function(e){return Promise.reject(e)}));case 12:return c=e.sent,e.next=15,Fa._fromIdTokenResponse(a,"signIn",c);case 15:return l=e.sent,e.next=18,a._updateCurrentUser(l.user);case 18:return e.abrupt("return",l);case 19:case"end":return e.stop()}}),e)}))),wo.apply(this,arguments)}function bo(){return bo=be(ke().mark((function e(t,n,r){var i,a,o,u,s;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=function(e,t){yr(t.handleCodeInApp,a,"argument-error"),t&&fo(a,e,t)},a=ji(t),o={requestType:"EMAIL_SIGNIN",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=12;break}return e.next=6,Li(a,o,"getOobCode",!0);case 6:return s=e.sent,u(s,r),e.next=10,aa(a,s);case 10:e.next=15;break;case 12:return u(o,r),e.next=15,aa(a,o).catch(function(){var e=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,Li(a,o,"getOobCode",!0);case 4:return n=e.sent,u(n,r),e.next=8,aa(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 15:case"end":return e.stop()}}),e)}))),bo.apply(this,arguments)}function xo(){return xo=be(ke().mark((function e(t,n,r){var i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=mt(t),yr((a=Ea.credentialWithLink(n,r||wr()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Za(i,a));case 4:case"end":return e.stop()}}),e)}))),xo.apply(this,arguments)}function _o(e,t){return Io.apply(this,arguments)}function Io(){return Io=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nr(t,"POST","/v1/accounts:createAuthUri",Cr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Io.apply(this,arguments)}function Eo(){return Eo=be(ke().mark((function e(t,n){var r,i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=br()?wr():"http://localhost",i={identifier:n,continueUri:r},e.next=4,_o(mt(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),Eo.apply(this,arguments)}function So(){return(So=be(ke().mark((function e(t,n){var r,i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=mt(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&fo(r.auth,a,n),e.next=8,ta(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function To(){return(To=be(ke().mark((function e(t,n,r){var i,a,o,u;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=mt(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&fo(i.auth,o,r),e.next=8,ua(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Co(e,t){return No.apply(this,arguments)}function No(){return No=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),No.apply(this,arguments)}function Ao(){return(Ao=be(ke().mark((function e(t,n){var r,i,a,o,u,s,c;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=mt(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Qr(a,Co(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Do(e,t,n){return Po.apply(this,arguments)}function Po(){return Po=be(ke().mark((function e(t,n,r){var i,a,o,u;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Qr(t,Hi(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),Po.apply(this,arguments)}var Ro=De((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ne(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Oo=function(e){Oe(n,e);var t=Fe(n);function n(e,r,i,a){var o;return Ne(this,n),(o=t.call(this,e,r,i)).username=a,o}return De(n)}(Ro),Lo=function(e){Oe(n,e);var t=Fe(n);function n(e,r){return Ne(this,n),t.call(this,e,"facebook.com",r)}return De(n)}(Ro),Mo=function(e){Oe(n,e);var t=Fe(n);function n(e,r){return Ne(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return De(n)}(Oo),Fo=function(e){Oe(n,e);var t=Fe(n);function n(e,r){return Ne(this,n),t.call(this,e,"google.com",r)}return De(n)}(Ro),Uo=function(e){Oe(n,e);var t=Fe(n);function n(e,r,i){return Ne(this,n),t.call(this,e,"twitter.com",r,i)}return De(n)}(Oo);function jo(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Hr(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Ro(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Lo(a,i);case"github.com":return new Mo(a,i);case"google.com":return new Fo(a,i);case"twitter.com":return new Uo(a,i,e.screenName||null);case"custom":case"anonymous":return new Ro(a,null);default:return new Ro(a,r,i)}}(n)}var Vo=function(){function e(t,n,r){Ne(this,e),this.type=t,this.credential=n,this.auth=r}return De(e,[{key:"toJSON",value:function(){return{multiFactorSession:Ce({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),zo=function(){function e(t,n,r){Ne(this,e),this.session=t,this.hints=n,this.signInResolver=r}return De(e,[{key:"resolveSignIn",value:function(){var e=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=ji(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return so._fromServerResponse(r,e)}));yr(i.mfaPendingCredential,r,"internal-error");var o=Vo._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=be(ke().mark((function e(t){var a,u,s;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Fa._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return yr(n.user,r,"internal-error"),e.abrupt("return",Fa._forOperation(n.user,n.operationType,u));case 17:hr(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Bo(e,t){return Nr(e,"POST","/v2/accounts/mfaEnrollment:start",Cr(e,t))}function qo(e,t){return Nr(e,"POST","/v2/accounts/mfaEnrollment:start",Cr(e,t))}function Go(e,t){return Nr(e,"POST","/v2/accounts/mfaEnrollment:finalize",Cr(e,t))}function Ko(e,t){return Nr(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Cr(e,t))}var Wo=function(){function e(t){var n=this;Ne(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return so._fromServerResponse(t.auth,e)})))}))}return De(e,[{key:"getSession",value:function(){var e=be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Vo,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=be(ke().mark((function e(t,n){var r,i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Qr(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=be(ke().mark((function e(t){var n,r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,Qr(this.user,Ko(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Ho=new WeakMap;var Qo="__sak",Yo=function(){function e(t,n){Ne(this,e),this.storageRetriever=t,this.type=n}return De(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Qo,"1"),this.storage.removeItem(Qo),Promise.resolve(!0)):Promise.resolve(!1)}catch(tE){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var $o=function(e){Oe(n,e);var t=Fe(n);function n(){var e;return Ne(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Xe();return mi(e)||xi(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=_i(),e._shouldAllowMigration=!0,e}return De(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);tt()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=be(ke().mark((function e(t,r){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yn(Le(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=be(ke().mark((function e(t){var r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yn(Le(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yn(Le(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Yo);$o.type="LOCAL";var Xo=$o,Jo=function(e){Oe(n,e);var t=Fe(n);function n(){return Ne(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return De(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Yo);Jo.type="SESSION";var Zo=Jo;function eu(e){return Promise.all(e.map(function(){var e=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var tu=function(){function e(t){Ne(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return De(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=be(ke().mark((function e(t){var n,r,i,a,o,u,s,c;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,eu(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function nu(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}tu.receivers=[];var ru=function(){function e(t){Ne(this,e),this.target=t,this.handlers=new Set}return De(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=be(ke().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=nu("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function iu(){return window}function au(e){iu().location.href=e}function ou(){return"undefined"!==typeof iu().WorkerGlobalScope&&"function"===typeof iu().importScripts}function uu(){return su.apply(this,arguments)}function su(){return(su=be(ke().mark((function e(){var t;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function cu(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var lu="firebaseLocalStorageDb",fu="firebaseLocalStorage",hu="fbase_key",du=function(){function e(t){Ne(this,e),this.request=t}return De(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function pu(e,t){return e.transaction([fu],t?"readwrite":"readonly").objectStore(fu)}function vu(){var e=indexedDB.deleteDatabase(lu);return new du(e).toPromise()}function mu(){var e=indexedDB.open(lu,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(fu,{keyPath:hu})}catch(r){n(r)}})),e.addEventListener("success",be(ke().mark((function n(){var r;return ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(fu)){n.next=12;break}return r.close(),n.next=5,vu();case 5:return n.t0=t,n.next=8,mu();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function yu(e,t,n){return gu.apply(this,arguments)}function gu(){return gu=be(ke().mark((function e(t,n,r){var i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=pu(t,!0).put((Ce(i={},hu,n),Ce(i,"value",r),i)),e.abrupt("return",new du(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),gu.apply(this,arguments)}function ku(e,t){return wu.apply(this,arguments)}function wu(){return wu=be(ke().mark((function e(t,n){var r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pu(t,!1).get(n),e.next=3,new du(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),wu.apply(this,arguments)}function bu(e,t){var n=pu(e,!0).delete(t);return new du(n).toPromise()}var xu=function(){function e(){Ne(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return De(e,[{key:"_openDb",value:function(){var e=be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,mu();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=be(ke().mark((function e(t){var n,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ou()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=be(ke().mark((function e(){var t=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=tu._getInstance(ou()?self:null),this.receiver._subscribe("keyChanged",function(){var e=be(ke().mark((function e(n,r){var i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=be(ke().mark((function e(){var t,n,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uu();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new ru(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&cu()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=be(ke().mark((function e(){var t;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,mu();case 5:return t=e.sent,e.next=8,yu(t,Qo,"1");case 8:return e.next=10,bu(t,Qo);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=be(ke().mark((function e(t,n){var r=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return yu(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return ku(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=be(ke().mark((function e(t){var n=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return bu(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=be(ke().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=pu(e,!1).getAll();return new du(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=Pe(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(be(ke().mark((function t(){return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();xu.type="LOCAL";var _u=xu;function Iu(e,t){return Nr(e,"POST","/v2/accounts/mfaSignIn:start",Cr(e,t))}function Eu(e,t){return Nr(e,"POST","/v2/accounts/mfaSignIn:finalize",Cr(e,t))}var Su=1e12,Tu=function(){function e(t){Ne(this,e),this.auth=t,this.counter=Su,this._widgets=new Map}return De(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Cu(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Su;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Su;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=be(ke().mark((function e(t){var n,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Su,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Cu=function(){function e(t,n,r){var i=this;Ne(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;yr(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return De(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Nu=Ri("rcb"),Au=new _r(3e4,6e4),Du=function(){function e(){var t;Ne(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=iu().grecaptcha)||void 0===t?void 0:t.render)}return De(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return yr(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)&&Ni(iu().grecaptcha)?Promise.resolve(iu().grecaptcha):new Promise((function(r,i){var a=iu().setTimeout((function(){i(dr(e,"network-request-failed"))}),Au.get());iu()[Nu]=function(){iu().clearTimeout(a),delete iu()[Nu];var o=iu().grecaptcha;if(o&&Ni(o)){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(dr(e,"internal-error"))},Pi("".concat("https://www.google.com/recaptcha/api.js?","?").concat(lt({onload:Nu,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(dr(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=iu().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var Pu=function(){function e(){Ne(this,e)}return De(e,[{key:"load",value:function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Tu(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Ru="recaptcha",Ou={theme:"light",type:"image"},Lu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Ou),r=arguments.length>2?arguments[2]:void 0;Ne(this,e),this.parameters=n,this.type=Ru,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ji(r),this.isInvisible="invisible"===this.parameters.size,yr("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;yr(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Pu:new Du,this.validateStartingState()}return De(e,[{key:"verify",value:function(){var e=be(ke().mark((function e(){var t,n,r,i=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){yr(!this.parameters.sitekey,this.auth,"argument-error"),yr(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),yr("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=iu()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){yr(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=be(ke().mark((function e(){var t,n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=be(ke().mark((function e(){var t;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yr(br()&&!ou(),this.auth,"internal-error"),e.next=3,Mu();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Ei(this.auth);case 8:yr(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return yr(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Mu(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Fu=function(){function e(t,n){Ne(this,e),this.verificationId=t,this.onConfirmation=n}return De(e,[{key:"confirm",value:function(e){var t=_a._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function Uu(){return Uu=be(ke().mark((function e(t,n,r){var i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ji(t),e.next=3,Bu(i,n,mt(r));case 3:return a=e.sent,e.abrupt("return",new Fu(a,(function(e){return Za(i,e)})));case 5:case"end":return e.stop()}}),e)}))),Uu.apply(this,arguments)}function ju(e,t,n){return Vu.apply(this,arguments)}function Vu(){return(Vu=be(ke().mark((function e(t,n,r){var i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=mt(t),e.next=3,Ha(!1,i,"phone");case 3:return e.next=5,Bu(i.auth,n,mt(r));case 5:return a=e.sent,e.abrupt("return",new Fu(a,(function(e){return to(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zu(){return(zu=be(ke().mark((function e(t,n,r){var i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=mt(t),e.next=3,Bu(i.auth,n,mt(r));case 3:return a=e.sent,e.abrupt("return",new Fu(a,(function(e){return ro(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bu(e,t,n){return qu.apply(this,arguments)}function qu(){return qu=be(ke().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,yr("string"===typeof a,t,"argument-error"),yr(r.type===Ru,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return yr("enroll"===u.type,t,"internal-error"),e.next=13,Bo(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return yr("signin"===u.type,t,"internal-error"),yr(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Iu(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,ya(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),qu.apply(this,arguments)}function Gu(){return(Gu=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ka(mt(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ku=function(){function e(t){Ne(this,e),this.providerId=e.PROVIDER_ID,this.auth=ji(t)}return De(e,[{key:"verifyPhoneNumber",value:function(e,t){return Bu(this.auth,e,mt(t))}}],[{key:"credential",value:function(e,t){return _a._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?_a._fromTokenResponse(n,r):null}}]),e}();function Wu(e,t){return t?ci(t):(yr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Ku.PROVIDER_ID="phone",Ku.PHONE_SIGN_IN_METHOD="phone";var Hu=function(e){Oe(n,e);var t=Fe(n);function n(e){var r;return Ne(this,n),(r=t.call(this,"custom","custom")).params=e,r}return De(n,[{key:"_getIdTokenResponse",value:function(e){return pa(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return pa(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return pa(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Gi);function Qu(e){return Xa(e.auth,new Hu(e),e.bypassAuthState)}function Yu(e){var t=e.auth,n=e.user;return yr(n,t,"internal-error"),Ya(n,new Hu(e),e.bypassAuthState)}function $u(e){return Xu.apply(this,arguments)}function Xu(){return Xu=be(ke().mark((function e(t){var n,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,yr(r=t.user,n,"internal-error"),e.abrupt("return",Ka(r,new Hu(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),Xu.apply(this,arguments)}var Ju=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Ne(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return De(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=be(ke().mark((function t(n,r){return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=be(ke().mark((function e(t){var n,r,i,a,o,u,s;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Qu;case"linkViaPopup":case"linkViaRedirect":return $u;case"reauthViaPopup":case"reauthViaRedirect":return Yu;default:hr(this.auth,"internal-error")}}},{key:"resolve",value:function(e){kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Zu=new _r(2e3,1e4);function es(e,t,n){return ts.apply(this,arguments)}function ts(){return ts=be(ke().mark((function e(t,n,r){var i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ji(t),vr(t,n,Sa),a=Wu(i,r),o=new as(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),ts.apply(this,arguments)}function ns(){return(ns=be(ke().mark((function e(t,n,r){var i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vr((i=mt(t)).auth,n,Sa),a=Wu(i.auth,r),o=new as(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rs(e,t,n){return is.apply(this,arguments)}function is(){return(is=be(ke().mark((function e(t,n,r){var i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vr((i=mt(t)).auth,n,Sa),a=Wu(i.auth,r),o=new as(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var as=function(e){Oe(n,e);var t=Fe(n);function n(e,r,i,a,o){var u;return Ne(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=Re(u),u}return De(n,[{key:"executeNotNull",value:function(){var e=be(ke().mark((function e(){var t;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return yr(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=be(ke().mark((function e(){var t,n=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return kr(1===this.filter.length,"Popup operations only handle one event"),t=nu(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(dr(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(dr(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(dr(e.auth,"popup-closed-by-user"))}),8e3):e.pollId=window.setTimeout(t,Zu.get())}()}}]),n}(Ju);as.currentPopupAction=null;var os="pendingRedirect",us=new Map,ss=function(e){Oe(n,e);var t=Fe(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Ne(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return De(n,[{key:"execute",value:function(){var e=be(ke().mark((function e(){var t,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=us.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,cs(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Yn(Le(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:us.set(this.auth._key(),t);case 21:return this.bypassAuthState||us.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=be(ke().mark((function e(t){var r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Yn(Le(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Yn(Le(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Ju);function cs(e,t){return ls.apply(this,arguments)}function ls(){return ls=be(ke().mark((function e(t,n){var r,i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vs(n),i=ps(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),ls.apply(this,arguments)}function fs(e,t){return hs.apply(this,arguments)}function hs(){return hs=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ps(t)._set(vs(n),"true"));case 1:case"end":return e.stop()}}),e)}))),hs.apply(this,arguments)}function ds(e,t){us.set(e._key(),t)}function ps(e){return ci(e._redirectPersistence)}function vs(e){return hi(os,e.config.apiKey,e.name)}function ms(e,t,n){return function(e,t,n){return ys.apply(this,arguments)}(e,t,n)}function ys(){return ys=be(ke().mark((function e(t,n,r){var i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ji(t),vr(t,n,Sa),e.next=4,i._initializationPromise;case 4:return a=Wu(i,r),e.next=7,fs(a,i);case 7:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)}))),ys.apply(this,arguments)}function gs(e,t,n){return function(e,t,n){return ks.apply(this,arguments)}(e,t,n)}function ks(){return(ks=be(ke().mark((function e(t,n,r){var i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vr((i=mt(t)).auth,n,Sa),e.next=4,i.auth._initializationPromise;case 4:return a=Wu(i.auth,r),e.next=7,fs(a,i.auth);case 7:return e.next=9,Ss(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ws(e,t,n){return function(e,t,n){return bs.apply(this,arguments)}(e,t,n)}function bs(){return(bs=be(ke().mark((function e(t,n,r){var i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vr((i=mt(t)).auth,n,Sa),e.next=4,i.auth._initializationPromise;case 4:return a=Wu(i.auth,r),e.next=7,Ha(!1,i,n.providerId);case 7:return e.next=9,fs(a,i.auth);case 9:return e.next=11,Ss(i);case 11:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xs(e,t){return _s.apply(this,arguments)}function _s(){return _s=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ji(t)._initializationPromise;case 2:return e.abrupt("return",Is(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),_s.apply(this,arguments)}function Is(e,t){return Es.apply(this,arguments)}function Es(){return Es=be(ke().mark((function e(t,n){var r,i,a,o,u,s=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=ji(t),a=Wu(i,n),o=new ss(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),Es.apply(this,arguments)}function Ss(e){return Ts.apply(this,arguments)}function Ts(){return(Ts=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=nu("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Cs=function(){function e(t){Ne(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return De(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return As(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!As(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(dr(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ns(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Ns(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Ns(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function As(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Ds(e){return Ps.apply(this,arguments)}function Ps(){return Ps=be(ke().mark((function e(t){var n,r=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Nr(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Ps.apply(this,arguments)}var Rs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Os=/^https?/;function Ls(){return Ls=be(ke().mark((function e(t){var n,r,i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Ds(t);case 4:n=e.sent,r=n.authorizedDomains,i=Pe(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Ms(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:hr(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),Ls.apply(this,arguments)}function Ms(e){var t=wr(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Os.test(r))return!1;if(Rs.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Fs=new _r(3e4,6e4);function Us(){var e=iu().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=gt(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var js=null;function Vs(e){return js=js||function(e){return new Promise((function(t,n){var r,i,a;function o(){Us(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Us(),n(dr(e,"network-request-failed"))},timeout:Fs.get()})}if(null===(i=null===(r=iu().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=iu().gapi)||void 0===a?void 0:a.load)){var u=Ri("iframefcb");return iu()[u]=function(){gapi.load?o():n(dr(e,"network-request-failed"))},Pi("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw js=null,e}))}(e),js}var zs=new _r(5e3,15e3),Bs="__/auth/iframe",qs="emulator/auth/iframe",Gs={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ks=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ws(e){var t=e.config;yr(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Ir(t,qs):"https://".concat(e.config.authDomain,"/").concat(Bs),r={apiKey:t.apiKey,appName:e.name,v:mn},i=Ks.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(lt(r).slice(1))}function Hs(e){return Qs.apply(this,arguments)}function Qs(){return Qs=be(ke().mark((function e(t){var n,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vs(t);case 2:return n=e.sent,yr(r=iu().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Ws(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Gs,dontclear:!0},(function(e){return new Promise(function(){var n=be(ke().mark((function n(r,i){var a,o,u;return ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){iu().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=dr(t,"network-request-failed"),o=iu().setTimeout((function(){i(a)}),zs.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Qs.apply(this,arguments)}var Ys={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$s=function(){function e(t){Ne(this,e),this.window=t,this.associatedEvent=null}return De(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Xs(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},Ys),{width:r.toString(),height:i.toString(),top:a,left:o}),c=Xe().toLowerCase();n&&(u=yi(c)?"_blank":n),vi(c)&&(t=t||"http://localhost",s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=Se(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return xi(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==u)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new $s(null);var f=window.open(t||"",u,l);yr(f,e,"popup-blocked");try{f.focus()}catch(h){}return new $s(f)}var Js="__/auth/handler",Zs="emulator/auth/handler",ec=encodeURIComponent("fac");function tc(e,t,n,r,i,a){return nc.apply(this,arguments)}function nc(){return nc=be(ke().mark((function e(t,n,r,i,a,o){var u,s,c,l,f,h,d,p,v,m,y,g,k;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(yr(t.config.authDomain,t,"auth-domain-config-required"),yr(t.config.apiKey,t,"invalid-api-key"),u={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:mn,eventId:a},n instanceof Sa)for(n.setDefaultLanguage(t.languageCode),u.providerId=n.providerId||"",ut(n.getCustomParameters())||(u.customParameters=JSON.stringify(n.getCustomParameters())),s=0,c=Object.entries(o||{});s<c.length;s++)l=Se(c[s],2),f=l[0],h=l[1],u[f]=h;for(n instanceof Ta&&(d=n.getScopes().filter((function(e){return""!==e}))).length>0&&(u.scopes=d.join(",")),t.tenantId&&(u.tid=t.tenantId),p=u,v=0,m=Object.keys(p);v<m.length;v++)y=m[v],void 0===p[y]&&delete p[y];return e.next=10,t._getAppCheckToken();case 10:return g=e.sent,k=g?"#".concat(ec,"=").concat(encodeURIComponent(g)):"",e.abrupt("return","".concat(rc(t),"?").concat(lt(p).slice(1)).concat(k));case 13:case"end":return e.stop()}}),e)}))),nc.apply(this,arguments)}function rc(e){var t=e.config;return t.emulator?Ir(t,Zs):"https://".concat(t.authDomain,"/").concat(Js)}var ic="webStorageSupport",ac=function(){function e(){Ne(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zo,this._completeRedirectFn=Is,this._overrideRedirectResult=ds}return De(e,[{key:"_openPopup",value:function(){var e=be(ke().mark((function e(t,n,r,i){var a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return kr(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),e.next=3,tc(t,n,r,wr(),i);case 3:return o=e.sent,e.abrupt("return",Xs(t,o,nu()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=be(ke().mark((function e(t,n,r,i){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return e.next=4,tc(t,n,r,wr(),i);case 4:return au(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(kr(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=be(ke().mark((function e(t){var n,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hs(t);case 2:return n=e.sent,r=new Cs(t),n.register("authEvent",(function(e){return yr(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(ic,{type:ic},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[ic];void 0!==i&&t(!!i),hr(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Ls.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return _i()||mi()||xi()}}]),e}(),oc=ac,uc=function(){function e(t){Ne(this,e),this.factorId=t}return De(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return gr("unexpected MultiFactorSessionType")}}}]),e}(),sc=function(e){Oe(n,e);var t=Fe(n);function n(e){var r;return Ne(this,n),(r=t.call(this,"phone")).credential=e,r}return De(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Nr(e,"POST","/v2/accounts/mfaEnrollment:finalize",Cr(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Nr(e,"POST","/v2/accounts/mfaSignIn:finalize",Cr(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(uc),cc=function(){function e(){Ne(this,e)}return De(e,null,[{key:"assertion",value:function(e){return sc._fromCredential(e)}}]),e}();cc.FACTOR_ID="phone";var lc=function(){function e(){Ne(this,e)}return De(e,null,[{key:"assertionForEnrollment",value:function(e,t){return fc._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return fc._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=be(ke().mark((function e(t){var n,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yr("undefined"!==typeof(n=t).auth,"internal-error"),e.next=4,qo(n.auth,{idToken:n.credential,totpEnrollmentInfo:{}});case 4:return r=e.sent,e.abrupt("return",hc._fromStartTotpMfaEnrollmentResponse(r,n.auth));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();lc.FACTOR_ID="totp";var fc=function(e){Oe(n,e);var t=Fe(n);function n(e,r,i){var a;return Ne(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return De(n,[{key:"_finalizeEnroll",value:function(){var e=be(ke().mark((function e(t,n,r){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yr("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",Go(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=be(ke().mark((function e(t,n){var r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yr(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",Eu(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(uc),hc=function(){function e(t,n,r,i,a,o,u){Ne(this,e),this.sessionInfo=o,this.auth=u,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return De(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(dc(e)||dc(t))&&(r=!0),r&&(dc(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),dc(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function dc(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var pc="@firebase/auth",vc="0.23.2",mc=function(){function e(t){Ne(this,e),this.auth=t,this.internalListeners=new Map}return De(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){yr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var yc;!function(e){var t;null===(t=Qe())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function gc(){return window}yc="Browser",cn(new kt("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,u=o.apiKey,s=o.authDomain;yr(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});var c={apiKey:u,authDomain:s,clientPlatform:yc,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ii(yc)},l=new Ui(r,i,a,c);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ci);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),cn(new kt("auth-internal",(function(e){return function(e){return new mc(e)}(ji(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),xn(pc,vc,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(yc)),xn(pc,vc,"esm2017");var kc=2e3;function wc(e,t,n){return bc.apply(this,arguments)}function bc(){return bc=be(ke().mark((function e(t,n,r){var i,a,o,u,s;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=gc(),o=a.BuildInfo,kr(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Tc(n.sessionId);case 4:return u=e.sent,s={},xi()?s.ibi=o.packageName:ki()?s.apn=o.packageName:hr(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",tc(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),bc.apply(this,arguments)}function xc(){return xc=be(ke().mark((function e(t){var n,r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=gc(),r=n.BuildInfo,i={},xi()?i.iosBundleId=r.packageName:ki()?i.androidPackageName=r.packageName:hr(t,"operation-not-supported-in-this-environment"),e.next=5,Ds(t,i);case 5:case"end":return e.stop()}}),e)}))),xc.apply(this,arguments)}function _c(e){var t=gc().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Ic(e,t,n){return Ec.apply(this,arguments)}function Ec(){return Ec=be(ke().mark((function e(t,n,r){var i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=gc(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(dr(t,"redirect-cancelled-by-user"))}),kc))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),ki()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Ec.apply(this,arguments)}function Sc(e){var t,n,r,i,a,o,u,s,c,l,f=gc();yr("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),yr("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),yr("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),yr("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),yr("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Tc(e){return Cc.apply(this,arguments)}function Cc(){return(Cc=be(ke().mark((function e(t){var n,r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Nc(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nc(e){if(kr(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Ac=20,Dc=function(e){Oe(n,e);var t=Fe(n);function n(){var e;return Ne(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return De(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Yn(Le(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Cs);function Pc(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:Fc(),postBody:null,tenantId:e.tenantId,error:dr(e,"no-auth-event")}}function Rc(e,t){return Uc()._set(jc(e),t)}function Oc(e){return Lc.apply(this,arguments)}function Lc(){return Lc=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Uc()._get(jc(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Uc()._remove(jc(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),Lc.apply(this,arguments)}function Mc(e,t){var n,r,i=function(e){var t=Vc(e),n=t.link?decodeURIComponent(t.link):void 0,r=Vc(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Vc(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=Vc(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?dr(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Fc(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<Ac;n++){var r=Math.floor(62*Math.random());e.push(t.charAt(r))}return e.join("")}function Uc(){return ci(Xo)}function jc(e){return hi("authEvent",e.config.apiKey,e.name)}function Vc(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=xe(t=n)||yt(t)||Ie(t)||Ee();r[0];return ft(r.slice(1).join("?"))}var zc=function(){function e(){Ne(this,e),this._redirectPersistence=Zo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Is,this._overrideRedirectResult=ds}return De(e,[{key:"_initialize",value:function(){var e=be(ke().mark((function e(t){var n,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Dc(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){hr(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=be(ke().mark((function e(t,n,r,i){var a,o,u,s;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Sc(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),us.clear(),e.next=10,this._originValidation(t);case 10:return o=Pc(t,r,i),e.next=13,Rc(t,o);case 13:return e.next=15,wc(t,o,n);case 15:return u=e.sent,e.next=18,_c(u);case 18:return s=e.sent,e.abrupt("return",Ic(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return xc.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=gc(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(be(ke().mark((function n(){return ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Oc(e);case 2:t.onEvent(qc());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=be(ke().mark((function n(r){var i,a;return ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,Oc(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=Mc(i,r.url)),t.onEvent(a||qc());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");gc().handleOpenURL=function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),Bc=zc;function qc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:dr("no-auth-event")}}var Gc=1e3;function Kc(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Wc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return!("file:"!==Kc()&&"ionic:"!==Kc()&&"capacitor:"!==Kc()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Hc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return tt()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/Edge\/\d+/.test(e)}(e)}function Qc(){try{var e=self.localStorage,t=nu();if(e)return e.setItem(t,"1"),e.removeItem(t),!Hc()||nt()}catch(n){return Yc()&&nt()}return!1}function Yc(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function $c(){return("http:"===Kc()||"https:"===Kc()||Ze()||Wc())&&!(et()||Je())&&Qc()&&!Yc()}function Xc(){return Wc()&&"undefined"!==typeof document}function Jc(){return Zc.apply(this,arguments)}function Zc(){return(Zc=be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Xc()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),Gc);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var el={LOCAL:"local",NONE:"none",SESSION:"session"},tl=yr,nl="persistence";function rl(e,t){tl(Object.values(el).includes(t),e,"invalid-persistence-type"),et()?tl(t!==el.SESSION,e,"unsupported-persistence-type"):Je()?tl(t===el.NONE,e,"unsupported-persistence-type"):Yc()?tl(t===el.NONE||t===el.LOCAL&&nt(),e,"unsupported-persistence-type"):tl(t===el.NONE||Qc(),e,"unsupported-persistence-type")}function il(e){return al.apply(this,arguments)}function al(){return al=be(ke().mark((function e(t){var n,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=ol(),r=hi(nl,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),al.apply(this,arguments)}function ol(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var ul=yr,sl=function(){function e(){Ne(this,e),this.browserResolver=ci(oc),this.cordovaResolver=ci(Bc),this.underlyingResolver=null,this._redirectPersistence=Zo,this._completeRedirectFn=Is,this._overrideRedirectResult=ds}return De(e,[{key:"_initialize",value:function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=be(ke().mark((function e(t,n,r,i){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=be(ke().mark((function e(t,n,r,i){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Xc()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return ul(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=be(ke().mark((function e(){var t;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Jc();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function cl(e){return e.unwrap()}function ll(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new vl(e,function(e,t){var n,r=mt(e),i=t;return yr(t.customData.operationType,r,"argument-error"),yr(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),zo._fromError(r,i)}(e,t));else if(r){var i=fl(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function fl(e){var t=(e instanceof rt?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof rt)&&"temporaryProof"in t&&"phoneNumber"in t)return Ku.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Jn.PASSWORD)return null;switch(r){case Jn.GOOGLE:n=Aa;break;case Jn.FACEBOOK:n=Na;break;case Jn.GITHUB:n=Da;break;case Jn.TWITTER:n=Oa;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Pa._create(r,u):ma._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Ca(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof rt?n.credentialFromError(e):n.credentialFromResult(e)}function hl(e,t){return t.catch((function(t){throw t instanceof rt&&ll(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,fl(t)),additionalUserInfo:jo(e),user:ml.getOrCreate(r)}}))}function dl(e,t){return pl.apply(this,arguments)}function pl(){return pl=be(ke().mark((function e(t,n){var r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return hl(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),pl.apply(this,arguments)}var vl=function(){function e(t,n){Ne(this,e),this.resolver=n,this.auth=t.wrapped()}return De(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return hl(cl(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),ml=function(){function e(t){Ne(this,e),this._delegate=t,this.multiFactor=function(e){var t=mt(e);return Ho.has(t)||Ho.set(t,Wo._fromUser(t)),Ho.get(t)}(t)}return De(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hl(this.auth,to(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dl(this.auth,ju(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hl(this.auth,rs(this._delegate,t,sl)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,il(ji(this.auth));case 2:return e.abrupt("return",ws(this._delegate,t,sl));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hl(this.auth,ro(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return dl(this.auth,function(e,t,n){return zu.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return hl(this.auth,function(e,t,n){return ns.apply(this,arguments)}(this._delegate,e,sl))}},{key:"reauthenticateWithRedirect",value:function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,il(ji(this.auth));case 2:return e.abrupt("return",gs(this._delegate,t,sl));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return So.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qa(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Do(mt(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Do(mt(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return Gu.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Ao.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return To.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();ml.USER_MAP=new WeakMap;var yl=yr,gl=function(){function e(t,n){if(Ne(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;yl(r,"invalid-api-key",{appName:t.name}),yl(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?sl:void 0;this._delegate=n.initialize({options:{persistence:wl(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(or),this.linkUnderlyingAuth()}return De(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?ml.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){zi(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return vo.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return mo(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return po.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hl(this._delegate,ko(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Eo.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Ia.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=be(ke().mark((function e(){var t;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yl($c(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,xs(this._delegate,sl);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",hl(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){ji(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=kl(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=kl(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return bo.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return ho.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=be(ke().mark((function e(t){var n,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:rl(this._delegate,t),e.t0=t,e.next=e.t0===el.SESSION?4:e.t0===el.LOCAL?6:e.t0===el.NONE?11:13;break;case 4:return n=Zo,e.abrupt("break",14);case 6:return e.next=8,ci(_u)._isAvailable();case 8:return r=e.sent,n=r?_u:Xo,e.abrupt("break",14);case 11:return n=fi,e.abrupt("break",14);case 13:return e.abrupt("return",hr("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return hl(this._delegate,function(e){return ja.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return hl(this._delegate,Za(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return hl(this._delegate,function(e,t){return uo.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return hl(this._delegate,function(e,t,n){return Za(mt(e),Ea.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return hl(this._delegate,function(e,t,n){return xo.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return dl(this._delegate,function(e,t,n){return Uu.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yl($c(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",hl(this._delegate,es(this._delegate,t,sl)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yl($c(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,il(this._delegate);case 3:return e.abrupt("return",ms(this._delegate,t,sl));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return go.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function kl(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&ml.getOrCreate(e))},error:t,complete:n}}function wl(e,t){var n=function(e,t){var n=ol();if(!n)return[];var r=hi(nl,e,t);switch(n.getItem(r)){case el.NONE:return[fi];case el.LOCAL:return[_u,Zo];case el.SESSION:return[Zo];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(_u)||n.push(_u),"undefined"!==typeof window)for(var r=0,i=[Xo,Zo];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(fi)||n.push(fi),n}gl.Persistence=el;var bl=function(){function e(){Ne(this,e),this.providerId="phone",this._delegate=new Ku(cl(Qn.auth()))}return De(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Ku.credential(e,t)}}]),e}();bl.PHONE_SIGN_IN_METHOD=Ku.PHONE_SIGN_IN_METHOD,bl.PROVIDER_ID=Ku.PROVIDER_ID;var xl,_l=yr,Il=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qn.app();Ne(this,e),_l(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Lu(t,n,i.auth()),this.type=this._delegate.type}return De(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(xl=Qn).INTERNAL.registerComponent(new kt("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new gl(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Zn,PASSWORD_RESET:er,RECOVER_EMAIL:tr,REVERT_SECOND_FACTOR_ADDITION:nr,VERIFY_AND_CHANGE_EMAIL:rr,VERIFY_EMAIL:ir}},EmailAuthProvider:Ea,FacebookAuthProvider:Na,GithubAuthProvider:Da,GoogleAuthProvider:Aa,OAuthProvider:Ca,SAMLAuthProvider:Ra,PhoneAuthProvider:bl,PhoneMultiFactorGenerator:cc,RecaptchaVerifier:Il,TwitterAuthProvider:Oa,Auth:gl,AuthCredential:Gi,Error:rt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),xl.registerVersion("@firebase/auth-compat","0.4.2");var El,Sl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Tl={},Cl=Cl||{},Nl=Sl||self;function Al(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Dl(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Pl="closure_uid_"+(1e9*Math.random()>>>0),Rl=0;function Ol(e,t,n){return e.call.apply(e.bind,arguments)}function Ll(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Ml(e,t,n){return(Ml=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ol:Ll).apply(null,arguments)}function Fl(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Ul(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function jl(){this.s=this.s,this.o=this.o}jl.prototype.s=!1,jl.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Pl)&&e[Pl]||(e[Pl]=++Rl))},jl.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Vl=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function zl(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Bl(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Al(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function ql(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}ql.prototype.h=function(){this.defaultPrevented=!0};var Gl=function(){if(!Nl.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Nl.addEventListener("test",(function(){}),t),Nl.removeEventListener("test",(function(){}),t)}catch(n){}return e}();function Kl(e){return/^[\s\xa0]*$/.test(e)}function Wl(){var e=Nl.navigator;return e&&(e=e.userAgent)?e:""}function Hl(e){return-1!=Wl().indexOf(e)}function Ql(e){return Ql[" "](e),e}Ql[" "]=function(){};var Yl,$l,Xl=Hl("Opera"),Jl=Hl("Trident")||Hl("MSIE"),Zl=Hl("Edge"),ef=Zl||Jl,tf=Hl("Gecko")&&!(-1!=Wl().toLowerCase().indexOf("webkit")&&!Hl("Edge"))&&!(Hl("Trident")||Hl("MSIE"))&&!Hl("Edge"),nf=-1!=Wl().toLowerCase().indexOf("webkit")&&!Hl("Edge");function rf(){var e=Nl.document;return e?e.documentMode:void 0}e:{var af="",of=function(){var e=Wl();return tf?/rv:([^\);]+)(\)|;)/.exec(e):Zl?/Edge\/([\d\.]+)/.exec(e):Jl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):nf?/WebKit\/(\S+)/.exec(e):Xl?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(of&&(af=of?of[1]:""),Jl){var uf=rf();if(null!=uf&&uf>parseFloat(af)){Yl=String(uf);break e}}Yl=af}if(Nl.document&&Jl){var sf=rf();$l=sf||(parseInt(Yl,10)||void 0)}else $l=void 0;var cf=$l;function lf(e,t){if(ql.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(tf){e:{try{Ql(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:ff[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&lf.$.h.call(this)}}Ul(lf,ql);var ff={2:"touch",3:"pen",4:"mouse"};lf.prototype.h=function(){lf.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var hf="closure_listenable_"+(1e6*Math.random()|0),df=0;function pf(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++df,this.fa=this.ia=!1}function vf(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function mf(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function yf(e){var t={};for(var n in e)t[n]=e[n];return t}var gf="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function kf(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<gf.length;a++)n=gf[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function wf(e){this.src=e,this.g={},this.h=0}function bf(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Vl(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(vf(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function xf(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}wf.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=xf(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new pf(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var _f="closure_lm_"+(1e6*Math.random()|0),If={};function Ef(e,t,n,r,i){if(r&&r.once)return Tf(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Ef(e,t[a],n,r,i);return null}return n=Of(n),e&&e[hf]?e.O(t,n,Dl(r)?!!r.capture:!!r,i):Sf(e,t,n,!1,r,i)}function Sf(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Dl(i)?!!i.capture:!!i,u=Pf(e);if(u||(e[_f]=u=new wf(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Df;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Gl||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Af(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Tf(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Tf(e,t[a],n,r,i);return null}return n=Of(n),e&&e[hf]?e.P(t,n,Dl(r)?!!r.capture:!!r,i):Sf(e,t,n,!0,r,i)}function Cf(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Cf(e,t[a],n,r,i);else r=Dl(r)?!!r.capture:!!r,n=Of(n),e&&e[hf]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=xf(a=e.g[t],n,r,i))&&(vf(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Pf(e))&&(t=e.g[t.toString()],e=-1,t&&(e=xf(t,n,r,i)),(n=-1<e?t[e]:null)&&Nf(n))}function Nf(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[hf])bf(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Af(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Pf(t))?(bf(n,e),0==n.h&&(n.src=null,t[_f]=null)):vf(e)}}}function Af(e){return e in If?If[e]:If[e]="on"+e}function Df(e,t){if(e.fa)e=!0;else{t=new lf(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Nf(e),e=n.call(r,t)}return e}function Pf(e){return(e=e[_f])instanceof wf?e:null}var Rf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Of(e){return"function"===typeof e?e:(e[Rf]||(e[Rf]=function(t){return e.handleEvent(t)}),e[Rf])}function Lf(){jl.call(this),this.i=new wf(this),this.S=this,this.J=null}function Mf(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new ql(t,e);else if(t instanceof ql)t.target=t.target||e;else{var i=t;kf(t=new ql(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Ff(o,r,!0,t)&&i}if(i=Ff(o=t.g=e,r,!0,t)&&i,i=Ff(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Ff(o=t.g=n[a],r,!1,t)&&i}function Ff(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var u=o.listener,s=o.la||o.src;o.ia&&bf(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Ul(Lf,jl),Lf.prototype[hf]=!0,Lf.prototype.removeEventListener=function(e,t,n,r){Cf(this,e,t,n,r)},Lf.prototype.N=function(){if(Lf.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)vf(n[r]);delete t.g[e],t.h--}}this.J=null},Lf.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Lf.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Uf=Nl.JSON.stringify,jf=function(){function e(t,n){Ne(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return De(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}();function Vf(){var e=Qf,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var zf=function(){function e(){Ne(this,e),this.h=this.g=null}return De(e,[{key:"add",value:function(e,t){var n=Bf.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Bf=new jf((function(){return new qf}),(function(e){return e.reset()})),qf=function(){function e(){Ne(this,e),this.next=this.g=this.h=null}return De(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Gf(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Kf(e){Nl.setTimeout((function(){throw e}),0)}var Wf,Hf=!1,Qf=new zf,Yf=function(){var e=Nl.Promise.resolve(void 0);Wf=function(){e.then($f)}},$f=function(){for(var e;e=Vf();){try{e.h.call(e.g)}catch(n){Kf(n)}var t=Bf;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Hf=!1};function Xf(e,t){Lf.call(this),this.h=e||1,this.g=t||Nl,this.j=Ml(this.qb,this),this.l=Date.now()}function Jf(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Zf(e,t,n){if("function"===typeof e)n&&(e=Ml(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Ml(e.handleEvent,e)}return 2147483647<Number(t)?-1:Nl.setTimeout(e,t||0)}function eh(e){e.g=Zf((function(){e.g=null,e.i&&(e.i=!1,eh(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Ul(Xf,Lf),(El=Xf.prototype).ga=!1,El.T=null,El.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Mf(this,"tick"),this.ga&&(Jf(this),this.start()))}},El.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},El.N=function(){Xf.$.N.call(this),Jf(this),delete this.g};var th=function(e){Oe(n,e);var t=Fe(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return De(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:eh(this)}},{key:"N",value:function(){Yn(Le(n.prototype),"N",this).call(this),this.g&&(Nl.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(jl);function nh(e){jl.call(this),this.h=e,this.g={}}Ul(nh,jl);var rh=[];function ih(e,t,n,r){Array.isArray(n)||(n&&(rh[0]=n.toString()),n=rh);for(var i=0;i<n.length;i++){var a=Ef(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function ah(e){mf(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Nf(e)}),e),e.g={}}function oh(){this.g=!0}function uh(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Uf(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}nh.prototype.N=function(){nh.$.N.call(this),ah(this)},nh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},oh.prototype.Ea=function(){this.g=!1},oh.prototype.info=function(){};var sh={},ch=null;function lh(){return ch=ch||new Lf}function fh(e){ql.call(this,sh.Ta,e)}function hh(e){var t=lh();Mf(t,new fh(t))}function dh(e,t){ql.call(this,sh.STAT_EVENT,e),this.stat=t}function ph(e){var t=lh();Mf(t,new dh(t,e))}function vh(e,t){ql.call(this,sh.Ua,e),this.size=t}function mh(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Nl.setTimeout((function(){e()}),t)}sh.Ta="serverreachability",Ul(fh,ql),sh.STAT_EVENT="statevent",Ul(dh,ql),sh.Ua="timingevent",Ul(vh,ql);var yh={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},gh={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function kh(){}function wh(e){return e.h||(e.h=e.i())}function bh(){}kh.prototype.h=null;var xh,_h={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Ih(){ql.call(this,"d")}function Eh(){ql.call(this,"c")}function Sh(){}function Th(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new nh(this),this.P=Nh,e=ef?125:void 0,this.V=new Xf(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Ch}function Ch(){this.i=null,this.g="",this.h=!1}Ul(Ih,ql),Ul(Eh,ql),Ul(Sh,kh),Sh.prototype.g=function(){return new XMLHttpRequest},Sh.prototype.i=function(){return{}},xh=new Sh;var Nh=45e3,Ah={},Dh={};function Ph(e,t,n){e.L=1,e.v=Xh(Wh(t)),e.s=n,e.S=!0,Rh(e,null)}function Rh(e,t){e.G=Date.now(),Fh(e),e.A=Wh(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),ld(n.i,"t",r),e.C=0,n=e.l.J,e.h=new Ch,e.g=fp(e.l,n?t:null,!e.s),0<e.O&&(e.M=new th(Ml(e.Pa,e,e.g),e.O)),ih(e.U,e.g,"readystatechange",e.nb),t=e.I?yf(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),hh(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function Oh(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function Lh(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=Mh(e,n))==Dh){4==t&&(e.o=4,ph(14),i=!1),uh(e.j,e.m,null,"[Incomplete Response]");break}if(r==Ah){e.o=4,ph(15),uh(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}uh(e.j,e.m,r,null),Bh(e,r)}Oh(e)&&r!=Dh&&r!=Ah&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,ph(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),rp(t),t.M=!0,ph(11))):(uh(e.j,e.m,n,"[Invalid Chunked Response]"),zh(e),Vh(e))}function Mh(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Dh:(n=Number(t.substring(n,r)),isNaN(n)?Ah:(r+=1)+n>t.length?Dh:(t=t.slice(r,r+n),e.C=r+n,t))}function Fh(e){e.Y=Date.now()+e.P,Uh(e,e.P)}function Uh(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=mh(Ml(e.lb,e),t)}function jh(e){e.B&&(Nl.clearTimeout(e.B),e.B=null)}function Vh(e){0==e.l.H||e.J||op(e.l,e)}function zh(e){jh(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Jf(e.V),ah(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Bh(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||yd(n.i,e)))if(!e.K&&yd(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;ap(n),Yd(n)}np(n),ph(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=mh(Ml(n.ib,n),6e3));if(1>=md(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else sp(n,11)}else if((e.K||n.g==e)&&ap(n),!Kl(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var u=a[4];null!=u&&(n.Ga=u,n.l.info("SVER="+n.Ga));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(gd(f,f.h),f.h=null))}if(r.F){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.Da=h,$h(r.I,r.F,h))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=lp(r,r.J?r.pa:null,r.Y),d.K){kd(r.i,d);var p=d,v=r.L;v&&p.setTimeout(v),p.B&&(jh(p),Fh(p)),r.g=d}else tp(r);0<n.j.length&&Xd(n)}else"stop"!=a[0]&&"close"!=a[0]||sp(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?sp(n,7):Qd(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}hh()}catch(a){}}function qh(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Al(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Al(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Al(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(El=Th.prototype).setTimeout=function(e){this.P=e},El.nb=function(e){e=e.target;var t=this.M;t&&3==Bd(e)?t.l():this.Pa(e)},El.Pa=function(e){try{if(e==this.g)e:{var t=Bd(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||ef||this.g&&(this.h.h||this.g.ja()||qd(this.g)))){this.J||4!=t||7==n||hh(),jh(this);var r=this.g.da();this.ca=r;t:if(Oh(this)){var i=qd(this.g);e="";var a=i.length,o=4==Bd(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){zh(this),Vh(this);var u="";break t}this.h.i=new Nl.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Kl(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,ph(12),zh(this),Vh(this);break e}uh(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Bh(this,r)}this.S?(Lh(this,t,u),ef&&this.i&&3==t&&(ih(this.U,this.V,"tick",this.mb),this.V.start())):(uh(this.j,this.m,u,null),Bh(this,u)),4==t&&zh(this),this.i&&!this.J&&(4==t?op(this.l,this):(this.i=!1,Fh(this)))}else(function(e){var t={};e=(e.g&&2<=Bd(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!Kl(e[n])){var r=Gf(e[n]),i=r[0];if("string"===typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<u.indexOf("Unknown SID")?(this.o=3,ph(12)):(this.o=0,ph(13)),zh(this),Vh(this)}}}catch(t){}},El.mb=function(){if(this.g){var e=Bd(this.g),t=this.g.ja();this.C<t.length&&(jh(this),Lh(this,e,t),this.i&&4!=e&&Fh(this))}},El.cancel=function(){this.J=!0,zh(this)},El.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(hh(),ph(17)),zh(this),this.o=2,Vh(this)):Uh(this,this.Y-e)};var Gh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kh(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Kh){this.h=e.h,Hh(this,e.j),this.s=e.s,this.g=e.g,Qh(this,e.m),this.l=e.l;var t=e.i,n=new od;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Yh(this,n),this.o=e.o}else e&&(t=String(e).match(Gh))?(this.h=!1,Hh(this,t[1]||"",!0),this.s=Jh(t[2]||""),this.g=Jh(t[3]||"",!0),Qh(this,t[4]),this.l=Jh(t[5]||"",!0),Yh(this,t[6]||"",!0),this.o=Jh(t[7]||"")):(this.h=!1,this.i=new od(null,this.h))}function Wh(e){return new Kh(e)}function Hh(e,t,n){e.j=n?Jh(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Qh(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Yh(e,t,n){t instanceof od?(e.i=t,function(e,t){t&&!e.j&&(ud(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(sd(this,t),ld(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Zh(t,id)),e.i=new od(t,e.h))}function $h(e,t,n){e.i.set(t,n)}function Xh(e){return $h(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Jh(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Zh(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ed),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ed(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Kh.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Zh(t,td,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Zh(t,td,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Zh(n,"/"==n.charAt(0)?rd:nd,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Zh(n,ad)),e.join("")};var td=/[#\/\?@]/g,nd=/[#\?:]/g,rd=/[#\?]/g,id=/[#\?@]/g,ad=/#/g;function od(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ud(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function sd(e,t){ud(e),t=fd(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function cd(e,t){return ud(e),t=fd(e,t),e.g.has(t)}function ld(e,t,n){sd(e,t),0<n.length&&(e.i=null,e.g.set(fd(e,t),zl(n)),e.h+=n.length)}function fd(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(El=od.prototype).add=function(e,t){ud(this),this.i=null,e=fd(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},El.forEach=function(e,t){ud(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},El.ta=function(){ud(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},El.Z=function(e){ud(this);var t=[];if("string"===typeof e)cd(this,e)&&(t=t.concat(this.g.get(fd(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},El.set=function(e,t){return ud(this),this.i=null,cd(this,e=fd(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},El.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},El.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var hd=De((function e(t,n){Ne(this,e),this.g=t,this.map=n}));function dd(e){this.l=e||pd,Nl.PerformanceNavigationTiming?e=0<(e=Nl.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Nl.g&&Nl.g.Ka&&Nl.g.Ka()&&Nl.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var pd=10;function vd(e){return!!e.h||!!e.g&&e.g.size>=e.j}function md(e){return e.h?1:e.g?e.g.size:0}function yd(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function gd(e,t){e.g?e.g.add(t):e.h=t}function kd(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function wd(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=Pe(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return zl(e.i)}dd.prototype.cancel=function(){if(this.i=wd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=Pe(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var bd,xd=function(){function e(){Ne(this,e)}return De(e,[{key:"stringify",value:function(e){return Nl.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return Nl.JSON.parse(e,void 0)}}]),e}();function _d(){this.g=new xd}function Id(e,t,n){var r=n||"";try{qh(e,(function(e,n){var i=e;Dl(e)&&(i=Uf(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ed(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Sd(e){this.l=e.fc||null,this.j=e.ob||!1}function Td(e,t){Lf.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Cd,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ul(Sd,kh),Sd.prototype.g=function(){return new Td(this.l,this.j)},Sd.prototype.i=(bd={},function(){return bd}),Ul(Td,Lf);var Cd=0;function Nd(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Ad(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Dd(e)}function Dd(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(El=Td.prototype).open=function(e,t){if(this.readyState!=Cd)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Dd(this)},El.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Nl).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},El.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ad(this)),this.readyState=Cd},El.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Dd(this)),this.g&&(this.readyState=3,Dd(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Nl.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Nd(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},El.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ad(this):Dd(this),3==this.readyState&&Nd(this)}},El.Za=function(e){this.g&&(this.response=this.responseText=e,Ad(this))},El.Ya=function(e){this.g&&(this.response=e,Ad(this))},El.ka=function(){this.g&&Ad(this)},El.setRequestHeader=function(e,t){this.v.append(e,t)},El.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},El.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Td.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Pd=Nl.JSON.parse;function Rd(e){Lf.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Od,this.L=this.M=!1}Ul(Rd,Lf);var Od="",Ld=/^https?$/i,Md=["POST","PUT"];function Fd(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Ud(e),Vd(e)}function Ud(e){e.F||(e.F=!0,Mf(e,"complete"),Mf(e,"error"))}function jd(e){if(e.h&&"undefined"!=typeof Cl&&(!e.C[1]||4!=Bd(e)||2!=e.da()))if(e.v&&4==Bd(e))Zf(e.La,0,e);else if(Mf(e,"readystatechange"),4==Bd(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(Gh)[1]||null;!a&&Nl.self&&Nl.self.location&&(a=Nl.self.location.protocol.slice(0,-1)),i=!Ld.test(a?a.toLowerCase():"")}t=i}if(t)Mf(e,"complete"),Mf(e,"success");else{e.m=6;try{var o=2<Bd(e)?e.g.statusText:""}catch(u){o=""}e.j=o+" ["+e.da()+"]",Ud(e)}}finally{Vd(e)}}}function Vd(e,t){if(e.g){zd(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||Mf(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function zd(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Nl.clearTimeout(e.A),e.A=null)}function Bd(e){return e.g?e.g.readyState:0}function qd(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Od:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Qp){return null}}function Gd(e){var t="";return mf(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Kd(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Gd(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):$h(e,t,n))}function Wd(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Hd(e){this.Ga=0,this.j=[],this.l=new oh,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Wd("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Wd("baseRetryDelayMs",5e3,e),this.hb=Wd("retryDelaySeedMs",1e4,e),this.eb=Wd("forwardChannelMaxRetries",2,e),this.xa=Wd("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new dd(e&&e.concurrentRequestLimit),this.Ja=new _d,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Qd(e){if($d(e),3==e.H){var t=e.W++,n=Wh(e.I);if($h(n,"SID",e.K),$h(n,"RID",t),$h(n,"TYPE","terminate"),Zd(e,n),(t=new Th(e,e.l,t)).L=2,t.v=Xh(Wh(n)),n=!1,Nl.navigator&&Nl.navigator.sendBeacon)try{n=Nl.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&Nl.Image&&((new Image).src=t.v,n=!0),n||(t.g=fp(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Fh(t)}cp(e)}function Yd(e){e.g&&(rp(e),e.g.cancel(),e.g=null)}function $d(e){Yd(e),e.u&&(Nl.clearTimeout(e.u),e.u=null),ap(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Nl.clearTimeout(e.m),e.m=null)}function Xd(e){if(!vd(e.i)&&!e.m){e.m=!0;var t=e.Na;Wf||Yf(),Hf||(Wf(),Hf=!0),Qf.add(t,e),e.C=0}}function Jd(e,t){var n;n=t?t.m:e.W++;var r=Wh(e.I);$h(r,"SID",e.K),$h(r,"RID",n),$h(r,"AID",e.V),Zd(e,r),e.o&&e.s&&Kd(r,e.o,e.s),n=new Th(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=ep(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),gd(e.i,n),Ph(n,r,t)}function Zd(e,t){e.na&&mf(e.na,(function(e,n){$h(t,n,e)})),e.h&&qh({},(function(e,n){$h(t,n,e)}))}function ep(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Ml(e.h.Va,e.h,e):null;e:for(var i=e.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].g,l=i[s].map;if(0>(c-=a))a=Math.max(0,i[s].g-100),u=!1;else try{Id(l,o,"req"+c+"_")}catch(av){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.j.splice(0,n),t.F=e,r}function tp(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Wf||Yf(),Hf||(Wf(),Hf=!0),Qf.add(t,e),e.A=0}}function np(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=mh(Ml(e.Ma,e),up(e,e.A)),e.A++,!0)}function rp(e){null!=e.B&&(Nl.clearTimeout(e.B),e.B=null)}function ip(e){e.g=new Th(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Wh(e.wa);$h(t,"RID","rpc"),$h(t,"SID",e.K),$h(t,"AID",e.V),$h(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&$h(t,"TO",e.qa),$h(t,"TYPE","xmlhttp"),Zd(e,t),e.o&&e.s&&Kd(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=Xh(Wh(t)),n.s=null,n.S=!0,Rh(n,e)}function ap(e){null!=e.v&&(Nl.clearTimeout(e.v),e.v=null)}function op(e,t){var n=null;if(e.g==t){ap(e),rp(e),e.g=null;var r=2}else{if(!yd(e.i,t))return;n=t.F,kd(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;Mf(r=lh(),new vh(r,n)),Xd(e)}else tp(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(md(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=mh(Ml(e.Na,e,t),up(e,e.C)),e.C++,!0))}(e,t)||2==r&&np(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:sp(e,5);break;case 4:sp(e,10);break;case 3:sp(e,6);break;default:sp(e,2)}}function up(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function sp(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Ml(e.pb,e);n||(n=new Kh("//www.google.com/images/cleardot.gif"),Nl.location&&"http"==Nl.location.protocol||Hh(n,"https"),Xh(n)),function(e,t){var n=new oh;if(Nl.Image){var r=new Image;r.onload=Fl(Ed,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Fl(Ed,n,r,"TestLoadImage: error",!1,t),r.onabort=Fl(Ed,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Fl(Ed,n,r,"TestLoadImage: timeout",!1,t),Nl.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else ph(2);e.H=0,e.h&&e.h.za(t),cp(e),$d(e)}function cp(e){if(e.H=0,e.ma=[],e.h){var t=wd(e.i);0==t.length&&0==e.j.length||(Bl(e.ma,t),Bl(e.ma,e.j),e.i.i.length=0,zl(e.j),e.j.length=0),e.h.ya()}}function lp(e,t,n){var r=n instanceof Kh?Wh(n):new Kh(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Qh(r,r.m);else{var i=Nl.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new Kh(null);r&&Hh(a,r),t&&(a.g=t),i&&Qh(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&$h(r,n,t),$h(r,"VER",e.ra),Zd(e,r),r}function fp(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Rd(new Sd({ob:!0})):new Rd(e.va)).Oa(e.J),t}function hp(){}function dp(){if(Jl&&!(10<=Number(cf)))throw Error("Environmental error: no available transport.")}function pp(e,t){Lf.call(this),this.g=new Hd(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Kl(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Kl(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new yp(this)}function vp(e){Ih.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function mp(){Eh.call(this),this.status=1}function yp(e){this.g=e}function gp(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function kp(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function wp(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(El=Rd.prototype).Oa=function(e){this.M=e},El.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():xh.g(),this.C=this.u?wh(this.u):wh(xh),this.g.onreadystatechange=Ml(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(u){return void Fd(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=Pe(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(d){o.e(d)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Nl.FormData&&e instanceof Nl.FormData,!(0<=Vl(Md,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,c=Pe(n);try{for(c.s();!(s=c.n()).done;){var l=Se(s.value,2),f=l[0],h=l[1];this.g.setRequestHeader(f,h)}}catch(d){c.e(d)}finally{c.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{zd(this),0<this.B&&((this.L=function(e){return Jl&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ml(this.ua,this)):this.A=Zf(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){Fd(this,u)}},El.ua=function(){"undefined"!=typeof Cl&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Mf(this,"timeout"),this.abort(8))},El.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Mf(this,"complete"),Mf(this,"abort"),Vd(this))},El.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Vd(this,!0)),Rd.$.N.call(this)},El.La=function(){this.s||(this.G||this.v||this.l?jd(this):this.kb())},El.kb=function(){jd(this)},El.isActive=function(){return!!this.g},El.da=function(){try{return 2<Bd(this)?this.g.status:-1}catch(bd){return-1}},El.ja=function(){try{return this.g?this.g.responseText:""}catch(bd){return""}},El.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Pd(t)}},El.Ia=function(){return this.m},El.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(El=Hd.prototype).ra=8,El.H=1,El.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new Th(this,this.l,e),n=this.s;if(this.U&&(n?kf(n=yf(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.j.length;i++){var a=this.j[i];if(void 0===(a="__data__"in a.map&&"string"===typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.j.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=ep(this,t,r),$h(i=Wh(this.I),"RID",e),$h(i,"CVER",22),this.F&&$h(i,"X-HTTP-Session-Id",this.F),Zd(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(Gd(n)))+"&"+r:this.o&&Kd(i,this.o,n)),gd(this.i,t),this.bb&&$h(i,"TYPE","init"),this.P?($h(i,"$req",r),$h(i,"SID","null"),t.aa=!0,Ph(t,i,null)):Ph(t,i,r),this.H=2}}else 3==this.H&&(e?Jd(this,e):0==this.j.length||vd(this.i)||Jd(this))},El.Ma=function(){if(this.u=null,ip(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=mh(Ml(this.jb,this),e)}},El.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ph(10),Yd(this),ip(this))},El.ib=function(){null!=this.v&&(this.v=null,Yd(this),np(this),ph(19))},El.pb=function(e){e?(this.l.info("Successfully pinged google.com"),ph(2)):(this.l.info("Failed to ping google.com"),ph(1))},El.isActive=function(){return!!this.h&&this.h.isActive(this)},(El=hp.prototype).Ba=function(){},El.Aa=function(){},El.za=function(){},El.ya=function(){},El.isActive=function(){return!0},El.Va=function(){},dp.prototype.g=function(e,t){return new pp(e,t)},Ul(pp,Lf),pp.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;ph(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=lp(e,null,e.Y),Xd(e)},pp.prototype.close=function(){Qd(this.g)},pp.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Uf(e),e=n);t.j.push(new hd(t.fb++,e)),3==t.H&&Xd(t)},pp.prototype.N=function(){this.g.h=null,delete this.j,Qd(this.g),delete this.g,pp.$.N.call(this)},Ul(vp,Ih),Ul(mp,Eh),Ul(yp,hp),yp.prototype.Ba=function(){Mf(this.g,"a")},yp.prototype.Aa=function(e){Mf(this.g,new vp(e))},yp.prototype.za=function(e){Mf(this.g,new mp)},yp.prototype.ya=function(){Mf(this.g,"b")},Ul(gp,(function(){this.blockSize=-1})),gp.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},gp.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)kp(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){kp(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){kp(this,r),i=0;break}}this.h=i,this.i+=t},gp.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var bp={};function xp(e){return-128<=e&&128>e?function(e,t){var n=bp;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new wp([0|e],0>e?-1:0)})):new wp([0|e],0>e?-1:0)}function _p(e){if(isNaN(e)||!isFinite(e))return Ep;if(0>e)return Ap(_p(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Ip;return new wp(t,0)}var Ip=4294967296,Ep=xp(0),Sp=xp(1),Tp=xp(16777216);function Cp(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Np(e){return-1==e.h}function Ap(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new wp(n,~e.h).add(Sp)}function Dp(e,t){return e.add(Ap(t))}function Pp(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Rp(e,t){this.g=e,this.h=t}function Op(e,t){if(Cp(t))throw Error("division by zero");if(Cp(e))return new Rp(Ep,Ep);if(Np(e))return t=Op(Ap(e),t),new Rp(Ap(t.g),Ap(t.h));if(Np(t))return t=Op(e,Ap(t)),new Rp(Ap(t.g),t.h);if(30<e.g.length){if(Np(e)||Np(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Sp,r=t;0>=r.X(e);)n=Lp(n),r=Lp(r);var i=Mp(n,1),a=Mp(r,1);for(r=Mp(r,2),n=Mp(n,2);!Cp(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=Mp(r,1),n=Mp(n,1)}return t=Dp(e,i.R(t)),new Rp(i,t)}for(i=Ep;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=_p(n)).R(t);Np(o)||0<o.X(e);)o=(a=_p(n-=r)).R(t);Cp(a)&&(a=Sp),i=i.add(a),e=Dp(e,o)}return new Rp(i,e)}function Lp(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new wp(n,e.h)}function Mp(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new wp(i,e.h)}(El=wp.prototype).ea=function(){if(Np(this))return-Ap(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Ip+r)*t,t*=Ip}return e},El.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Cp(this))return"0";if(Np(this))return"-"+Ap(this).toString(e);for(var t=_p(Math.pow(e,6)),n=this,r="";;){var i=Op(n,t).g,a=((0<(n=Dp(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Cp(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},El.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},El.X=function(e){return Np(e=Dp(this,e))?-1:Cp(e)?0:1},El.abs=function(){return Np(this)?Ap(this):this},El.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new wp(n,-2147483648&n[n.length-1]?-1:0)},El.R=function(e){if(Cp(this)||Cp(e))return Ep;if(Np(this))return Np(e)?Ap(this).R(Ap(e)):Ap(Ap(this).R(e));if(Np(e))return Ap(this.R(Ap(e)));if(0>this.X(Tp)&&0>e.X(Tp))return _p(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),u=e.D(i)>>>16,s=65535&e.D(i);n[2*r+2*i]+=o*s,Pp(n,2*r+2*i),n[2*r+2*i+1]+=a*s,Pp(n,2*r+2*i+1),n[2*r+2*i+1]+=o*u,Pp(n,2*r+2*i+1),n[2*r+2*i+2]+=a*u,Pp(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new wp(n,0)},El.gb=function(e){return Op(this,e).h},El.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new wp(n,this.h&e.h)},El.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new wp(n,this.h|e.h)},El.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new wp(n,this.h^e.h)},dp.prototype.createWebChannel=dp.prototype.g,pp.prototype.send=pp.prototype.u,pp.prototype.open=pp.prototype.m,pp.prototype.close=pp.prototype.close,yh.NO_ERROR=0,yh.TIMEOUT=8,yh.HTTP_ERROR=6,gh.COMPLETE="complete",bh.EventType=_h,_h.OPEN="a",_h.CLOSE="b",_h.ERROR="c",_h.MESSAGE="d",Lf.prototype.listen=Lf.prototype.O,Rd.prototype.listenOnce=Rd.prototype.P,Rd.prototype.getLastError=Rd.prototype.Sa,Rd.prototype.getLastErrorCode=Rd.prototype.Ia,Rd.prototype.getStatus=Rd.prototype.da,Rd.prototype.getResponseJson=Rd.prototype.Wa,Rd.prototype.getResponseText=Rd.prototype.ja,Rd.prototype.send=Rd.prototype.ha,Rd.prototype.setWithCredentials=Rd.prototype.Oa,gp.prototype.digest=gp.prototype.l,gp.prototype.reset=gp.prototype.reset,gp.prototype.update=gp.prototype.j,wp.prototype.add=wp.prototype.add,wp.prototype.multiply=wp.prototype.R,wp.prototype.modulo=wp.prototype.gb,wp.prototype.compare=wp.prototype.X,wp.prototype.toNumber=wp.prototype.ea,wp.prototype.toString=wp.prototype.toString,wp.prototype.getBits=wp.prototype.D,wp.fromNumber=_p,wp.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Ap(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=_p(Math.pow(n,8)),i=Ep,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+o),n);8>o?(o=_p(Math.pow(n,o)),i=i.R(o).add(_p(u))):i=(i=i.R(r)).add(_p(u))}return i};var Fp=Tl.createWebChannelTransport=function(){return new dp},Up=Tl.getStatEventTarget=function(){return lh()},jp=Tl.ErrorCode=yh,Vp=Tl.EventType=gh,zp=Tl.Event=sh,Bp=Tl.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},qp=Tl.FetchXmlHttpFactory=Sd,Gp=Tl.WebChannel=bh,Kp=Tl.XhrIo=Rd,Wp=Tl.Md5=gp,Hp=Tl.Integer=wp,Qp="@firebase/firestore",Yp=function(){function e(t){Ne(this,e),this.uid=t}return De(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Yp.UNAUTHENTICATED=new Yp(null),Yp.GOOGLE_CREDENTIALS=new Yp("google-credentials-uid"),Yp.FIRST_PARTY=new Yp("first-party-uid"),Yp.MOCK_USER=new Yp("mock-user");var $p="9.22.1",Xp=new At("@firebase/firestore");function Jp(){return Xp.logLevel}function Zp(e){if(Xp.logLevel<=_t.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(nv);Xp.debug.apply(Xp,["Firestore (".concat($p,"): ").concat(e)].concat(gt(i)))}}function ev(e){if(Xp.logLevel<=_t.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(nv);Xp.error.apply(Xp,["Firestore (".concat($p,"): ").concat(e)].concat(gt(i)))}}function tv(e){if(Xp.logLevel<=_t.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(nv);Xp.warn.apply(Xp,["Firestore (".concat($p,"): ").concat(e)].concat(gt(i)))}}function nv(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function rv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat($p,") INTERNAL ASSERTION FAILED: ")+e;throw ev(t),new Error(t)}function iv(e,t){e||rv()}function av(e,t){return e}var ov={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},uv=function(e){Oe(n,e);var t=Fe(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return De(n)}(rt),sv=De((function e(){var t=this;Ne(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),cv=De((function e(t,n){Ne(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),lv=function(){function e(){Ne(this,e)}return De(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Yp.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),fv=function(){function e(t){Ne(this,e),this.token=t,this.changeListener=null}return De(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),hv=function(){function e(t){Ne(this,e),this.t=t,this.currentUser=Yp.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return De(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new sv;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new sv,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Zp("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Zp("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new sv)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Zp("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(iv("string"==typeof n.accessToken),new cv(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return iv(null===e||"string"==typeof e),new Yp(e)}}]),e}(),dv=function(){function e(t,n,r){Ne(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=Yp.FIRST_PARTY,this.g=new Map}return De(e,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),e}(),pv=function(){function e(t,n,r){Ne(this,e),this.h=t,this.l=n,this.m=r}return De(e,[{key:"getToken",value:function(){return Promise.resolve(new dv(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Yp.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),vv=De((function e(t){Ne(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),mv=function(){function e(t){Ne(this,e),this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}return De(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Zp("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,Zp("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Zp("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?i(e):Zp("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(iv("string"==typeof t.token),e.T=t.token,new vv(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function yv(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var gv=function(){function e(){Ne(this,e)}return De(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=yv(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function kv(e,t){return e<t?-1:e>t?1:0}function wv(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function bv(e){return e+"\0"}var xv=function(){function e(t,n){if(Ne(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new uv(ov.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new uv(ov.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new uv(ov.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new uv(ov.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return De(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?kv(this.nanoseconds,e.nanoseconds):kv(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),_v=function(){function e(t){Ne(this,e),this.timestamp=t}return De(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new xv(0,0))}},{key:"max",value:function(){return new e(new xv(253402300799,999999999))}}]),e}(),Iv=function(){function e(t,n,r){Ne(this,e),void 0===n?n=0:n>t.length&&rv(),void 0===r?r=t.length-n:r>t.length-n&&rv(),this.segments=t,this.offset=n,this.len=r}return De(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Ev=function(e){Oe(n,e);var t=Fe(n);function n(){return Ne(this,n),t.apply(this,arguments)}return De(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new uv(ov.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,gt(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Iv),Sv=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Tv=function(e){Oe(n,e);var t=Fe(n);function n(){return Ne(this,n),t.apply(this,arguments)}return De(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Sv.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new uv(ov.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new uv(ov.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new uv(ov.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new uv(ov.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Iv),Cv=function(){function e(t){Ne(this,e),this.path=t}return De(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Ev.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Ev.fromString(t))}},{key:"fromName",value:function(t){return new e(Ev.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Ev.emptyPath())}},{key:"comparator",value:function(e,t){return Ev.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Ev(t.slice()))}}]),e}(),Nv=De((function e(t,n,r,i){Ne(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Av(e){return e.fields.find((function(e){return 2===e.kind}))}function Dv(e){return e.fields.filter((function(e){return 2!==e.kind}))}Nv.UNKNOWN_ID=-1;var Pv=De((function e(t,n){Ne(this,e),this.fieldPath=t,this.kind=n}));var Rv=function(){function e(t,n){Ne(this,e),this.sequenceNumber=t,this.offset=n}return De(e,null,[{key:"empty",value:function(){return new e(0,Mv.min())}}]),e}();function Ov(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=_v.fromTimestamp(1e9===r?new xv(n+1,0):new xv(n,r));return new Mv(i,Cv.empty(),t)}function Lv(e){return new Mv(e.readTime,e.key,-1)}var Mv=function(){function e(t,n,r){Ne(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return De(e,null,[{key:"min",value:function(){return new e(_v.min(),Cv.empty(),-1)}},{key:"max",value:function(){return new e(_v.max(),Cv.empty(),-1)}}]),e}();function Fv(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Cv.comparator(e.documentKey,t.documentKey))?n:kv(e.largestBatchId,t.largestBatchId)}var Uv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",jv=function(){function e(){Ne(this,e),this.onCommittedListeners=[]}return De(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Vv(e){return zv.apply(this,arguments)}function zv(){return(zv=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===ov.FAILED_PRECONDITION&&t.message===Uv){e.next=2;break}throw t;case 2:Zp("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Bv=function(){function e(t){var n=this;Ne(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return De(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&rv(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=Pe(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),qv=function(){function e(t,n){var r=this;Ne(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.v=new sv,this.transaction.oncomplete=function(){r.v.resolve()},this.transaction.onabort=function(){n.error?r.v.reject(new Wv(t,n.error)):r.v.resolve()},this.transaction.onerror=function(e){var n=Xv(e.target.error);r.v.reject(new Wv(t,n))}}return De(e,[{key:"R",get:function(){return this.v.promise}},{key:"abort",value:function(e){e&&this.v.reject(e),this.aborted||(Zp("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"P",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Qv(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Wv(n,t)}}}]),e}(),Gv=function(){function e(t,n,r){Ne(this,e),this.name=t,this.version=n,this.V=r,12.2===e.S(Xe())&&ev("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return De(e,[{key:"$",value:function(){var e=be(ke().mark((function e(t){var n=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Zp("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Wv(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new uv(ov.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new uv(ov.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Wv(t,n))},i.onupgradeneeded=function(e){Zp("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.V.O(t,i.transaction,e.oldVersion,n.version).next((function(){Zp("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.F&&(this.db.onversionchange=function(e){return n.F(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"B",value:function(e){this.F=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=be(ke().mark((function e(t,n,r,i){var a,o,u,s,c=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=ke().mark((function e(){var n,u,s,l;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.$(t);case 4:return c.db=e.sent,n=qv.open(c.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.P(),e})).catch((function(e){return n.abort(e),Bv.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.R;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s=e.t1,l="FirebaseError"!==s.name&&o<3,Zp("SimpleDb","Transaction failed with error:",s.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(s)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if("object"!==typeof(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Zp("SimpleDb","Removing database:",e),Yv(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"D",value:function(){if(!nt())return!1;if(e.C())return!0;var t=Xe(),n=e.S(t),r=0<n&&n<10,i=e.N(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.k)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"S",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"N",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Kv=function(){function e(t){Ne(this,e),this.L=t,this.q=!1,this.U=null}return De(e,[{key:"isDone",get:function(){return this.q}},{key:"K",get:function(){return this.U}},{key:"cursor",set:function(e){this.L=e}},{key:"done",value:function(){this.q=!0}},{key:"G",value:function(e){this.U=e}},{key:"delete",value:function(){return Yv(this.L.delete())}}]),e}(),Wv=function(e){Oe(n,e);var t=Fe(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this,ov.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return De(n)}(uv);function Hv(e){return"IndexedDbTransactionError"===e.name}var Qv=function(){function e(t){Ne(this,e),this.store=t}return De(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Zp("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Zp("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Yv(n)}},{key:"add",value:function(e){return Zp("SimpleDb","ADD",this.store.name,e,e),Yv(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Yv(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Zp("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Zp("SimpleDb","DELETE",this.store.name,e),Yv(this.store.delete(e))}},{key:"count",value:function(){return Zp("SimpleDb","COUNT",this.store.name),Yv(this.store.count())}},{key:"j",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.W(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Bv((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Bv((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){Zp("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.W(r,(function(e,t,n){return n.delete()}))}},{key:"X",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.W(r,t)}},{key:"Z",value:function(e){var t=this.cursor({});return new Bv((function(n,r){t.onerror=function(e){var t=Xv(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"W",value:function(e,t){var n=[];return new Bv((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Kv(i),o=t(i.primaryKey,i.value,a);if(o instanceof Bv){var u=o.catch((function(e){return a.done(),Bv.reject(e)}));n.push(u)}a.isDone?r():null===a.K?i.continue():i.continue(a.K)}else r()}})).next((function(){return Bv.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Yv(e){return new Bv((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Xv(e.target.error);n(t)}}))}var $v=!1;function Xv(e){var t=Gv.S(Xe());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new uv("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return $v||($v=!0,setTimeout((function(){throw r}),0)),r}}return e}var Jv=function(){function e(t,n){Ne(this,e),this.asyncQueue=t,this.tt=n,this.task=null}return De(e,[{key:"start",value:function(){this.et(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"et",value:function(e){var t=this;Zp("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=Zp,e.t1="Documents written: ",e.next=6,t.tt.nt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Hv(e.t4)){e.next=17;break}Zp("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Vv(e.t4);case 19:return e.next=21,t.et(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),Zv=function(){function e(t,n){Ne(this,e),this.localStore=t,this.persistence=n}return De(e,[{key:"nt",value:function(){var e=be(ke().mark((function e(){var t,n=this,r=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.st(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"st",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Bv.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return Zp("IndexBackiller","Processing collection: ".concat(t)),n.it(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"it",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.rt(i,n)})).next((function(n){return Zp("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"rt",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=Lv(t);Fv(r,n)>0&&(n=r)})),new Mv(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),em=function(){function e(t,n){var r=this;Ne(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ot(e)},this.ut=function(e){return n.writeSequenceNumber(e)})}return De(e,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),e}();function tm(e){return null==e}function nm(e){return 0===e&&1/e==-1/0}function rm(e){return"number"==typeof e&&Number.isInteger(e)&&!nm(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function im(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=om(t)),t=am(e.get(n),t);return om(t)}function am(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function om(e){return e+"\x01\x01"}function um(e){var t=e.length;if(iv(t>=2),2===t)return iv("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Ev.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&rv(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:rv()}a=o+2}return new Ev(r)}em.ct=-1;var sm=["userId","batchId"];function cm(e,t){return[e,im(t)]}function lm(e,t,n){return[e,im(t),n]}var fm={},hm=["prefixPath","collectionGroup","readTime","documentId"],dm=["prefixPath","collectionGroup","documentId"],pm=["collectionGroup","readTime","prefixPath","documentId"],vm=["canonicalId","targetId"],mm=["targetId","path"],ym=["path","targetId"],gm=["collectionId","parent"],km=["indexId","uid"],wm=["uid","sequenceNumber"],bm=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],xm=["indexId","uid","orderedDocumentKey"],_m=["userId","collectionPath","documentId"],Im=["userId","collectionPath","largestBatchId"],Em=["userId","collectionGroup","largestBatchId"],Sm=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Tm=[].concat(gt(Sm),["documentOverlays"]),Cm=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Nm=Cm,Am=[].concat(Nm,["indexConfiguration","indexState","indexEntries"]),Dm=function(e){Oe(n,e);var t=Fe(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this)).ht=e,i.currentSequenceNumber=r,i}return De(n)}(jv);function Pm(e,t){var n=av(e);return Gv.M(n.ht,t)}function Rm(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Om(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Lm(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Mm=function(){function e(t,n){Ne(this,e),this.comparator=t,this.root=n||Um.EMPTY}return De(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Um.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Um.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Fm(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Fm(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Fm(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Fm(this.root,e,this.comparator,!0)}}]),e}(),Fm=function(){function e(t,n,r,i){Ne(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return De(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Um=function(){function e(t,n,r,i,a){Ne(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return De(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw rv();if(this.right.isRed())throw rv();var e=this.left.check();if(e!==this.right.check())throw rv();return e+(this.isRed()?0:1)}}]),e}();Um.EMPTY=null,Um.RED=!0,Um.BLACK=!1,Um.EMPTY=new(function(){function e(){Ne(this,e),this.size=0}return De(e,[{key:"key",get:function(){throw rv()}},{key:"value",get:function(){throw rv()}},{key:"color",get:function(){throw rv()}},{key:"left",get:function(){throw rv()}},{key:"right",get:function(){throw rv()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Um(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var jm=function(){function e(t){Ne(this,e),this.comparator=t,this.data=new Mm(this.comparator)}return De(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Vm(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Vm(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Vm=function(){function e(t){Ne(this,e),this.iter=t}return De(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function zm(e){return e.hasNext()?e.getNext():void 0}var Bm=function(){function e(t){Ne(this,e),this.fields=t,t.sort(Tv.comparator)}return De(e,[{key:"unionWith",value:function(t){var n,r=new jm(Tv.comparator),i=Pe(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=Pe(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=Pe(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return wv(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),qm=function(e){Oe(n,e);var t=Fe(n);function n(){var e;return Ne(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return De(n)}(je(Error));var Gm=function(e){function t(e){Ne(this,t),this.binaryString=e}return De(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return kv(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new qm("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Gm.EMPTY_BYTE_STRING=new Gm("");var Km=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wm(e){if(iv(!!e),"string"==typeof e){var t=0,n=Km.exec(e);if(iv(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Hm(e.seconds),nanos:Hm(e.nanos)}}function Hm(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Qm(e){return"string"==typeof e?Gm.fromBase64String(e):Gm.fromUint8Array(e)}function Ym(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function $m(e){var t=e.mapValue.fields.__previous_value__;return Ym(t)?$m(t):t}function Xm(e){var t=Wm(e.mapValue.fields.__local_write_time__.timestampValue);return new xv(t.seconds,t.nanos)}var Jm=De((function e(t,n,r,i,a,o,u,s,c){Ne(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=s,this.useFetchStreams=c})),Zm=function(){function e(t,n){Ne(this,e),this.projectId=t,this.database=n||"(default)"}return De(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),ey={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ty={nullValue:"NULL_VALUE"};function ny(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ym(e)?4:my(e)?9007199254740991:10:rv()}function ry(e,t){if(e===t)return!0;var n=ny(e);if(n!==ny(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Xm(e).isEqual(Xm(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Wm(e.timestampValue),r=Wm(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Qm(e.bytesValue).isEqual(Qm(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Hm(e.geoPointValue.latitude)===Hm(t.geoPointValue.latitude)&&Hm(e.geoPointValue.longitude)===Hm(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Hm(e.integerValue)===Hm(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Hm(e.doubleValue),r=Hm(t.doubleValue);return n===r?nm(n)===nm(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return wv(e.arrayValue.values||[],t.arrayValue.values||[],ry);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Rm(n)!==Rm(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ry(n[i],r[i])))return!1;return!0}(e,t);default:return rv()}}function iy(e,t){return void 0!==(e.values||[]).find((function(e){return ry(e,t)}))}function ay(e,t){if(e===t)return 0;var n=ny(e),r=ny(t);if(n!==r)return kv(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return kv(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Hm(e.integerValue||e.doubleValue),r=Hm(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return oy(e.timestampValue,t.timestampValue);case 4:return oy(Xm(e),Xm(t));case 5:return kv(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Qm(e),r=Qm(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=kv(n[i],r[i]);if(0!==a)return a}return kv(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=kv(Hm(e.latitude),Hm(t.latitude));return 0!==n?n:kv(Hm(e.longitude),Hm(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=ay(n[i],r[i]);if(a)return a}return kv(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===ey.mapValue&&t===ey.mapValue)return 0;if(e===ey.mapValue)return 1;if(t===ey.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=kv(r[o],a[o]);if(0!==u)return u;var s=ay(n[r[o]],i[a[o]]);if(0!==s)return s}return kv(r.length,a.length)}(e.mapValue,t.mapValue);default:throw rv()}}function oy(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return kv(e,t);var n=Wm(e),r=Wm(t),i=kv(n.seconds,r.seconds);return 0!==i?i:kv(n.nanos,r.nanos)}function uy(e){return sy(e)}function sy(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Wm(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Qm(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Cv.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=Pe(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=sy(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=Pe(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(sy(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):rv();var t,n}function cy(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function ly(e){return!!e&&"integerValue"in e}function fy(e){return!!e&&"arrayValue"in e}function hy(e){return!!e&&"nullValue"in e}function dy(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function py(e){return!!e&&"mapValue"in e}function vy(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Om(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=vy(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=vy(e.arrayValue.values[r]);return n}return Object.assign({},e)}function my(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function yy(e){return"nullValue"in e?ty:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?cy(Zm.empty(),Cv.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:rv()}function gy(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?cy(Zm.empty(),Cv.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?ey:rv()}function ky(e,t){var n=ay(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function wy(e,t){var n=ay(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var by=function(){function e(t){Ne(this,e),this.value=t}return De(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!py(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vy(t)}},{key:"setAll",value:function(e){var t=this,n=Tv.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=vy(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());py(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return ry(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];py(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Om(t,(function(t,n){return e[t]=n}));var r,i=Pe(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(vy(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function xy(e){var t=[];return Om(e.fields,(function(e,n){var r=new Tv([e]);if(py(n)){var i=xy(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=Pe(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Bm(t)}var _y=function(){function e(t,n,r,i,a,o,u){Ne(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return De(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(_v.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=by.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=by.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=_v.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,_v.min(),_v.min(),_v.min(),by.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,_v.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,_v.min(),_v.min(),by.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,_v.min(),_v.min(),by.empty(),2)}}]),e}(),Iy=De((function e(t,n){Ne(this,e),this.position=t,this.inclusive=n}));function Ey(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Cv.comparator(Cv.fromName(o.referenceValue),n.key):ay(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Sy(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!ry(e.position[n],t.position[n]))return!1;return!0}var Ty=De((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";Ne(this,e),this.field=t,this.dir=n}));function Cy(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Ny=De((function e(){Ne(this,e)})),Ay=function(e){Oe(n,e);var t=Fe(n);function n(e,r,i){var a;return Ne(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return De(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ay(t,this.value)):null!==t&&ny(this.value)===ny(t)&&this.matchesComparison(ay(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return rv()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Vy(e,t,r):"array-contains"===t?new Gy(e,r):"in"===t?new Ky(e,r):"not-in"===t?new Wy(e,r):"array-contains-any"===t?new Hy(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new zy(e,n):new By(e,n)}}]),n}(Ny),Dy=function(e){Oe(n,e);var t=Fe(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this)).filters=e,i.op=r,i.lt=null,i}return De(n,[{key:"matches",value:function(e){return Py(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.lt||(this.lt=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.lt}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.ft((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"ft",value:function(e){var t,n=Pe(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(Ny);function Py(e){return"and"===e.op}function Ry(e){return"or"===e.op}function Oy(e){return Ly(e)&&Py(e)}function Ly(e){var t,n=Pe(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof Dy)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function My(e){if(e instanceof Ay)return e.field.canonicalString()+e.op.toString()+uy(e.value);if(Oy(e))return e.filters.map((function(e){return My(e)})).join(",");var t=e.filters.map((function(e){return My(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Fy(e,t){return e instanceof Ay?function(e,t){return t instanceof Ay&&e.op===t.op&&e.field.isEqual(t.field)&&ry(e.value,t.value)}(e,t):e instanceof Dy?function(e,t){return t instanceof Dy&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Fy(n,t.filters[r])}),!0)}(e,t):void rv()}function Uy(e,t){var n=e.filters.concat(t);return Dy.create(n,e.op)}function jy(e){return e instanceof Ay?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(uy(e.value))}(e):e instanceof Dy?function(e){return e.op.toString()+" {"+e.getFilters().map(jy).join(" ,")+"}"}(e):"Filter"}var Vy=function(e){Oe(n,e);var t=Fe(n);function n(e,r,i){var a;return Ne(this,n),(a=t.call(this,e,r,i)).key=Cv.fromName(i.referenceValue),a}return De(n,[{key:"matches",value:function(e){var t=Cv.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(Ay),zy=function(e){Oe(n,e);var t=Fe(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this,e,"in",r)).keys=qy("in",r),i}return De(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Ay),By=function(e){Oe(n,e);var t=Fe(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this,e,"not-in",r)).keys=qy("not-in",r),i}return De(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Ay);function qy(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Cv.fromName(e.referenceValue)}))}var Gy=function(e){Oe(n,e);var t=Fe(n);function n(e,r){return Ne(this,n),t.call(this,e,"array-contains",r)}return De(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return fy(t)&&iy(t.arrayValue,this.value)}}]),n}(Ay),Ky=function(e){Oe(n,e);var t=Fe(n);function n(e,r){return Ne(this,n),t.call(this,e,"in",r)}return De(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&iy(this.value.arrayValue,t)}}]),n}(Ay),Wy=function(e){Oe(n,e);var t=Fe(n);function n(e,r){return Ne(this,n),t.call(this,e,"not-in",r)}return De(n,[{key:"matches",value:function(e){if(iy(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!iy(this.value.arrayValue,t)}}]),n}(Ay),Hy=function(e){Oe(n,e);var t=Fe(n);function n(e,r){return Ne(this,n),t.call(this,e,"array-contains-any",r)}return De(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!fy(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return iy(t.value.arrayValue,e)}))}}]),n}(Ay),Qy=De((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;Ne(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.dt=null}));function Yy(e){return new Qy(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function $y(e){var t=av(e);if(null===t.dt){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return My(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),tm(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return uy(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return uy(e)})).join(",")),t.dt=n}return t.dt}function Xy(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Cy(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Fy(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Sy(e.startAt,t.startAt)&&Sy(e.endAt,t.endAt)}function Jy(e){return Cv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Zy(e,t){return e.filters.filter((function(e){return e instanceof Ay&&e.field.isEqual(t)}))}function eg(e,t,n){var r,i=ty,a=!0,o=Pe(Zy(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=ty,c=!0;switch(u.op){case"<":case"<=":s=yy(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=ty}ky({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];ky({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function tg(e,t,n){var r,i=ey,a=!0,o=Pe(Zy(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=ey,c=!0;switch(u.op){case">=":case">":s=gy(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=ey}wy({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];wy({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var ng=De((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Ne(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.wt=null,this._t=null,this.startAt,this.endAt}));function rg(e,t,n,r,i,a,o,u){return new ng(e,t,n,r,i,a,o,u)}function ig(e){return new ng(e)}function ag(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function og(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function ug(e){var t,n=Pe(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function sg(e){return null!==e.collectionGroup}function cg(e){var t=av(e);if(null===t.wt){t.wt=[];var n=ug(t),r=og(t);if(null!==n&&null===r)n.isKeyField()||t.wt.push(new Ty(n)),t.wt.push(new Ty(Tv.keyField(),"asc"));else{var i,a=!1,o=Pe(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.wt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new Ty(Tv.keyField(),s))}}}return t.wt}function lg(e){var t=av(e);if(!t._t)if("F"===t.limitType)t._t=Yy(t.path,t.collectionGroup,cg(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=Pe(cg(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Ty(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Iy(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Iy(t.startAt.position,t.startAt.inclusive):null;t._t=Yy(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t._t}function fg(e,t){t.getFirstInequalityField(),ug(e);var n=e.filters.concat([t]);return new ng(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function hg(e,t,n){return new ng(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function dg(e,t){return Xy(lg(e),lg(t))&&e.limitType===t.limitType}function pg(e){return"".concat($y(lg(e)),"|lt:").concat(e.limitType)}function vg(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return jy(e)})).join(", "),"]")),tm(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return uy(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return uy(e)})).join(",")),"Target(".concat(t,")")}(lg(e)),"; limitType=").concat(e.limitType,")")}function mg(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Cv.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=Pe(cg(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=Pe(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Ey(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,cg(e),t))&&!(e.endAt&&!function(e,t,n){var r=Ey(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,cg(e),t))}(e,t)}function yg(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function gg(e){return function(t,n){var r,i=!1,a=Pe(cg(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=kg(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function kg(e,t,n){var r=e.field.isKeyField()?Cv.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?ay(r,i):rv()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return rv()}}var wg=function(){function e(t,n){Ne(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return De(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=Pe(n);try{for(i.s();!(r=i.n()).done;){var a=Se(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Om(this.inner,(function(t,n){var r,i=Pe(n);try{for(i.s();!(r=i.n()).done;){var a=Se(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Lm(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),bg=new Mm(Cv.comparator);function xg(){return bg}var _g=new Mm(Cv.comparator);function Ig(){for(var e=_g,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Eg(e){var t=_g;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Sg(){return Cg()}function Tg(){return Cg()}function Cg(){return new wg((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Ng=new Mm(Cv.comparator),Ag=new jm(Cv.comparator);function Dg(){for(var e=Ag,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Pg=new jm(kv);function Rg(){return Pg}function Og(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nm(t)?"-0":t}}function Lg(e){return{integerValue:""+e}}function Mg(e,t){return rm(t)?Lg(t):Og(e,t)}var Fg=De((function e(){Ne(this,e),this._=void 0}));function Ug(e,t,n){return e instanceof zg?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Ym(t)&&(t=$m(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Bg?qg(e,t):e instanceof Gg?Kg(e,t):function(e,t){var n=Vg(e,t),r=Hg(n)+Hg(e.gt);return ly(n)&&ly(e.gt)?Lg(r):Og(e.serializer,r)}(e,t)}function jg(e,t,n){return e instanceof Bg?qg(e,t):e instanceof Gg?Kg(e,t):n}function Vg(e,t){return e instanceof Wg?ly(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var zg=function(e){Oe(n,e);var t=Fe(n);function n(){return Ne(this,n),t.apply(this,arguments)}return De(n)}(Fg),Bg=function(e){Oe(n,e);var t=Fe(n);function n(e){var r;return Ne(this,n),(r=t.call(this)).elements=e,r}return De(n)}(Fg);function qg(e,t){var n,r=Qg(t),i=Pe(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return ry(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Gg=function(e){Oe(n,e);var t=Fe(n);function n(e){var r;return Ne(this,n),(r=t.call(this)).elements=e,r}return De(n)}(Fg);function Kg(e,t){var n,r=Qg(t),i=Pe(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!ry(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Wg=function(e){Oe(n,e);var t=Fe(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this)).serializer=e,i.gt=r,i}return De(n)}(Fg);function Hg(e){return Hm(e.integerValue||e.doubleValue)}function Qg(e){return fy(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Yg=De((function e(t,n){Ne(this,e),this.field=t,this.transform=n}));var $g=De((function e(t,n){Ne(this,e),this.version=t,this.transformResults=n})),Xg=function(){function e(t,n){Ne(this,e),this.updateTime=t,this.exists=n}return De(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Jg(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Zg=De((function e(){Ne(this,e)}));function ek(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new hk(e.key,Xg.none()):new ak(e.key,e.data,Xg.none());var n,r=e.data,i=by.empty(),a=new jm(Tv.comparator),o=Pe(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new ok(e.key,i,new Bm(a.toArray()),Xg.none())}function tk(e,t,n){e instanceof ak?function(e,t,n){var r=e.value.clone(),i=sk(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof ok?function(e,t,n){if(Jg(e.precondition,t)){var r=sk(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(uk(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function nk(e,t,n,r){return e instanceof ak?function(e,t,n,r){if(!Jg(e.precondition,t))return n;var i=e.value.clone(),a=ck(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof ok?function(e,t,n,r){if(!Jg(e.precondition,t))return n;var i=ck(e.fieldTransforms,r,t),a=t.data;return a.setAll(uk(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Jg(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function rk(e,t){var n,r=null,i=Pe(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Vg(a.transform,o||null);null!=u&&(null===r&&(r=by.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function ik(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&wv(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Bg&&t instanceof Bg||e instanceof Gg&&t instanceof Gg?wv(e.elements,t.elements,ry):e instanceof Wg&&t instanceof Wg?ry(e.gt,t.gt):e instanceof zg&&t instanceof zg}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var ak=function(e){Oe(n,e);var t=Fe(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Ne(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return De(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Zg),ok=function(e){Oe(n,e);var t=Fe(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return Ne(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return De(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Zg);function uk(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function sk(e,t,n){var r=new Map;iv(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,jg(o,u,n[i]))}return r}function ck(e,t,n){var r,i=new Map,a=Pe(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Ug(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var lk,fk,hk=function(e){Oe(n,e);var t=Fe(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return De(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Zg),dk=function(e){Oe(n,e);var t=Fe(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return De(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Zg),pk=function(){function e(t,n,r,i){Ne(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return De(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&tk(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=Pe(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=nk(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=Pe(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=nk(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Tg();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=ek(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(_v.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Dg())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&wv(this.mutations,e.mutations,(function(e,t){return ik(e,t)}))&&wv(this.baseMutations,e.baseMutations,(function(e,t){return ik(e,t)}))}}]),e}(),vk=function(){function e(t,n,r,i){Ne(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return De(e,null,[{key:"from",value:function(t,n,r){iv(t.mutations.length===r.length);for(var i=Ng,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),mk=function(){function e(t,n){Ne(this,e),this.largestBatchId=t,this.mutation=n}return De(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),yk=De((function e(t,n){Ne(this,e),this.count=t,this.unchangedNames=n}));function gk(e){switch(e){default:return rv();case ov.CANCELLED:case ov.UNKNOWN:case ov.DEADLINE_EXCEEDED:case ov.RESOURCE_EXHAUSTED:case ov.INTERNAL:case ov.UNAVAILABLE:case ov.UNAUTHENTICATED:return!1;case ov.INVALID_ARGUMENT:case ov.NOT_FOUND:case ov.ALREADY_EXISTS:case ov.PERMISSION_DENIED:case ov.FAILED_PRECONDITION:case ov.ABORTED:case ov.OUT_OF_RANGE:case ov.UNIMPLEMENTED:case ov.DATA_LOSS:return!0}}function kk(e){if(void 0===e)return ev("GRPC error has no .code"),ov.UNKNOWN;switch(e){case lk.OK:return ov.OK;case lk.CANCELLED:return ov.CANCELLED;case lk.UNKNOWN:return ov.UNKNOWN;case lk.DEADLINE_EXCEEDED:return ov.DEADLINE_EXCEEDED;case lk.RESOURCE_EXHAUSTED:return ov.RESOURCE_EXHAUSTED;case lk.INTERNAL:return ov.INTERNAL;case lk.UNAVAILABLE:return ov.UNAVAILABLE;case lk.UNAUTHENTICATED:return ov.UNAUTHENTICATED;case lk.INVALID_ARGUMENT:return ov.INVALID_ARGUMENT;case lk.NOT_FOUND:return ov.NOT_FOUND;case lk.ALREADY_EXISTS:return ov.ALREADY_EXISTS;case lk.PERMISSION_DENIED:return ov.PERMISSION_DENIED;case lk.FAILED_PRECONDITION:return ov.FAILED_PRECONDITION;case lk.ABORTED:return ov.ABORTED;case lk.OUT_OF_RANGE:return ov.OUT_OF_RANGE;case lk.UNIMPLEMENTED:return ov.UNIMPLEMENTED;case lk.DATA_LOSS:return ov.DATA_LOSS;default:return rv()}}(fk=lk||(lk={}))[fk.OK=0]="OK",fk[fk.CANCELLED=1]="CANCELLED",fk[fk.UNKNOWN=2]="UNKNOWN",fk[fk.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fk[fk.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fk[fk.NOT_FOUND=5]="NOT_FOUND",fk[fk.ALREADY_EXISTS=6]="ALREADY_EXISTS",fk[fk.PERMISSION_DENIED=7]="PERMISSION_DENIED",fk[fk.UNAUTHENTICATED=16]="UNAUTHENTICATED",fk[fk.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fk[fk.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fk[fk.ABORTED=10]="ABORTED",fk[fk.OUT_OF_RANGE=11]="OUT_OF_RANGE",fk[fk.UNIMPLEMENTED=12]="UNIMPLEMENTED",fk[fk.INTERNAL=13]="INTERNAL",fk[fk.UNAVAILABLE=14]="UNAVAILABLE",fk[fk.DATA_LOSS=15]="DATA_LOSS";var wk=function(){function e(){Ne(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return De(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return bk}},{key:"getOrCreateInstance",value:function(){return null===bk&&(bk=new e),bk}}]),e}(),bk=null;function xk(){return new TextEncoder}var _k=new Hp([4294967295,4294967295],0);function Ik(e){var t=xk().encode(e),n=new Wp;return n.update(t),new Uint8Array(n.digest())}function Ek(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Hp([n,r],0),new Hp([i,a],0)]}var Sk=function(){function e(t,n,r){if(Ne(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Tk("Invalid padding: ".concat(n));if(r<0)throw new Tk("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new Tk("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new Tk("Invalid padding when bitmap length is 0: ".concat(n));this.It=8*t.length-n,this.Tt=Hp.fromNumber(this.It)}return De(e,[{key:"Et",value:function(e,t,n){var r=e.add(t.multiply(Hp.fromNumber(n)));return 1===r.compare(_k)&&(r=new Hp([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}},{key:"At",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"vt",value:function(e){if(0===this.It)return!1;for(var t=Se(Ek(Ik(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Et(n,r,i);if(!this.At(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.It)for(var t=Se(Ek(Ik(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Et(n,r,i);this.Rt(a)}}},{key:"Rt",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),Tk=function(e){Oe(n,e);var t=Fe(n);function n(){var e;return Ne(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return De(n)}(je(Error)),Ck=function(){function e(t,n,r,i,a){Ne(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return De(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,Nk.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(_v.min(),i,new Mm(kv),xg(),Dg())}}]),e}(),Nk=function(){function e(t,n,r,i,a){Ne(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return De(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Dg(),Dg(),Dg())}}]),e}(),Ak=De((function e(t,n,r,i){Ne(this,e),this.Pt=t,this.removedTargetIds=n,this.key=r,this.bt=i})),Dk=De((function e(t,n){Ne(this,e),this.targetId=t,this.Vt=n})),Pk=De((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Gm.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Ne(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Rk=function(){function e(){Ne(this,e),this.St=0,this.Dt=Mk(),this.Ct=Gm.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}return De(e,[{key:"current",get:function(){return this.xt}},{key:"resumeToken",get:function(){return this.Ct}},{key:"kt",get:function(){return 0!==this.St}},{key:"Mt",get:function(){return this.Nt}},{key:"$t",value:function(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}},{key:"Ot",value:function(){var e=Dg(),t=Dg(),n=Dg();return this.Dt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:rv()}})),new Nk(this.Ct,this.xt,e,t,n)}},{key:"Ft",value:function(){this.Nt=!1,this.Dt=Mk()}},{key:"Bt",value:function(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}},{key:"Lt",value:function(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}},{key:"qt",value:function(){this.St+=1}},{key:"Ut",value:function(){this.St-=1}},{key:"Kt",value:function(){this.Nt=!0,this.xt=!0}}]),e}(),Ok=function(){function e(t){Ne(this,e),this.Gt=t,this.Qt=new Map,this.jt=xg(),this.zt=Lk(),this.Wt=new Mm(kv)}return De(e,[{key:"Ht",value:function(e){var t,n=Pe(e.Pt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.bt&&e.bt.isFoundDocument()?this.Jt(r,e.bt):this.Yt(r,e.key,e.bt)}}catch(u){n.e(u)}finally{n.f()}var i,a=Pe(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Yt(o,e.key,e.bt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Xt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Zt(n);switch(e.state){case 0:t.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||t.removeTarget(n);break;case 3:t.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:t.te(n)&&(t.ee(n),r.$t(e.resumeToken));break;default:rv()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((function(e,r){n.te(r)&&t(r)}))}},{key:"ne",value:function(e){var t,n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){var a=i.target;if(Jy(a))if(0===r){var o=new Cv(a.path);this.Yt(n,o,_y.newNoDocument(o,_v.min()))}else iv(1===r);else{var u=this.ie(n);if(u!==r){var s=this.re(e,u);if(0!==s){this.ee(n);var c=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,c)}null===(t=wk.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,a,o,u,s,c={localCacheCount:t,existenceFilterCount:n.count},l=n.unchangedNames;return l&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==l?void 0:l.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(a=null===(i=null==l?void 0:l.bits)||void 0===i?void 0:i.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(s=null===(u=null==l?void 0:l.bits)||void 0===u?void 0:u.padding)&&void 0!==s?s:0}),c}(s,u,e.Vt))}}}}},{key:"re",value:function(e,t){var n=e.Vt,r=n.unchangedNames,i=n.count;if(!r||!r.bits)return 1;var a,o,u=r.bits,s=u.bitmap,c=void 0===s?"":s,l=u.padding,f=void 0===l?0:l,h=r.hashCount,d=void 0===h?0:h;try{a=Qm(c).toUint8Array()}catch(e){if(e instanceof qm)return tv("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{o=new Sk(a,f,d)}catch(e){return tv(e instanceof Tk?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===o.It?1:i!==t-this.oe(e.targetId,o)?2:0}},{key:"oe",value:function(e,t){var n=this,r=this.Gt.getRemoteKeysForTarget(e),i=0;return r.forEach((function(r){var a=n.Gt.ue(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());t.vt(o)||(n.Yt(e,r,null),i++)})),i}},{key:"ce",value:function(e){var t=this,n=new Map;this.Qt.forEach((function(r,i){var a=t.se(i);if(a){if(r.current&&Jy(a.target)){var o=new Cv(a.target.path);null!==t.jt.get(o)||t.ae(i,o)||t.Yt(i,o,_y.newNoDocument(o,e))}r.Mt&&(n.set(i,r.Ot()),r.Ft())}}));var r=Dg();this.zt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.se(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.jt.forEach((function(t,n){return n.setReadTime(e)}));var i=new Ck(e,n,this.Wt,this.jt,r);return this.jt=xg(),this.zt=Lk(),this.Wt=new Mm(kv),i}},{key:"Jt",value:function(e,t){if(this.te(e)){var n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}}},{key:"Yt",value:function(e,t,n){if(this.te(e)){var r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Qt.delete(e)}},{key:"ie",value:function(e){var t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"qt",value:function(e){this.Zt(e).qt()}},{key:"Zt",value:function(e){var t=this.Qt.get(e);return t||(t=new Rk,this.Qt.set(e,t)),t}},{key:"he",value:function(e){var t=this.zt.get(e);return t||(t=new jm(kv),this.zt=this.zt.insert(e,t)),t}},{key:"te",value:function(e){var t=null!==this.se(e);return t||Zp("WatchChangeAggregator","Detected inactive target",e),t}},{key:"se",value:function(e){var t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}},{key:"ee",value:function(e){var t=this;this.Qt.set(e,new Rk),this.Gt.getRemoteKeysForTarget(e).forEach((function(n){t.Yt(e,n,null)}))}},{key:"ae",value:function(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Lk(){return new Mm(Cv.comparator)}function Mk(){return new Mm(Cv.comparator)}var Fk={asc:"ASCENDING",desc:"DESCENDING"},Uk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jk={and:"AND",or:"OR"},Vk=De((function e(t,n){Ne(this,e),this.databaseId=t,this.useProto3Json=n}));function zk(e,t){return e.useProto3Json||tm(t)?t:{value:t}}function Bk(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function qk(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Gk(e,t){return Bk(e,t.toTimestamp())}function Kk(e){return iv(!!e),_v.fromTimestamp(function(e){var t=Wm(e);return new xv(t.seconds,t.nanos)}(e))}function Wk(e,t){return function(e){return new Ev(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Hk(e){var t=Ev.fromString(e);return iv(mw(t)),t}function Qk(e,t){return Wk(e.databaseId,t.path)}function Yk(e,t){var n=Hk(t);if(n.get(1)!==e.databaseId.projectId)throw new uv(ov.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new uv(ov.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Cv(Zk(n))}function $k(e,t){return Wk(e.databaseId,t)}function Xk(e){var t=Hk(e);return 4===t.length?Ev.emptyPath():Zk(t)}function Jk(e){return new Ev(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Zk(e){return iv(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function ew(e,t,n){return{name:Qk(e,t),fields:n.value.mapValue.fields}}function tw(e,t,n){var r=Yk(e,t.name),i=Kk(t.updateTime),a=t.createTime?Kk(t.createTime):_v.min(),o=new by({mapValue:{fields:t.fields}}),u=_y.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function nw(e,t){return"found"in t?function(e,t){iv(!!t.found),t.found.name,t.found.updateTime;var n=Yk(e,t.found.name),r=Kk(t.found.updateTime),i=t.found.createTime?Kk(t.found.createTime):_v.min(),a=new by({mapValue:{fields:t.found.fields}});return _y.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){iv(!!t.missing),iv(!!t.readTime);var n=Yk(e,t.missing),r=Kk(t.readTime);return _y.newNoDocument(n,r)}(e,t):rv()}function rw(e,t){var n;if(t instanceof ak)n={update:ew(e,t.key,t.value)};else if(t instanceof hk)n={delete:Qk(e,t.key)};else if(t instanceof ok)n={update:ew(e,t.key,t.data),updateMask:vw(t.fieldMask)};else{if(!(t instanceof dk))return rv();n={verify:Qk(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof zg)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Bg)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Gg)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Wg)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw rv()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Gk(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:rv()}(e,t.precondition)),n}function iw(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Xg.updateTime(Kk(e.updateTime)):void 0!==e.exists?Xg.exists(e.exists):Xg.none()}(t.currentDocument):Xg.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)iv("REQUEST_TIME"===t.setToServerValue),n=new zg;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Bg(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Gg(i)}else"increment"in t?n=new Wg(e,t.increment):rv();var a=Tv.fromServerFormat(t.fieldPath);return new Yg(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Yk(e,t.update.name),a=new by({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Bm(t.map((function(e){return Tv.fromServerFormat(e)})))}(t.updateMask);return new ok(i,a,o,n,r)}return new ak(i,a,n,r)}if(t.delete){var u=Yk(e,t.delete);return new hk(u,n)}if(t.verify){var s=Yk(e,t.verify);return new dk(s,n)}return rv()}function aw(e,t){return{documents:[$k(e,t.path)]}}function ow(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=$k(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=$k(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return pw(Dy.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:hw(e.field),direction:cw(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=zk(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function uw(e){var t=Xk(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){iv(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=sw(e);return t instanceof Dy&&Oy(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Ty(dw(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return tm(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Iy(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Iy(n,t)}(n.endAt)),rg(t,i,u,o,s,"F",c,l)}function sw(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=dw(e.unaryFilter.field);return Ay.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=dw(e.unaryFilter.field);return Ay.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=dw(e.unaryFilter.field);return Ay.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=dw(e.unaryFilter.field);return Ay.create(i,"!=",{nullValue:"NULL_VALUE"});default:return rv()}}(e):void 0!==e.fieldFilter?function(e){return Ay.create(dw(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return rv()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Dy.create(e.compositeFilter.filters.map((function(e){return sw(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return rv()}}(e.compositeFilter.op))}(e):rv()}function cw(e){return Fk[e]}function lw(e){return Uk[e]}function fw(e){return jk[e]}function hw(e){return{fieldPath:e.canonicalString()}}function dw(e){return Tv.fromServerFormat(e.fieldPath)}function pw(e){return e instanceof Ay?function(e){if("=="===e.op){if(dy(e.value))return{unaryFilter:{field:hw(e.field),op:"IS_NAN"}};if(hy(e.value))return{unaryFilter:{field:hw(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(dy(e.value))return{unaryFilter:{field:hw(e.field),op:"IS_NOT_NAN"}};if(hy(e.value))return{unaryFilter:{field:hw(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hw(e.field),op:lw(e.op),value:e.value}}}(e):e instanceof Dy?function(e){var t=e.getFilters().map((function(e){return pw(e)}));return 1===t.length?t[0]:{compositeFilter:{op:fw(e.op),filters:t}}}(e):rv()}function vw(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function mw(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var yw=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:_v.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:_v.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Gm.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Ne(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=s}return De(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),gw=De((function e(t){Ne(this,e),this.fe=t}));function kw(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:ww(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Qk(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Bk(e,t.version.toTimestamp()),createTime:Bk(e,t.createTime.toTimestamp())}}(e.fe,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:bw(t.version)};else{if(!t.isUnknownDocument())return rv();r.unknownDocument={path:n.path.toArray(),version:bw(t.version)}}return r}function ww(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function bw(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function xw(e){var t=new xv(e.seconds,e.nanoseconds);return _v.fromTimestamp(t)}function _w(e,t){for(var n=(t.baseMutations||[]).map((function(t){return iw(e.fe,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return iw(e.fe,t)})),u=xv.fromMillis(t.localWriteTimeMs);return new pk(t.batchId,u,n,o)}function Iw(e){var t,n,r=xw(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?xw(e.lastLimboFreeSnapshotVersion):_v.min();return void 0!==e.query.documents?(iv(1===(n=e.query).documents.length),t=lg(ig(Xk(n.documents[0])))):t=function(e){return lg(uw(e))}(e.query),new yw(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,r,i,Gm.fromBase64String(e.resumeToken))}function Ew(e,t){var n,r=bw(t.snapshotVersion),i=bw(t.lastLimboFreeSnapshotVersion);n=Jy(t.target)?aw(e.fe,t.target):ow(e.fe,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:$y(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Sw(e){var t=uw({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?hg(t,t.limit,"L"):t}function Tw(e,t){return new mk(t.largestBatchId,iw(e.fe,t.overlayMutation))}function Cw(e,t){var n=t.path.lastSegment();return[e,im(t.path.popLast()),n]}function Nw(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:bw(r.readTime),documentKey:im(r.documentKey.path),largestBatchId:r.largestBatchId}}var Aw=function(){function e(){Ne(this,e)}return De(e,[{key:"getBundleMetadata",value:function(e,t){return Dw(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:xw(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Dw(e).put({bundleId:(n=t).id,createTime:bw(Kk(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Pw(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Sw(t.bundledQuery),readTime:xw(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Pw(e).put(function(e){return{name:e.name,readTime:bw(Kk(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Dw(e){return Pm(e,"bundles")}function Pw(e){return Pm(e,"namedQueries")}var Rw=function(){function e(t,n){Ne(this,e),this.serializer=t,this.userId=n}return De(e,[{key:"getOverlay",value:function(e,t){var n=this;return Ow(e).get(Cw(this.userId,t)).next((function(e){return e?Tw(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Sg();return Bv.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new mk(t,a);i.push(r.we(e,o))})),Bv.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(im(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Ow(e).J("collectionPathOverlayIndex",i))})),Bv.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Sg(),a=im(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Ow(e).j("collectionPathOverlayIndex",o).next((function(e){var t,n=Pe(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Tw(r.serializer,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Sg(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ow(e).X({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Tw(a.serializer,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"we",value:function(e,t){return Ow(e).put(function(e,t,n){var r=Se(Cw(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:rw(e.fe,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"de",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Ow(e){return Pm(e,"documentOverlays")}var Lw=function(){function e(){Ne(this,e)}return De(e,[{key:"_e",value:function(e,t){this.me(e,t),t.ge()}},{key:"me",value:function(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Hm(e.integerValue));else if("doubleValue"in e){var n=Hm(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),nm(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie("".concat(r.seconds||"")),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Qm(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ye(t,45),t.pe(i.latitude||0),t.pe(i.longitude||0)}else"mapValue"in e?my(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):rv()}},{key:"Te",value:function(e,t){this.ye(t,25),this.be(e,t)}},{key:"be",value:function(e,t){t.Ie(e)}},{key:"Re",value:function(e,t){var n=e.fields||{};this.ye(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.Te(a,t),this.me(n[a],t)}}},{key:"Pe",value:function(e,t){var n=e.values||[];this.ye(t,50);var r,i=Pe(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.me(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ve",value:function(e,t){var n=this;this.ye(t,37),Cv.fromName(e).path.forEach((function(e){n.ye(t,60),n.be(e,t)}))}},{key:"ye",value:function(e,t){e.pe(t)}},{key:"Ee",value:function(e){e.pe(2)}}]),e}();function Mw(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Fw(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Mw(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Lw.Ve=new Lw;var Uw=function(){function e(){Ne(this,e),this.buffer=new Uint8Array(1024),this.position=0}return De(e,[{key:"Se",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.De(n.value),n=t.next();this.Ce()}},{key:"xe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ne(n.value),n=t.next();this.ke()}},{key:"Me",value:function(e){var t,n=Pe(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.De(i);else if(i<2048)this.De(960|i>>>6),this.De(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.De(480|i>>>12),this.De(128|63&i>>>6),this.De(128|63&i);else{var a=r.codePointAt(0);this.De(240|a>>>18),this.De(128|63&a>>>12),this.De(128|63&a>>>6),this.De(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ce()}},{key:"$e",value:function(e){var t,n=Pe(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ne(i);else if(i<2048)this.Ne(960|i>>>6),this.Ne(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ne(480|i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i);else{var a=r.codePointAt(0);this.Ne(240|a>>>18),this.Ne(128|63&a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ke()}},{key:"Oe",value:function(e){var t=this.Fe(e),n=Fw(t);this.Be(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Le",value:function(e){var t=this.Fe(e),n=Fw(t);this.Be(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"qe",value:function(){this.Ue(255),this.Ue(255)}},{key:"Ke",value:function(){this.Ge(255),this.Ge(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Qe",value:function(){return this.buffer.slice(0,this.position)}},{key:"Fe",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"De",value:function(e){var t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}},{key:"Ne",value:function(e){var t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}},{key:"Ce",value:function(){this.Ue(0),this.Ue(1)}},{key:"ke",value:function(){this.Ge(0),this.Ge(1)}},{key:"Ue",value:function(e){this.Be(1),this.buffer[this.position++]=e}},{key:"Ge",value:function(e){this.Be(1),this.buffer[this.position++]=~e}},{key:"Be",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),jw=function(){function e(t){Ne(this,e),this.je=t}return De(e,[{key:"Ae",value:function(e){this.je.Se(e)}},{key:"Ie",value:function(e){this.je.Me(e)}},{key:"pe",value:function(e){this.je.Oe(e)}},{key:"ge",value:function(){this.je.qe()}}]),e}(),Vw=function(){function e(t){Ne(this,e),this.je=t}return De(e,[{key:"Ae",value:function(e){this.je.xe(e)}},{key:"Ie",value:function(e){this.je.$e(e)}},{key:"pe",value:function(e){this.je.Le(e)}},{key:"ge",value:function(){this.je.Ke()}}]),e}(),zw=function(){function e(){Ne(this,e),this.je=new Uw,this.ze=new jw(this.je),this.We=new Vw(this.je)}return De(e,[{key:"seed",value:function(e){this.je.seed(e)}},{key:"He",value:function(e){return 0===e?this.ze:this.We}},{key:"Qe",value:function(){return this.je.Qe()}},{key:"reset",value:function(){this.je.reset()}}]),e}(),Bw=function(){function e(t,n,r,i){Ne(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return De(e,[{key:"Je",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function qw(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Gw(e.arrayValue,t.arrayValue))?n:0!==(n=Gw(e.directionalValue,t.directionalValue))?n:Cv.comparator(e.documentKey,t.documentKey)}function Gw(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Kw=function(){function e(t){Ne(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ye=t.orderBy,this.Xe=[];var n,r=Pe(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Ze=i:this.Xe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return De(e,[{key:"tn",value:function(e){iv(e.collectionGroup===this.collectionId);var t=Av(e);if(void 0!==t&&!this.en(t))return!1;for(var n=Dv(e),r=0,i=0;r<n.length&&this.en(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Ze){var a=n[r];if(!this.nn(this.Ze,a)||!this.sn(this.Ye[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ye.length||!this.sn(this.Ye[i++],o))return!1}return!0}},{key:"en",value:function(e){var t,n=Pe(this.Xe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.nn(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"nn",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"sn",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function Ww(e){var t,n;if(iv(e instanceof Ay||e instanceof Dy),e instanceof Ay){if(e instanceof Ky){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return Ay.create(e.field,"==",t)})))||[];return Dy.create(r,"or")}return e}var i=e.filters.map((function(e){return Ww(e)}));return Dy.create(i,e.op)}function Hw(e){if(0===e.getFilters().length)return[];var t=Xw(Ww(e));return iv($w(t)),Qw(t)||Yw(t)?[t]:t.getFilters()}function Qw(e){return e instanceof Ay}function Yw(e){return e instanceof Dy&&Oy(e)}function $w(e){return Qw(e)||Yw(e)||function(e){if(e instanceof Dy&&Ry(e)){var t,n=Pe(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!Qw(r)&&!Yw(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function Xw(e){if(iv(e instanceof Ay||e instanceof Dy),e instanceof Ay)return e;if(1===e.filters.length)return Xw(e.filters[0]);var t=e.filters.map((function(e){return Xw(e)})),n=Dy.create(t,e.op);return $w(n=eb(n))?n:(iv(n instanceof Dy),iv(Py(n)),iv(n.filters.length>1),n.filters.reduce((function(e,t){return Jw(e,t)})))}function Jw(e,t){var n;return iv(e instanceof Ay||e instanceof Dy),iv(t instanceof Ay||t instanceof Dy),n=e instanceof Ay?t instanceof Ay?function(e,t){return Dy.create([e,t],"and")}(e,t):Zw(e,t):t instanceof Ay?Zw(t,e):function(e,t){if(iv(e.filters.length>0&&t.filters.length>0),Py(e)&&Py(t))return Uy(e,t.getFilters());var n=Ry(e)?e:t,r=Ry(e)?t:e,i=n.filters.map((function(e){return Jw(e,r)}));return Dy.create(i,"or")}(e,t),eb(n)}function Zw(e,t){if(Py(t))return Uy(t,e.getFilters());var n=t.filters.map((function(t){return Jw(e,t)}));return Dy.create(n,"or")}function eb(e){if(iv(e instanceof Ay||e instanceof Dy),e instanceof Ay)return e;var t=e.getFilters();if(1===t.length)return eb(t[0]);if(Ly(e))return e;var n=t.map((function(e){return eb(e)})),r=[];return n.forEach((function(t){t instanceof Ay?r.push(t):t instanceof Dy&&(t.op===e.op?r.push.apply(r,gt(t.filters)):r.push(t))})),1===r.length?r[0]:Dy.create(r,e.op)}var tb=function(){function e(){Ne(this,e),this.rn=new nb}return De(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.rn.add(t),Bv.resolve()}},{key:"getCollectionParents",value:function(e,t){return Bv.resolve(this.rn.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Bv.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Bv.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Bv.resolve(null)}},{key:"getIndexType",value:function(e,t){return Bv.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Bv.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Bv.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Bv.resolve(Mv.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Bv.resolve(Mv.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Bv.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Bv.resolve()}}]),e}(),nb=function(){function e(){Ne(this,e),this.index={}}return De(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new jm(Ev.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new jm(Ev.comparator)).toArray()}}]),e}(),rb=new Uint8Array(0),ib=function(){function e(t,n){Ne(this,e),this.user=t,this.databaseId=n,this.on=new nb,this.un=new wg((function(e){return $y(e)}),(function(e,t){return Xy(e,t)})),this.uid=t.uid||""}return De(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.on.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.on.add(t)}));var a={collectionId:r,parent:im(i)};return ab(e).put(a)}return Bv.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[bv(t),""],!1,!0);return ab(e).j(r).next((function(e){var r,i=Pe(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(um(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=ub(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=sb(e);return a.next((function(e){o.put(Nw(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=ub(e),r=sb(e),i=ob(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=ob(e),i=!0,a=new Map;return Bv.forEach(this.cn(t),(function(t){return n.an(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Dg(),o=[];return Bv.forEach(a,(function(i,a){var u;Zp("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat($y(t)));var s=function(e,t){var n=Av(t);if(void 0===n)return null;var r,i=Pe(Zy(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=Pe(Dv(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=Pe(Zy(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=Pe(Dv(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?eg(e,o.fieldPath,e.startAt):tg(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Iy(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=Pe(Dv(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?tg(e,o.fieldPath,e.endAt):eg(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Iy(r,i)}(a,i),h=n.hn(i,a,l),d=n.hn(i,a,f),p=n.ln(i,a,c),v=n.fn(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return Bv.forEach(v,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=Cv.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Bv.resolve(null)}))}},{key:"cn",value:function(e){var t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Hw(Dy.create(e.filters,"and")).map((function(t){return Yy(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.un.set(e,t),t)}},{key:"fn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(){var s=t?u.dn(t[h/c]):rb,f=u.wn(e,s,n[h%c],r),d=u._n(e,s,i[h%c],a),p=o.map((function(t){return u.wn(e,s,t,!0)}));l.push.apply(l,gt(u.createRange(f,d,p)))},h=0;h<s;++h)f();return l}},{key:"wn",value:function(e,t,n,r){var i=new Bw(e,Cv.empty(),t,n);return r?i:i.Je()}},{key:"_n",value:function(e,t,n,r){var i=new Bw(e,Cv.empty(),t,n);return r?i.Je():i}},{key:"an",value:function(e,t){var n=new Kw(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=Pe(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.tn(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.cn(t);return Bv.forEach(i,(function(t){return n.an(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new jm(Tv.comparator),r=!1,i=Pe(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=Pe(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=Pe(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"mn",value:function(e,t){var n,r=new zw,i=Pe(Dv(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.He(a.kind);Lw.Ve._e(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Qe()}},{key:"dn",value:function(e){var t=new zw;return Lw.Ve._e(e,t.He(0)),t.Qe()}},{key:"gn",value:function(e,t){var n=new zw;return Lw.Ve._e(cy(this.databaseId,t),n.He(function(e){var t=Dv(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Qe()}},{key:"ln",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new zw);var i,a=0,o=Pe(Dv(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=Pe(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.yn(t,s.fieldPath)&&fy(c))r=this.pn(r,s,c);else{var h=f.He(s.kind);Lw.Ve._e(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.In(r)}},{key:"hn",value:function(e,t,n){return this.ln(e,t,n.position)}},{key:"In",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Qe();return t}},{key:"pn",value:function(e,t,n){var r,i=gt(e),a=[],o=Pe(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=Pe(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new zw;f.seed(l.Qe()),Lw.Ve._e(s,f.He(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"yn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Ay&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=ub(e),i=sb(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next((function(e){var t=[];return Bv.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Rv(t.sequenceNumber,new Mv(xw(t.readTime),new Cv(um(t.documentKey)),t.largestBatchId)):Rv.empty(),r=e.fields.map((function(e){var t=Se(e,2),n=t[0],r=t[1];return new Pv(Tv.fromServerFormat(n),r)}));return new Nv(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:kv(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=ub(e),a=sb(e);return this.Tn(e).next((function(e){return i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Bv.forEach(t,(function(t){return a.put(Nw(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Bv.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Bv.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Bv.forEach(a,(function(r){return n.En(e,t,r).next((function(t){var a=n.An(i,r);return t.isEqual(a)?Bv.resolve():n.vn(e,i,r,t,a)}))}))}))}))}},{key:"Rn",value:function(e,t,n,r){return ob(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"Pn",value:function(e,t,n,r){return ob(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(n,t.key),t.key.path.toArray()])}},{key:"En",value:function(e,t,n){var r=ob(e),i=new jm(qw);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.gn(n,t)])},(function(e,r){i=i.add(new Bw(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"An",value:function(e,t){var n=new jm(qw),r=this.mn(t,e);if(null==r)return n;var i=Av(t);if(null!=i){var a=e.data.field(i.fieldPath);if(fy(a)){var o,u=Pe(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Bw(t.indexId,e.key,this.dn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new Bw(t.indexId,e.key,rb,r));return n}},{key:"vn",value:function(e,t,n,r,i){var a=this;Zp("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=zm(a),s=zm(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=zm(o)):l?(i(u),u=zm(a)):(u=zm(a),s=zm(o))}}(r,i,qw,(function(r){o.push(a.Rn(e,t,n,r))}),(function(r){o.push(a.Pn(e,t,n,r))})),Bv.waitFor(o)}},{key:"Tn",value:function(e){var t=1;return sb(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return qw(e,t)})).filter((function(e,t,n){return!t||0!==qw(e,n[t-1])}));var r=[];r.push(e);var i,a=Pe(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=qw(o,e),s=qw(o,t);if(0===u)r[0]=e.Je();else if(u>0&&s<0)r.push(o),r.push(o.Je());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.bn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,rb,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,rb,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"bn",value:function(e,t){return qw(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(cb)}},{key:"getMinOffset",value:function(e,t){var n=this;return Bv.mapArray(this.cn(t),(function(t){return n.an(e,t).next((function(e){return e||rv()}))})).next(cb)}}]),e}();function ab(e){return Pm(e,"collectionParents")}function ob(e){return Pm(e,"indexEntries")}function ub(e){return Pm(e,"indexConfiguration")}function sb(e){return Pm(e,"indexState")}function cb(e){iv(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Fv(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Mv(t.readTime,t.documentKey,n)}var lb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},fb=function(){function e(t,n,r){Ne(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return De(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function hb(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.X({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){iv(1===u)})));var c,l=[],f=Pe(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=lm(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Bv.waitFor(a).next((function(){return l}))}function db(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw rv();t=e.noDocument}return JSON.stringify(t).length}fb.DEFAULT_COLLECTION_PERCENTILE=10,fb.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fb.DEFAULT=new fb(41943040,fb.DEFAULT_COLLECTION_PERCENTILE,fb.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fb.DISABLED=new fb(-1,0,0);var pb=function(){function e(t,n,r,i){Ne(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}return De(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return mb(e).X({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=yb(e),o=mb(e);return o.add({}).next((function(u){iv("number"==typeof u);var s,c=new pk(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return rw(e.fe,t)})),i=n.mutations.map((function(t){return rw(e.fe,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new jm((function(e,t){return kv(e.canonicalString(),t.canonicalString())})),d=Pe(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=lm(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,fm))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Vn[u]=c.keys()})),Bv.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return mb(e).get(t).next((function(e){return e?(iv(e.userId===n.userId),_w(n.serializer,e)):null}))}},{key:"Sn",value:function(e,t){var n=this;return this.Vn[t]?Bv.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Vn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return mb(e).X({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(iv(t.batchId>=r),a=_w(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return mb(e).X({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return mb(e).j("userMutationsIndex",n).next((function(e){return e.map((function(e){return _w(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=cm(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return yb(e).X({range:i},(function(r,i,o){var u=Se(r,3),s=u[0],c=u[1],l=u[2],f=um(c);if(s===n.userId&&t.path.isEqual(f))return mb(e).get(l).next((function(e){if(!e)throw rv();iv(e.userId===n.userId),a.push(_w(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new jm(kv),i=[];return t.forEach((function(t){var a=cm(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=yb(e).X({range:o},(function(e,i,a){var o=Se(e,3),u=o[0],s=o[1],c=o[2],l=um(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),Bv.waitFor(i).next((function(){return n.Dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=cm(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new jm(kv);return yb(e).X({range:o},(function(e,t,a){var o=Se(e,3),s=o[0],c=o[1],l=o[2],f=um(c);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.Dn(e,u)}))}},{key:"Dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(mb(e).get(t).next((function(e){if(null===e)throw rv();iv(e.userId===n.userId),r.push(_w(n.serializer,e))})))})),Bv.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return hb(e.ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Cn(t.batchId)})),Bv.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Cn",value:function(e){delete this.Vn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Bv.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return yb(e).X({range:r},(function(e,n,r){if(e[0]===t.userId){var a=um(e[1]);i.push(a)}else r.done()})).next((function(){iv(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return vb(e,this.userId,t)}},{key:"xn",value:function(e){var t=this;return gb(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"de",value:function(t,n,r,i){return iv(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function vb(e,t,n){var r=cm(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return yb(e).X({range:a,Y:!0},(function(e,n,r){var a=Se(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function mb(e){return Pm(e,"mutations")}function yb(e){return Pm(e,"documentMutations")}function gb(e){return Pm(e,"mutationQueues")}var kb=function(){function e(t){Ne(this,e),this.Nn=t}return De(e,[{key:"next",value:function(){return this.Nn+=2,this.Nn}}],[{key:"kn",value:function(){return new e(0)}},{key:"Mn",value:function(){return new e(-1)}}]),e}(),wb=function(){function e(t,n){Ne(this,e),this.referenceDelegate=t,this.serializer=n}return De(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.$n(e).next((function(n){var r=new kb(n.highestTargetId);return n.highestTargetId=r.next(),t.On(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.$n(e).next((function(e){return _v.fromTimestamp(new xv(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.$n(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.$n(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.On(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Fn(e,t).next((function(){return n.$n(e).next((function(r){return r.targetCount+=1,n.Bn(t,r),n.On(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Fn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return bb(e).delete(t.targetId)})).next((function(){return n.$n(e)})).next((function(t){return iv(t.targetCount>0),t.targetCount-=1,n.On(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return bb(e).X((function(o,u){var s=Iw(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Bv.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return bb(e).X((function(e,n){var r=Iw(n);t(r)}))}},{key:"$n",value:function(e){return xb(e).get("targetGlobalKey").next((function(e){return iv(null!==e),e}))}},{key:"On",value:function(e,t){return xb(e).put("targetGlobalKey",t)}},{key:"Fn",value:function(e,t){return bb(e).put(Ew(this.serializer,t))}},{key:"Bn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.$n(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=$y(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return bb(e).X({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Iw(n);Xy(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=_b(e);return t.forEach((function(t){var o=im(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Bv.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=_b(e);return Bv.forEach(t,(function(t){var a=im(t.path);return Bv.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=_b(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=_b(e),i=Dg();return r.X({range:n,Y:!0},(function(e,t,n){var r=um(e[1]),a=new Cv(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=im(t.path),r=IDBKeyRange.bound([n],[bv(n)],!1,!0),i=0;return _b(e).X({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=Se(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"le",value:function(e,t){return bb(e).get(t).next((function(e){return e?Iw(e):null}))}}]),e}();function bb(e){return Pm(e,"targets")}function xb(e){return Pm(e,"targetGlobal")}function _b(e){return Pm(e,"targetDocuments")}function Ib(e,t){var n=Se(e,2),r=n[0],i=n[1],a=Se(t,2),o=a[0],u=a[1],s=kv(r,o);return 0===s?kv(i,u):s}var Eb=function(){function e(t){Ne(this,e),this.Ln=t,this.buffer=new jm(Ib),this.qn=0}return De(e,[{key:"Un",value:function(){return++this.qn}},{key:"Kn",value:function(e){var t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Ib(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Sb=function(){function e(t,n,r){Ne(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Gn=null}return De(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}},{key:"stop",value:function(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}},{key:"started",get:function(){return null!==this.Gn}},{key:"Qn",value:function(e){var t=this;Zp("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Gn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Hv(e.t0)){e.next=12;break}Zp("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Vv(e.t0);case 14:return e.next=16,t.Qn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),Tb=function(){function e(t,n){Ne(this,e),this.jn=t,this.params=n}return De(e,[{key:"calculateTargetCount",value:function(e,t){return this.jn.zn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Bv.resolve(em.ct);var r=new Eb(t);return this.jn.forEachTarget(e,(function(e){return r.Kn(e.sequenceNumber)})).next((function(){return n.jn.Wn(e,(function(e){return r.Kn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.jn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.jn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Zp("LruGarbageCollector","Garbage collection skipped; disabled"),Bv.resolve(lb)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Zp("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),lb):n.Hn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.jn.getCacheSize(e)}},{key:"Hn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Zp("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Jp()<=_t.DEBUG&&Zp("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Bv.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function Cb(e,t){return new Tb(e,t)}var Nb=function(){function e(t,n){Ne(this,e),this.db=t,this.garbageCollector=Cb(this,n)}return De(e,[{key:"zn",value:function(e){var t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Jn",value:function(e){var t=0;return this.Wn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Wn",value:function(e,t){return this.Yn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Ab(e,n)}},{key:"removeReference",value:function(e,t,n){return Ab(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Ab(e,t)}},{key:"Xn",value:function(e,t){return function(e,t){var n=!1;return gb(e).Z((function(r){return vb(e,r,t).next((function(e){return e&&(n=!0),Bv.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Yn(e,(function(o,u){if(u<=t){var s=n.Xn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,_v.min()),_b(e).delete([0,im(o.path)])}))}));i.push(s)}})).next((function(){return Bv.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Ab(e,t)}},{key:"Yn",value:function(e,t){var n,r=_b(e),i=em.ct;return r.X({index:"documentTargetsIndex"},(function(e,r){var a=Se(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==em.ct&&t(new Cv(um(n)),i),i=s,n=u):i=em.ct})).next((function(){i!==em.ct&&t(new Cv(um(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Ab(e,t){return _b(e).put(function(e,t){return{targetId:0,path:im(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Db=function(){function e(){Ne(this,e),this.changes=new wg((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return De(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,_y.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Bv.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Pb=function(){function e(t){Ne(this,e),this.serializer=t}return De(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Mb(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Mb(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],ww(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Zn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=_y.newInvalidDocument(t);return Mb(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Fb(t))},(function(e,i){r=n.ts(t,i)})).next((function(){return r}))}},{key:"es",value:function(e,t){var n=this,r={size:0,document:_y.newInvalidDocument(t)};return Mb(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Fb(t))},(function(e,i){r={document:n.ts(t,i),size:db(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=xg();return this.ns(e,t,(function(e,t){var i=n.ts(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"ss",value:function(e,t){var n=this,r=xg(),i=new Mm(Cv.comparator);return this.ns(e,t,(function(e,t){var a=n.ts(e,t);r=r.insert(e,a),i=i.insert(e,db(t))})).next((function(){return{documents:r,rs:i}}))}},{key:"ns",value:function(e,t,n){if(t.isEmpty())return Bv.resolve();var r=new jm(jb);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Fb(r.first()),Fb(r.last())),a=r.getIterator(),o=a.getNext();return Mb(e).X({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Cv.fromSegments([].concat(gt(t.prefixPath),[t.collectionGroup,t.documentId]));o&&jb(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.G(Fb(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),ww(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Mb(e).j(IDBKeyRange.bound(o,u,!0)).next((function(e){var n,a=xg(),o=Pe(e);try{for(o.s();!(n=o.n()).done;){var u=n.value,s=i.ts(Cv.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s.isFoundDocument()&&(mg(t,s)||r.has(s.key))&&(a=a.insert(s.key,s))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=xg(),o=Ub(t,n),u=Ub(t,Mv.max());return Mb(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.ts(Cv.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Ob(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Lb(e).get("remoteDocumentGlobalKey").next((function(e){return iv(!!e),e}))}},{key:"Zn",value:function(e,t){return Lb(e).put("remoteDocumentGlobalKey",t)}},{key:"ts",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=tw(e.fe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Cv.fromSegments(t.noDocument.path),i=xw(t.noDocument.readTime);n=_y.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return rv();var a=Cv.fromSegments(t.unknownDocument.path),o=xw(t.unknownDocument.version);n=_y.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new xv(e[0],e[1]);return _v.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(_v.min()))return n}return _y.newInvalidDocument(e)}}]),e}();function Rb(e){return new Pb(e)}var Ob=function(e){Oe(n,e);var t=Fe(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this)).os=e,i.trackRemovals=r,i.us=new wg((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return De(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new jm((function(e,t){return kv(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.us.get(a);if(n.push(t.os.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=kw(t.os.serializer,o);i=i.add(a.path.popLast());var c=db(s);r+=c-u.size,n.push(t.os.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=kw(t.os.serializer,o.convertToNoDocument(_v.min()));n.push(t.os.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.os.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.os.updateMetadata(e,r)),Bv.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.os.es(e,t).next((function(e){return n.us.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.os.ss(e,t).next((function(e){var t=e.documents;return e.rs.forEach((function(e,r){n.us.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Db);function Lb(e){return Pm(e,"remoteDocumentGlobal")}function Mb(e){return Pm(e,"remoteDocumentsV14")}function Fb(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Ub(e,t){var n=t.documentKey.path.toArray();return[e,ww(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function jb(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=kv(n[a],r[a]))return i;return(i=kv(n.length,r.length))||((i=kv(n[n.length-2],r[r.length-2]))||kv(n[n.length-1],r[r.length-1]))}var Vb=De((function e(t,n){Ne(this,e),this.overlayedDocument=t,this.mutatedFields=n})),zb=function(){function e(t,n,r,i){Ne(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return De(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&nk(r.mutation,e,Bm.empty(),xv.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Dg()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Dg(),i=Sg();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Ig();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Sg();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Dg())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=xg(),a=Cg(),o=Cg();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof ok)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),nk(o.mutation,t,o.mutation.getFieldMask(),xv.now())):a.set(t.key,Bm.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Vb(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Cg(),i=new Mm((function(e,t){return e-t})),a=Dg();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=Pe(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Bm.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||Dg()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=Tg();c.forEach((function(e){if(!a.has(e)){var n=ek(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Bv.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Cv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):sg(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Bv.resolve(Sg()),u=-1,s=a;return o.next((function(t){return Bv.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Bv.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,Dg())})).next((function(e){return{batchId:u,changes:Eg(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Cv(t)).next((function(e){var t=Ig();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Ig();return this.indexManager.getCollectionParents(e,i).next((function(o){return Bv.forEach(o,(function(o){var u=function(e,t){return new ng(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,_y.newInvalidDocument(r)))}));var n=Ig();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&nk(a.mutation,i,Bm.empty(),xv.now()),mg(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),Bb=function(){function e(t){Ne(this,e),this.serializer=t,this.cs=new Map,this.hs=new Map}return De(e,[{key:"getBundleMetadata",value:function(e,t){return Bv.resolve(this.cs.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:Kk(n.createTime)}),Bv.resolve()}},{key:"getNamedQuery",value:function(e,t){return Bv.resolve(this.hs.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:Sw(e.bundledQuery),readTime:Kk(e.readTime)}}(t)),Bv.resolve()}}]),e}(),qb=function(){function e(){Ne(this,e),this.overlays=new Mm(Cv.comparator),this.ls=new Map}return De(e,[{key:"getOverlay",value:function(e,t){return Bv.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Sg();return Bv.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.we(e,t,i)})),Bv.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ls.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ls.delete(n)),Bv.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Sg(),i=t.length+1,a=new Cv(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Bv.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Mm((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Sg(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Sg(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Bv.resolve(s)}},{key:"we",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new mk(t,n));var a=this.ls.get(t);void 0===a&&(a=Dg(),this.ls.set(t,a)),this.ls.set(t,a.add(n.key))}}]),e}(),Gb=function(){function e(){Ne(this,e),this.fs=new jm(Kb.ds),this.ws=new jm(Kb._s)}return De(e,[{key:"isEmpty",value:function(){return this.fs.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Kb(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}},{key:"gs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.ys(new Kb(e,t))}},{key:"ps",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Is",value:function(e){var t=this,n=new Cv(new Ev([])),r=new Kb(n,e),i=new Kb(n,e+1),a=[];return this.ws.forEachInRange([r,i],(function(e){t.ys(e),a.push(e.key)})),a}},{key:"Ts",value:function(){var e=this;this.fs.forEach((function(t){return e.ys(t)}))}},{key:"ys",value:function(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}},{key:"Es",value:function(e){var t=new Cv(new Ev([])),n=new Kb(t,e),r=new Kb(t,e+1),i=Dg();return this.ws.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Kb(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Kb=function(){function e(t,n){Ne(this,e),this.key=t,this.As=n}return De(e,null,[{key:"ds",value:function(e,t){return Cv.comparator(e.key,t.key)||kv(e.As,t.As)}},{key:"_s",value:function(e,t){return kv(e.As,t.As)||Cv.comparator(e.key,t.key)}}]),e}(),Wb=function(){function e(t,n){Ne(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new jm(Kb.ds)}return De(e,[{key:"checkEmpty",value:function(e){return Bv.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new pk(i,t,n,r);this.mutationQueue.push(a);var o,u=Pe(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Rs=this.Rs.add(new Kb(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Bv.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Bv.resolve(this.Ps(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.bs(n),i=r<0?0:r;return Bv.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Bv.resolve(0===this.mutationQueue.length?-1:this.vs-1)}},{key:"getAllMutationBatches",value:function(e){return Bv.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Kb(t,0),i=new Kb(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],(function(e){var t=n.Ps(e.As);a.push(t)})),Bv.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new jm(kv);return t.forEach((function(e){var t=new Kb(e,0),i=new Kb(e,Number.POSITIVE_INFINITY);n.Rs.forEachInRange([t,i],(function(e){r=r.add(e.As)}))})),Bv.resolve(this.Vs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Cv.isDocumentKey(i)||(i=i.child(""));var a=new Kb(new Cv(i),0),o=new jm(kv);return this.Rs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.As)),!0)}),a),Bv.resolve(this.Vs(o))}},{key:"Vs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Ps(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;iv(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();var r=this.Rs;return Bv.forEach(t.mutations,(function(i){var a=new Kb(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Rs=r}))}},{key:"Cn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Kb(t,0),r=this.Rs.firstAfterOrEqual(n);return Bv.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Bv.resolve()}},{key:"Ss",value:function(e,t){return this.bs(e)}},{key:"bs",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"Ps",value:function(e){var t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Hb=function(){function e(t){Ne(this,e),this.Ds=t,this.docs=new Mm(Cv.comparator),this.size=0}return De(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Bv.resolve(n?n.document.mutableCopy():_y.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=xg();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():_y.newInvalidDocument(e))})),Bv.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=xg(),a=t.path,o=new Cv(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Fv(Lv(l),n)<=0||(r.has(l.key)||mg(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return Bv.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){rv()}},{key:"Cs",value:function(e,t){return Bv.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Qb(this)}},{key:"getSize",value:function(e){return Bv.resolve(this.size)}}]),e}(),Qb=function(e){Oe(n,e);var t=Fe(n);function n(e){var r;return Ne(this,n),(r=t.call(this)).os=e,r}return De(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.os.addEntry(e,i)):t.os.removeEntry(r)})),Bv.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.os.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.os.getEntries(e,t)}}]),n}(Db),Yb=function(){function e(t){Ne(this,e),this.persistence=t,this.xs=new wg((function(e){return $y(e)}),Xy),this.lastRemoteSnapshotVersion=_v.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Gb,this.targetCount=0,this.Ms=kb.kn()}return De(e,[{key:"forEachTarget",value:function(e,t){return this.xs.forEach((function(e,n){return t(n)})),Bv.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Bv.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Bv.resolve(this.Ns)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ms.next(),Bv.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),Bv.resolve()}},{key:"Fn",value:function(e){this.xs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ms=new kb(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Fn(t),this.targetCount+=1,Bv.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Fn(t),Bv.resolve()}},{key:"removeTargetData",value:function(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,Bv.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.xs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.xs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Bv.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Bv.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.xs.get(t)||null;return Bv.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.ks.gs(t,n),Bv.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.ks.ps(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Bv.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.ks.Is(t),Bv.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.ks.Es(t);return Bv.resolve(n)}},{key:"containsKey",value:function(e,t){return Bv.resolve(this.ks.containsKey(t))}}]),e}(),$b=function(){function e(t,n){var r=this;Ne(this,e),this.$s={},this.overlays={},this.Os=new em(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=t(this),this.Bs=new Yb(this),this.indexManager=new tb,this.remoteDocumentCache=new Hb((function(e){return r.referenceDelegate.Ls(e)})),this.serializer=new gw(n),this.qs=new Bb(this.serializer)}return De(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Fs=!1,Promise.resolve()}},{key:"started",get:function(){return this.Fs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new qb,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.$s[e.toKey()];return n||(n=new Wb(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var r=this;Zp("MemoryPersistence","Starting transaction:",e);var i=new Xb(this.Os.next());return this.referenceDelegate.Us(),n(i).next((function(e){return r.referenceDelegate.Ks(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Gs",value:function(e,t){return Bv.or(Object.values(this.$s).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Xb=function(e){Oe(n,e);var t=Fe(n);function n(e){var r;return Ne(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return De(n)}(jv),Jb=function(){function e(t){Ne(this,e),this.persistence=t,this.Qs=new Gb,this.js=null}return De(e,[{key:"Ws",get:function(){if(this.js)return this.js;throw rv()}},{key:"addReference",value:function(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),Bv.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),Bv.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ws.add(t.toString()),Bv.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Qs.Is(t.targetId).forEach((function(e){return n.Ws.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ws.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Us",value:function(){this.js=new Set}},{key:"Ks",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Bv.forEach(this.Ws,(function(r){var i=Cv.fromPath(r);return t.Hs(e,i).next((function(e){e||n.removeEntry(i,_v.min())}))})).next((function(){return t.js=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hs(e,t).next((function(e){e?n.Ws.delete(t.toString()):n.Ws.add(t.toString())}))}},{key:"Ls",value:function(e){return 0}},{key:"Hs",value:function(e,t){var n=this;return Bv.or([function(){return Bv.resolve(n.Qs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Gs(e,t)}])}}],[{key:"zs",value:function(t){return new e(t)}}]),e}(),Zb=function(){function e(t){Ne(this,e),this.serializer=t}return De(e,[{key:"O",value:function(e,t,n,r){var i=this,a=new qv("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",sm,{unique:!0}),e.createObjectStore("documentMutations")}(e),ex(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Bv.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),ex(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:_v.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").j().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",sm,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Bv.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Ys(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Xs(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Zs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.ti(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ei(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:_m});t.createIndex("collectionPathOverlayIndex",Im,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Em,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:hm});t.createIndex("documentKeyIndex",dm),t.createIndex("collectionGroupIndex",pm)}(e)})).next((function(){return i.ni(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.si(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:km}).createIndex("sequenceNumberIndex",wm,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:bm}).createIndex("documentKeyIndex",xm,{unique:!1})}(e)}))),o}},{key:"Xs",value:function(e){var t=0;return e.store("remoteDocuments").X((function(e,n){t+=db(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Ys",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.j().next((function(n){return Bv.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",i).next((function(r){return Bv.forEach(r,(function(r){iv(r.userId===n.userId);var i=_w(t.serializer,r);return hb(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Zs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.X((function(n,i){var a=new Ev(n),o=function(e){return[0,im(e)]}(a);r.push(t.get(o).next((function(n){return n?Bv.resolve():function(n){return t.put({targetId:0,path:im(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Bv.waitFor(r)}))}))}},{key:"ti",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:gm});var n=t.store("collectionParents"),r=new nb,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:im(i)})}};return t.store("remoteDocuments").X({Y:!0},(function(e,t){var n=new Ev(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").X({Y:!0},(function(e,t){var n=Se(e,3),r=(n[0],n[1]),a=(n[2],um(r));return i(a.popLast())}))}))}},{key:"ei",value:function(e){var t=this,n=e.store("targets");return n.X((function(e,r){var i=Iw(r),a=Ew(t.serializer,i);return n.put(a)}))}},{key:"ni",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.X((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Cv(Ev.fromString(i.document.name).popFirst(5)):i.noDocument?Cv.fromSegments(i.noDocument.path):i.unknownDocument?Cv.fromSegments(i.unknownDocument.path):rv()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Bv.waitFor(r)}))}},{key:"si",value:function(e,t){var n=this,r=t.store("mutations"),i=Rb(this.serializer),a=new $b(Jb.zs,this.serializer.fe);return r.j().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Dg();_w(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Bv.forEach(r,(function(e,r){var o=new Yp(r),u=Rw.de(n.serializer,o),s=a.getIndexManager(o),c=pb.de(o,n.serializer,s,a.referenceDelegate);return new zb(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new Dm(t,em.ct),e).next()}))}))}}]),e}();function ex(e){e.createObjectStore("targetDocuments",{keyPath:mm}).createIndex("documentTargetsIndex",ym,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",vm,{unique:!0}),e.createObjectStore("targetGlobal")}var tx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",nx=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(Ne(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.ii=a,this.window=o,this.document=u,this.ri=c,this.oi=l,this.ui=f,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=function(e){return Promise.resolve()},!e.D())throw new uv(ov.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Nb(this,i),this.di=n+"main",this.serializer=new gw(s),this.wi=new Gv(this.di,this.ui,new Zb(this.serializer)),this.Bs=new wb(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Rb(this.serializer),this.qs=new Aw,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===l&&ev("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return De(e,[{key:"start",value:function(){var e=this;return this.mi().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new uv(ov.FAILED_PRECONDITION,tx);return e.gi(),e.yi(),e.pi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Bs.getHighestSequenceNumber(t)}))})).then((function(t){e.Os=new em(t,e.ri)})).then((function(){e.Fs=!0})).catch((function(t){return e.wi&&e.wi.close(),Promise.reject(t)}))}},{key:"Ii",value:function(e){var t=this;return this.fi=function(){var n=be(ke().mark((function n(r){return ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.wi.B(function(){var t=be(ke().mark((function t(n){return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget(be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.mi();case 4:case"end":return e.stop()}}),e)})))))}},{key:"mi",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return ix(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Ti(t).next((function(t){t||(e.isPrimary=!1,e.ii.enqueueRetryable((function(){return e.fi(!1)})))}))})).next((function(){return e.Ei(t)})).next((function(n){return e.isPrimary&&!n?e.Ai(t).next((function(){return!1})):!!n&&e.vi(t).next((function(){return!0}))}))})).catch((function(t){if(Hv(t))return Zp("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Zp("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.ii.enqueueRetryable((function(){return e.fi(t)})),e.isPrimary=t}))}},{key:"Ti",value:function(e){var t=this;return rx(e).get("owner").next((function(e){return Bv.resolve(t.Ri(e))}))}},{key:"Pi",value:function(e){return ix(e).delete(this.clientId)}},{key:"bi",value:function(){var e=be(ke().mark((function e(){var t,n,r,i,a=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Vi(this.li,18e5)){e.next=6;break}return this.li=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Pm(e,"clientMetadata");return t.j().next((function(e){var n=a.Si(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Bv.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this._i){n=Pe(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this._i.removeItem(this.Di(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pi",value:function(){var e=this;this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.mi().then((function(){return e.bi()})).then((function(){return e.pi()}))}))}},{key:"Ri",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Ei",value:function(e){var t=this;return this.oi?Bv.resolve(!0):rx(e).get("owner").next((function(n){if(null!==n&&t.Vi(n.leaseTimestampMs,5e3)&&!t.Ci(n.ownerId)){if(t.Ri(n)&&t.networkEnabled)return!0;if(!t.Ri(n)){if(!n.allowTabSynchronization)throw new uv(ov.FAILED_PRECONDITION,tx);return!1}}return!(!t.networkEnabled||!t.inForeground)||ix(e).j().next((function(e){return void 0===t.Si(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Zp("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=be(ke().mark((function e(){var t=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fs=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Ni(),this.ki(),e.next=7,this.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Dm(e,em.ct);return t.Ai(n).next((function(){return t.Pi(n)}))}));case 7:this.wi.close(),this.Mi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Si",value:function(e,t){var n=this;return e.filter((function(e){return n.Vi(e.updateTimeMs,t)&&!n.Ci(e.clientId)}))}},{key:"$i",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return ix(t).j().next((function(t){return e.Si(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Fs}},{key:"getMutationQueue",value:function(e,t){return pb.de(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new ib(e,this.serializer.fe.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Rw.de(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var r=this;Zp("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.ui)?Am:14===i?Nm:13===i?Cm:12===i?Tm:11===i?Sm:void rv();return this.wi.runTransaction(e,o,u,(function(i){return a=new Dm(i,r.Os?r.Os.next():em.ct),"readwrite-primary"===t?r.Ti(a).next((function(e){return!!e||r.Ei(a)})).next((function(t){if(!t)throw ev("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.ii.enqueueRetryable((function(){return r.fi(!1)})),new uv(ov.FAILED_PRECONDITION,Uv);return n(a)})).next((function(e){return r.vi(a).next((function(){return e}))})):r.Oi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Oi",value:function(e){var t=this;return rx(e).get("owner").next((function(e){if(null!==e&&t.Vi(e.leaseTimestampMs,5e3)&&!t.Ci(e.ownerId)&&!t.Ri(e)&&!(t.oi||t.allowTabSynchronization&&e.allowTabSynchronization))throw new uv(ov.FAILED_PRECONDITION,tx)}))}},{key:"vi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return rx(e).put("owner",t)}},{key:"Ai",value:function(e){var t=this,n=rx(e);return n.get("owner").next((function(e){return t.Ri(e)?(Zp("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Bv.resolve()}))}},{key:"Vi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(ev("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"gi",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=function(){e.ii.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.mi()}))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ni",value:function(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}},{key:"yi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=function(){t.xi();var e=/(?:Version|Mobile)\/1[456]/;!Je()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.ii.enterRestrictedMode(!0),t.ii.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ci))}},{key:"ki",value:function(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}},{key:"Ci",value:function(e){var t;try{var n=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Zp("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return ev("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"xi",value:function(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){ev("Failed to set zombie client id.",e)}}},{key:"Mi",value:function(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(e){}}},{key:"Di",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"D",value:function(){return Gv.D()}}]),e}();function rx(e){return Pm(e,"owner")}function ix(e){return Pm(e,"clientMetadata")}function ax(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var ox=function(){function e(t,n,r,i){Ne(this,e),this.targetId=t,this.fromCache=n,this.Fi=r,this.Bi=i}return De(e,null,[{key:"Li",value:function(t,n){var r,i=Dg(),a=Dg(),o=Pe(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),ux=function(){function e(){Ne(this,e),this.qi=!1}return De(e,[{key:"initialize",value:function(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ki(e,t).next((function(a){return a||i.Gi(e,t,r,n)})).next((function(n){return n||i.Qi(e,t)}))}},{key:"Ki",value:function(e,t){var n=this;if(ag(t))return Bv.resolve(null);var r=lg(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=hg(t,null,"F"),r=lg(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Dg.apply(void 0,gt(i));return n.Ui.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.ji(t,i);return n.zi(t,o,a,r.readTime)?n.Ki(e,hg(t,null,"F")):n.Wi(e,o,t,r)}))}))})))}))}},{key:"Gi",value:function(e,t,n,r){var i=this;return ag(t)||r.isEqual(_v.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((function(a){var o=i.ji(t,a);return i.zi(t,o,n,r)?i.Qi(e,t):(Jp()<=_t.DEBUG&&Zp("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),vg(t)),i.Wi(e,o,t,Ov(r,-1)))}))}},{key:"ji",value:function(e,t){var n=new jm(gg(e));return t.forEach((function(t,r){mg(e,r)&&(n=n.add(r))})),n}},{key:"zi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Qi",value:function(e,t){return Jp()<=_t.DEBUG&&Zp("QueryEngine","Using full collection scan to execute query:",vg(t)),this.Ui.getDocumentsMatchingQuery(e,t,Mv.min())}},{key:"Wi",value:function(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),sx=function(){function e(t,n,r,i){Ne(this,e),this.persistence=t,this.Hi=n,this.serializer=i,this.Ji=new Mm(kv),this.Yi=new wg((function(e){return $y(e)}),Xy),this.Xi=new Map,this.Zi=t.getRemoteDocumentCache(),this.Bs=t.getTargetCache(),this.qs=t.getBundleCache(),this.tr(r)}return De(e,[{key:"tr",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zb(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ji)}))}}]),e}();function cx(e,t,n,r){return new sx(e,t,n,r)}function lx(e,t){return fx.apply(this,arguments)}function fx(){return fx=be(ke().mark((function e(t,n){var r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=av(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.tr(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Dg(),s=Pe(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=Pe(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=Pe(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=Pe(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{er:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),fx.apply(this,arguments)}function hx(e,t){var n=av(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Bv.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);iv(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Dg(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function dx(e){var t=av(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Bs.getLastRemoteSnapshotVersion(e)}))}function px(e,t){var n=av(e),r=t.snapshotVersion,i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Bs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Bs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(u)?c=c.withResumeToken(Gm.EMPTY_BYTE_STRING,_v.min()).withLastLimboFreeSnapshotVersion(_v.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Bs.updateTargetData(e,c))}}));var u=xg(),s=Dg();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(vx(e,a,t.documentUpdates).next((function(e){u=e.nr,s=e.sr}))),!r.isEqual(_v.min())){var c=n.Bs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Bv.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Ji=i,e}))}function vx(e,t,n){var r=Dg(),i=Dg();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=xg();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(_v.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Zp("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{nr:r,sr:i}}))}function mx(e,t){var n=av(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function yx(e,t){var n=av(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Bs.getTargetData(e,t).next((function(i){return i?(r=i,Bv.resolve(r)):n.Bs.allocateTargetId(e).next((function(i){return r=new yw(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}function gx(e,t,n){return kx.apply(this,arguments)}function kx(){return kx=be(ke().mark((function e(t,n,r){var i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=av(t),a=i.Ji.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Hv(e.t1)){e.next=12;break}throw e.t1;case 12:Zp("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ji=i.Ji.remove(n),i.Yi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),kx.apply(this,arguments)}function wx(e,t,n){var r=av(e),i=_v.min(),a=Dg();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=av(e),i=r.Yi.get(n);return void 0!==i?Bv.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,lg(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Hi.getDocumentsMatchingQuery(e,t,n?i:_v.min(),n?a:Dg())})).next((function(e){return _x(r,yg(t),e),{documents:e,ir:a}}))}))}function bx(e,t){var n=av(e),r=av(n.Bs),i=n.Ji.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.le(e,t).next((function(e){return e?e.target:null}))}))}function xx(e,t){var n=av(e),r=n.Xi.get(t)||_v.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Zi.getAllFromCollectionGroup(e,t,Ov(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return _x(n,t,e),e}))}function _x(e,t,n){var r=e.Xi.get(t)||_v.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Xi.set(t,r)}function Ix(e,t,n,r){return Ex.apply(this,arguments)}function Ex(){return Ex=be(ke().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=av(t),o=Dg(),u=xg(),s=Pe(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.rr(l.metadata.name),l.document&&(o=o.add(f)),(h=n.ur(l)).setReadTime(n.cr(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Zi.newChangeBuffer({trackRemovals:!0}),e.next=7,yx(a,function(e){return lg(ig(Ev.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return vx(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Bs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Bs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.nr,t.sr)})).next((function(){return t.nr}))}))})));case 9:case"end":return e.stop()}}),e)}))),Ex.apply(this,arguments)}function Sx(e,t){return Tx.apply(this,arguments)}function Tx(){return Tx=be(ke().mark((function e(t,n){var r,i,a,o=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Dg(),e.next=3,yx(t,lg(Sw(n.bundledQuery)));case 3:return i=e.sent,a=av(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Kk(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.qs.saveNamedQuery(e,n);var o=i.withResumeToken(Gm.EMPTY_BYTE_STRING,t);return a.Ji=a.Ji.insert(o.targetId,o),a.Bs.updateTargetData(e,o).next((function(){return a.Bs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Bs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.qs.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Tx.apply(this,arguments)}function Cx(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Nx(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Ax(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Dx=function(){function e(t,n,r,i){Ne(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return De(e,[{key:"hr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ar",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new uv(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(ev("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Px=function(){function e(t,n,r){Ne(this,e),this.targetId=t,this.state=n,this.error=r}return De(e,[{key:"hr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ar",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new uv(i.error.code,i.error.message))),a?new e(t,i.state,r):(ev("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Rx=function(){function e(t,n){Ne(this,e),this.clientId=t,this.activeTargetIds=n}return De(e,null,[{key:"ar",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Rg(),o=0;i&&o<r.activeTargetIds.length;++o)i=rm(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(ev("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Ox=function(){function e(t,n){Ne(this,e),this.clientId=t,this.onlineState=n}return De(e,null,[{key:"ar",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(ev("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Lx=function(){function e(){Ne(this,e),this.activeTargetIds=Rg()}return De(e,[{key:"lr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"dr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"hr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Mx=function(){function e(t,n,r,i,a){Ne(this,e),this.window=t,this.ii=n,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Mm(kv),this.started=!1,this.yr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.pr=Cx(this.persistenceKey,this.wr),this.Ir=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gr=this.gr.insert(this.wr,new Lx),this.Tr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Er=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Ar=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.vr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Rr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this._r)}return De(e,[{key:"start",value:function(){var e=be(ke().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.$i();case 2:t=e.sent,n=Pe(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.wr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Cx(this.persistenceKey,i)))&&(o=Rx.ar(i,a))&&(this.gr=this.gr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Pr(),(u=this.storage.getItem(this.vr))&&(s=this.br(u))&&this.Vr(s),c=Pe(this.yr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.mr(f)}catch(d){c.e(d)}finally{c.f()}this.yr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Ir,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Sr(this.gr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.gr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Dr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Dr(e,t,n),this.Cr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Ax(this.persistenceKey,e));if(n){var r=Px.ar(e,n);r&&(t=r.state)}}return this.Nr.lr(e),this.Pr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Nr.dr(e),this.Pr()}},{key:"isLocalQueryTarget",value:function(e){return this.Nr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Ax(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.kr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Cr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Mr(e)}},{key:"notifyBundleLoaded",value:function(e){this.$r(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Zp("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Zp("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Zp("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"mr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Zp("SharedClientState","EVENT",n.key,n.newValue),n.key===this.pr)return void ev("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable(be(ke().mark((function e(){var r,i,a,o,u,s,c;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.Tr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Or(n.key),e.abrupt("return",t.Fr(r,null));case 6:if(!(i=t.Br(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Fr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.Er.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Lr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.qr(a));case 16:e.next=41;break;case 18:if(!t.Ar.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Ur(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Kr(o));case 23:e.next=41;break;case 25:if(n.key!==t.vr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.br(n.newValue))){e.next=30;break}return e.abrupt("return",t.Vr(u));case 30:e.next=41;break;case 32:if(n.key!==t.Ir){e.next=37;break}s=function(e){var t=em.ct;if(null!=e)try{var n=JSON.parse(e);iv("number"==typeof n),t=n}catch(e){ev("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==em.ct&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.Rr){e.next=41;break}return c=t.Gr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Qr(e)})));case 41:e.next=44;break;case 43:t.yr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Nr",get:function(){return this.gr.get(this.wr)}},{key:"Pr",value:function(){this.setItem(this.pr,this.Nr.hr())}},{key:"Dr",value:function(e,t,n){var r=new Dx(this.currentUser,e,t,n),i=Nx(this.persistenceKey,this.currentUser,e);this.setItem(i,r.hr())}},{key:"Cr",value:function(e){var t=Nx(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Mr",value:function(e){var t={clientId:this.wr,onlineState:e};this.storage.setItem(this.vr,JSON.stringify(t))}},{key:"kr",value:function(e,t,n){var r=Ax(this.persistenceKey,e),i=new Px(e,t,n);this.setItem(r,i.hr())}},{key:"$r",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}},{key:"Or",value:function(e){var t=this.Tr.exec(e);return t?t[1]:null}},{key:"Br",value:function(e,t){var n=this.Or(e);return Rx.ar(n,t)}},{key:"Lr",value:function(e,t){var n=this.Er.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Dx.ar(new Yp(i),r,t)}},{key:"Ur",value:function(e,t){var n=this.Ar.exec(e),r=Number(n[1]);return Px.ar(r,t)}},{key:"br",value:function(e){return Ox.ar(e)}},{key:"Gr",value:function(e){return JSON.parse(e)}},{key:"qr",value:function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.jr(t.batchId,t.state,t.error));case 2:Zp("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Kr",value:function(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}},{key:"Fr",value:function(e,t){var n=this,r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),a=this.Sr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Wr(o,u).then((function(){n.gr=r}))}},{key:"Vr",value:function(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Sr",value:function(e){var t=Rg();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"D",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Fx=function(){function e(){Ne(this,e),this.Hr=new Lx,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return De(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Jr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Hr.dr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Jr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Hr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Hr=new Lx,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Ux=function(){function e(){Ne(this,e)}return De(e,[{key:"Yr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),jx=function(){function e(){var t=this;Ne(this,e),this.Xr=function(){return t.Zr()},this.eo=function(){return t.no()},this.so=[],this.io()}return De(e,[{key:"Yr",value:function(e){this.so.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}},{key:"io",value:function(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}},{key:"Zr",value:function(){Zp("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=Pe(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"no",value:function(){Zp("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=Pe(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Vx=null;function zx(){return null===Vx?Vx=268435456+Math.round(2147483648*Math.random()):Vx++,"0x"+Vx.toString(16)}var Bx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},qx=function(){function e(t){Ne(this,e),this.ro=t.ro,this.oo=t.oo}return De(e,[{key:"uo",value:function(e){this.co=e}},{key:"ao",value:function(e){this.ho=e}},{key:"onMessage",value:function(e){this.lo=e}},{key:"close",value:function(){this.oo()}},{key:"send",value:function(e){this.ro(e)}},{key:"fo",value:function(){this.co()}},{key:"wo",value:function(e){this.ho(e)}},{key:"_o",value:function(e){this.lo(e)}}]),e}(),Gx="WebChannelConnection",Kx=function(e){Oe(n,e);var t=Fe(n);function n(e){var r;return Ne(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return De(n,[{key:"Ao",value:function(e,t,n,r){var i=zx();return new Promise((function(a,o){var u=new Kp;u.setWithCredentials(!0),u.listenOnce(Vp.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case jp.NO_ERROR:var t=u.getResponseJson();Zp(Gx,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case jp.TIMEOUT:Zp(Gx,"RPC '".concat(e,"' ").concat(i," timed out")),o(new uv(ov.DEADLINE_EXCEEDED,"Request time out"));break;case jp.HTTP_ERROR:var n=u.getStatus();if(Zp(Gx,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(ov).indexOf(t)>=0?t:ov.UNKNOWN}(s.status);o(new uv(c,s.message))}else o(new uv(ov.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new uv(ov.UNAVAILABLE,"Connection failed."));break;default:rv()}}finally{Zp(Gx,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);Zp(Gx,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"Ro",value:function(e,t,n){var r=zx(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Fp(),o=Up(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},s=this.longPollingOptions.timeoutSeconds;void 0!==s&&(u.longPollingTimeout=Math.round(1e3*s)),this.useFetchStreams&&(u.xmlHttpFactory=new qp({})),this.Eo(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var c=i.join("");Zp(Gx,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),u);var l=a.createWebChannel(c,u),f=!1,h=!1,d=new qx({ro:function(t){h?Zp(Gx,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(f||(Zp(Gx,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),f=!0),Zp(Gx,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},oo:function(){return l.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(l,Gp.EventType.OPEN,(function(){h||Zp(Gx,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,Gp.EventType.CLOSE,(function(){h||(h=!0,Zp(Gx,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.wo())})),p(l,Gp.EventType.ERROR,(function(t){h||(h=!0,tv(Gx,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.wo(new uv(ov.UNAVAILABLE,"The operation could not be completed")))})),p(l,Gp.EventType.MESSAGE,(function(t){var n;if(!h){var i=t.data[0];iv(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){Zp(Gx,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=lk[e];if(void 0!==t)return kk(t)}(u),c=o.message;void 0===s&&(s=ov.INTERNAL,c="Unknown error status: "+u+" with message "+o.message),h=!0,d.wo(new uv(s,c)),l.close()}else Zp(Gx,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d._o(i)}})),p(o,zp.STAT_EVENT,(function(t){t.stat===Bp.PROXY?Zp(Gx,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Bp.NOPROXY&&Zp(Gx,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.fo()}),0),d}}]),n}(function(){function e(t){Ne(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.mo=n+"://"+t.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return De(e,[{key:"po",get:function(){return!1}},{key:"Io",value:function(e,t,n,r,i){var a=zx(),o=this.To(e,t);Zp("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={};return this.Eo(u,r,i),this.Ao(e,o,u,n).then((function(t){return Zp("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw tv("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"vo",value:function(e,t,n,r,i,a){return this.Io(e,t,n,r,i)}},{key:"Eo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+$p,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"To",value:function(e,t){var n=Bx[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}]),e}());function Wx(){return"undefined"!=typeof window?window:null}function Hx(){return"undefined"!=typeof document?document:null}function Qx(e){return new Vk(e,!0)}var Yx=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;Ne(this,e),this.ii=t,this.timerId=n,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}return De(e,[{key:"reset",value:function(){this.So=0}},{key:"xo",value:function(){this.So=this.Vo}},{key:"No",value:function(e){var t=this;this.cancel();var n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&Zp("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,(function(){return t.Co=Date.now(),e()})),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}},{key:"Mo",value:function(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}},{key:"cancel",value:function(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"ko",value:function(){return(Math.random()-.5)*this.So}}]),e}(),$x=function(){function e(t,n,r,i,a,o,u,s){Ne(this,e),this.ii=t,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Yx(t,n)}return De(e,[{key:"Uo",value:function(){return 1===this.state||5===this.state||this.Ko()}},{key:"Ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Go()}},{key:"stop",value:function(){var e=be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Uo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Qo",value:function(){this.state=0,this.qo.reset()}},{key:"jo",value:function(){var e=this;this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(function(){return e.zo()})))}},{key:"Wo",value:function(e){this.Ho(),this.stream.send(e)}},{key:"zo",value:function(){var e=be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ho",value:function(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}},{key:"Jo",value:function(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}},{key:"close",value:function(){var e=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==t?this.qo.reset():n&&n.code===ov.RESOURCE_EXHAUSTED?(ev(n.toString()),ev("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===ov.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.ao(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Yo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=Se(t,2),i=r[0],a=r[1];e.Fo===n&&e.Zo(i,a)}),(function(n){t((function(){var t=new uv(ov.UNKNOWN,"Fetching auth token failed: "+n.message);return e.tu(t)}))}))}},{key:"Zo",value:function(e,t){var n=this,r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((function(){r((function(){return n.state=2,n.Lo=n.ii.enqueueAfterDelay(n.Oo,1e4,(function(){return n.Ko()&&(n.state=3),Promise.resolve()})),n.listener.uo()}))})),this.stream.ao((function(e){r((function(){return n.tu(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Go",value:function(){var e=this;this.state=5,this.qo.No(be(ke().mark((function t(){return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"tu",value:function(e){return Zp("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Xo",value:function(e){var t=this;return function(n){t.ii.enqueueAndForget((function(){return t.Fo===e?n():(Zp("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Xx=function(e){Oe(n,e);var t=Fe(n);function n(e,r,i,a,o,u){var s;return Ne(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s}return De(n,[{key:"eu",value:function(e,t){return this.connection.Ro("Listen",e,t)}},{key:"onMessage",value:function(e){this.qo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:rv()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(iv(void 0===t||"string"==typeof t),Gm.fromBase64String(t||"")):(iv(void 0===t||t instanceof Uint8Array),Gm.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?ov.UNKNOWN:kk(e.code);return new uv(t,e.message||"")}(o);n=new Pk(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Yk(e,s.document.name),l=Kk(s.document.updateTime),f=s.document.createTime?Kk(s.document.createTime):_v.min(),h=new by({mapValue:{fields:s.document.fields}}),d=_y.newFoundDocument(c,l,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new Ak(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=Yk(e,m.document),g=m.readTime?Kk(m.readTime):_v.min(),k=_y.newNoDocument(y,g),w=m.removedTargetIds||[];n=new Ak([],w,k.key,k)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var x=Yk(e,b.document),_=b.removedTargetIds||[];n=new Ak([],_,x,null)}else{if(!("filter"in t))return rv();t.filter;var I=t.filter;I.targetId;var E=I.count,S=void 0===E?0:E,T=I.unchangedNames,C=new yk(S,T),N=I.targetId;n=new Dk(N,C)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return _v.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?_v.min():t.readTime?Kk(t.readTime):_v.min()}(e);return this.listener.nu(t,n)}},{key:"su",value:function(e){var t={};t.database=Jk(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=Jy(r)?{documents:aw(e,r)}:{query:ow(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=qk(e,t.resumeToken);var i=zk(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(_v.min())>0){n.readTime=Bk(e,t.snapshotVersion.toTimestamp());var a=zk(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return rv()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}},{key:"iu",value:function(e){var t={};t.database=Jk(this.serializer),t.removeTarget=e,this.Wo(t)}}]),n}($x),Jx=function(e){Oe(n,e);var t=Fe(n);function n(e,r,i,a,o,u){var s;return Ne(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s.ru=!1,s}return De(n,[{key:"ou",get:function(){return this.ru}},{key:"start",value:function(){this.ru=!1,this.lastStreamToken=void 0,Yn(Le(n.prototype),"start",this).call(this)}},{key:"Yo",value:function(){this.ru&&this.uu([])}},{key:"eu",value:function(e,t){return this.connection.Ro("Write",e,t)}},{key:"onMessage",value:function(e){if(iv(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();var t=function(e,t){return e&&e.length>0?(iv(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Kk(e.updateTime):Kk(t);return n.isEqual(_v.min())&&(n=Kk(t)),new $g(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Kk(e.commitTime);return this.listener.cu(n,t)}return iv(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}},{key:"hu",value:function(){var e={};e.database=Jk(this.serializer),this.Wo(e)}},{key:"uu",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return rw(t.serializer,e)}))};this.Wo(n)}}]),n}($x),Zx=function(e){Oe(n,e);var t=Fe(n);function n(e,r,i,a){var o;return Ne(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.lu=!1,o}return De(n,[{key:"fu",value:function(){if(this.lu)throw new uv(ov.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Io",value:function(e,t,n){var r=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=Se(i,2),o=a[0],u=a[1];return r.connection.Io(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===ov.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new uv(ov.UNKNOWN,e.toString())}))}},{key:"vo",value:function(e,t,n,r){var i=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=Se(a,2),u=o[0],s=o[1];return i.connection.vo(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===ov.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new uv(ov.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.lu=!0}}]),n}(function(){return De((function e(){Ne(this,e)}))}());var e_=function(){function e(t,n){Ne(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}return De(e,[{key:"gu",value:function(){var e=this;0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e._u=null,e.pu("Backend didn't respond within 10 seconds."),e.yu("Offline"),Promise.resolve()})))}},{key:"Iu",value:function(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}},{key:"set",value:function(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}},{key:"yu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"pu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(ev(t),this.mu=!1):Zp("OnlineStateTracker",t)}},{key:"Tu",value:function(){null!==this._u&&(this._u.cancel(),this._u=null)}}]),e}(),t_=De((function e(t,n,r,i,a){var o=this;Ne(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr((function(e){r.enqueueAndForget(be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=h_(o),!e.t0){e.next=5;break}return Zp("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=av(t)).vu.add(4),e.next=4,i_(n);case 4:return n.bu.set("Unknown"),n.vu.delete(4),e.next=8,n_(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.bu=new e_(r,i)}));function n_(e){return r_.apply(this,arguments)}function r_(){return(r_=be(ke().mark((function e(t){var n,r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h_(t)){e.next=18;break}n=Pe(t.Ru),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function i_(e){return a_.apply(this,arguments)}function a_(){return(a_=be(ke().mark((function e(t){var n,r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Pe(t.Ru),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function o_(e,t){var n=av(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),f_(n)?l_(n):z_(n).Ko()&&s_(n,t))}function u_(e,t){var n=av(e),r=z_(n);n.Au.delete(t),r.Ko()&&c_(n,t),0===n.Au.size&&(r.Ko()?r.jo():h_(n)&&n.bu.set("Unknown"))}function s_(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(_v.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}z_(e).su(t)}function c_(e,t){e.Vu.qt(t),z_(e).iu(t)}function l_(e){e.Vu=new Ok({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},le:function(t){return e.Au.get(t)||null},ue:function(){return e.datastore.serializer.databaseId}}),z_(e).start(),e.bu.gu()}function f_(e){return h_(e)&&!z_(e).Uo()&&e.Au.size>0}function h_(e){return 0===av(e).vu.size}function d_(e){e.Vu=void 0}function p_(e){return v_.apply(this,arguments)}function v_(){return(v_=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Au.forEach((function(e,n){s_(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m_(e,t){return y_.apply(this,arguments)}function y_(){return(y_=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d_(t),f_(t)?(t.bu.Iu(n),l_(t)):t.bu.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g_(e,t,n){return k_.apply(this,arguments)}function k_(){return k_=be(ke().mark((function e(t,n,r){var i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.bu.set("Online"),!(n instanceof Pk&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=be(ke().mark((function e(t,n){var r,i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=Pe(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.Au.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.Au.delete(o),t.Vu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Zp("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,w_(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Ak?t.Vu.Ht(n):n instanceof Dk?t.Vu.ne(n):t.Vu.Xt(n),r.isEqual(_v.min())){e.next=29;break}return e.prev=14,e.next=17,dx(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Vu.ce(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.Au.get(t);if(r){e.Au.set(t,r.withResumeToken(Gm.EMPTY_BYTE_STRING,r.snapshotVersion)),c_(e,t);var i=new yw(r.target,t,n,r.sequenceNumber);s_(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Zp("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,w_(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),k_.apply(this,arguments)}function w_(e,t,n){return b_.apply(this,arguments)}function b_(){return(b_=be(ke().mark((function e(t,n,r){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Hv(n)){e.next=2;break}throw n;case 2:return t.vu.add(1),e.next=5,i_(t);case 5:t.bu.set("Offline"),r||(r=function(){return dx(t.localStore)}),t.asyncQueue.enqueueRetryable(be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zp("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.vu.delete(1),e.next=6,n_(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x_(e,t){return t().catch((function(n){return w_(e,n,t)}))}function __(e){return I_.apply(this,arguments)}function I_(){return(I_=be(ke().mark((function e(t){var n,r,i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=av(t),r=B_(n),i=n.Eu.length>0?n.Eu[n.Eu.length-1].batchId:-1;case 2:if(!E_(n)){e.next=19;break}return e.prev=3,e.next=6,mx(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Eu.length&&r.jo(),e.abrupt("break",19);case 10:i=a.batchId,S_(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,w_(n,e.t0);case 17:e.next=2;break;case 19:T_(n)&&C_(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function E_(e){return h_(e)&&e.Eu.length<10}function S_(e,t){e.Eu.push(t);var n=B_(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function T_(e){return h_(e)&&!B_(e).Uo()&&e.Eu.length>0}function C_(e){B_(e).start()}function N_(e){return A_.apply(this,arguments)}function A_(){return(A_=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:B_(t).hu();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D_(e){return P_.apply(this,arguments)}function P_(){return(P_=be(ke().mark((function e(t){var n,r,i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=B_(t),r=Pe(t.Eu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.uu(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R_(e,t,n){return O_.apply(this,arguments)}function O_(){return(O_=be(ke().mark((function e(t,n,r){var i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Eu.shift(),a=vk.from(i,n,r),e.next=3,x_(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,__(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L_(e,t){return M_.apply(this,arguments)}function M_(){return M_=be(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&B_(t).ou,!e.t0){e.next=4;break}return e.next=4,function(){var e=be(ke().mark((function e(t,n){var r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!gk(i=n.code)||i===ov.ABORTED){e.next=7;break}return r=t.Eu.shift(),B_(t).Qo(),e.next=5,x_(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,__(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:T_(t)&&C_(t);case 5:case"end":return e.stop()}}),e)}))),M_.apply(this,arguments)}function F_(e,t){return U_.apply(this,arguments)}function U_(){return(U_=be(ke().mark((function e(t,n){var r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=av(t)).asyncQueue.verifyOperationInProgress(),Zp("RemoteStore","RemoteStore received new credentials"),i=h_(r),r.vu.add(3),e.next=6,i_(r);case 6:return i&&r.bu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.vu.delete(3),e.next=12,n_(r);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j_(e,t){return V_.apply(this,arguments)}function V_(){return(V_=be(ke().mark((function e(t,n){var r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=av(t),!n){e.next=7;break}return r.vu.delete(2),e.next=5,n_(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.vu.add(2),e.next=12,i_(r);case 12:r.bu.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z_(e){return e.Su||(e.Su=function(e,t,n){var r=av(e);return r.fu(),new Xx(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:p_.bind(null,e),ao:m_.bind(null,e),nu:g_.bind(null,e)}),e.Ru.push(function(){var t=be(ke().mark((function t(n){return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Su.Qo(),f_(e)?l_(e):e.bu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Su.stop();case 6:d_(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Su}function B_(e){return e.Du||(e.Du=function(e,t,n){var r=av(e);return r.fu(),new Jx(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:N_.bind(null,e),ao:L_.bind(null,e),au:D_.bind(null,e),cu:R_.bind(null,e)}),e.Ru.push(function(){var t=be(ke().mark((function t(n){return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Du.Qo(),t.next=4,__(e);case 4:t.next=9;break;case 6:return t.next=8,e.Du.stop();case 8:e.Eu.length>0&&(Zp("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Du}var q_=function(){function e(t,n,r,i,a){Ne(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new sv,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return De(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new uv(ov.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function G_(e,t){if(ev("AsyncQueue","".concat(t,": ").concat(e)),Hv(e))return new uv(ov.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var K_=function(){function e(t){Ne(this,e),this.comparator=t?function(e,n){return t(e,n)||Cv.comparator(e.key,n.key)}:function(e,t){return Cv.comparator(e.key,t.key)},this.keyedMap=Ig(),this.sortedSet=new Mm(this.comparator)}return De(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),W_=function(){function e(){Ne(this,e),this.Cu=new Mm(Cv.comparator)}return De(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):rv():this.Cu=this.Cu.insert(t,e)}},{key:"xu",value:function(){var e=[];return this.Cu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),H_=function(){function e(t,n,r,i,a,o,u,s,c){Ne(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return De(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,K_.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),Q_=De((function e(){Ne(this,e),this.Nu=void 0,this.listeners=[]})),Y_=De((function e(){Ne(this,e),this.queries=new wg((function(e){return pg(e)}),dg),this.onlineState="Unknown",this.ku=new Set}));function $_(e,t){return X_.apply(this,arguments)}function X_(){return X_=be(ke().mark((function e(t,n){var r,i,a,o,u;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=av(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new Q_),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Nu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=G_(e.t0,"Initialization of query '".concat(vg(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Mu(r.onlineState),o.Nu&&n.$u(o.Nu)&&nI(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),X_.apply(this,arguments)}function J_(e,t){return Z_.apply(this,arguments)}function Z_(){return Z_=be(ke().mark((function e(t,n){var r,i,a,o,u;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=av(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Z_.apply(this,arguments)}function eI(e,t){var n,r=av(e),i=!1,a=Pe(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=Pe(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.$u(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Nu=o}}}catch(f){a.e(f)}finally{a.f()}i&&nI(r)}function tI(e,t,n){var r=av(e),i=r.queries.get(t);if(i){var a,o=Pe(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function nI(e){e.ku.forEach((function(e){e.next()}))}var rI=function(){function e(t,n,r){Ne(this,e),this.query=t,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}return De(e,[{key:"$u",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=Pe(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new H_(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),a=!0):this.qu(e,this.onlineState)&&(this.Uu(e),a=!0),this.Bu=e,a}},{key:"onError",value:function(e){this.Ou.error(e)}},{key:"Mu",value:function(e){this.onlineState=e;var t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}},{key:"qu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Lu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Uu",value:function(e){e=H_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}]),e}(),iI=function(){function e(t,n){Ne(this,e),this.Gu=t,this.byteLength=n}return De(e,[{key:"Qu",value:function(){return"metadata"in this.Gu}}]),e}(),aI=function(){function e(t){Ne(this,e),this.serializer=t}return De(e,[{key:"rr",value:function(e){return Yk(this.serializer,e)}},{key:"ur",value:function(e){return e.metadata.exists?tw(this.serializer,e.document,!1):_y.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}},{key:"cr",value:function(e){return Kk(e)}}]),e}(),oI=function(){function e(t,n,r){Ne(this,e),this.ju=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=uI(t)}return De(e,[{key:"zu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;var n=Ev.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Wu",value:function(e){var t,n=new Map,r=new aI(this.serializer),i=Pe(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.rr(a.metadata.name),s=Pe(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Dg()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=be(ke().mark((function e(){var t,n,r,i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ix(this.localStore,new aI(this.serializer),this.documents,this.ju.id);case 2:t=e.sent,n=this.Wu(this.documents),r=Pe(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Sx(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Hu:this.collectionGroups,Ju:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function uI(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var sI=De((function e(t){Ne(this,e),this.key=t})),cI=De((function e(t){Ne(this,e),this.key=t})),lI=function(){function e(t,n){Ne(this,e),this.query=t,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Dg(),this.mutatedKeys=Dg(),this.tc=gg(t),this.ec=new K_(this.tc)}return De(e,[{key:"nc",get:function(){return this.Yu}},{key:"sc",value:function(e,t){var n=this,r=t?t.ic:new W_,i=t?t.ec:this.ec,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=mg(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.rc(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.tc(f,s)>0||c&&n.tc(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{ec:o,ic:r,zi:u,mutatedKeys:a}}},{key:"rc",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;var a=e.ic.xu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rv()}};return n(e)-n(t)}(e.type,t.type)||r.tc(e.doc,t.doc)})),this.oc(n);var o=t?this.uc():[],u=0===this.Zu.size&&this.current?1:0,s=u!==this.Xu;return this.Xu=u,0!==a.length||s?{snapshot:new H_(this.query,e.ec,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}},{key:"Mu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new W_,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}},{key:"ac",value:function(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}},{key:"oc",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Yu=t.Yu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Yu=t.Yu.delete(e)})),this.current=e.current)}},{key:"uc",value:function(){var e=this;if(!this.current)return[];var t=this.Zu;this.Zu=Dg(),this.ec.forEach((function(t){e.ac(t.key)&&(e.Zu=e.Zu.add(t.key))}));var n=[];return t.forEach((function(t){e.Zu.has(t)||n.push(new cI(t))})),this.Zu.forEach((function(e){t.has(e)||n.push(new sI(e))})),n}},{key:"hc",value:function(e){this.Yu=e.ir,this.Zu=Dg();var t=this.sc(e.documents);return this.applyChanges(t,!0)}},{key:"lc",value:function(){return H_.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}]),e}(),fI=De((function e(t,n,r){Ne(this,e),this.query=t,this.targetId=n,this.view=r})),hI=De((function e(t){Ne(this,e),this.key=t,this.fc=!1})),dI=function(){function e(t,n,r,i,a,o){Ne(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new wg((function(e){return pg(e)}),dg),this._c=new Map,this.mc=new Set,this.gc=new Mm(Cv.comparator),this.yc=new Map,this.Ic=new Gb,this.Tc={},this.Ec=new Map,this.Ac=kb.Mn(),this.onlineState="Unknown",this.vc=void 0}return De(e,[{key:"isPrimaryClient",get:function(){return!0===this.vc}}]),e}();function pI(e,t){return vI.apply(this,arguments)}function vI(){return vI=be(ke().mark((function e(t,n){var r,i,a,o,u,s;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=uE(t),!(o=r.wc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.lc(),e.next=15;break;case 6:return e.next=8,yx(r.localStore,lg(n));case 8:return u=e.sent,s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=13,mI(r,n,i,"current"===s,u.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&o_(r.remoteStore,u);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),vI.apply(this,arguments)}function mI(e,t,n,r,i){return yI.apply(this,arguments)}function yI(){return yI=be(ke().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Rc=function(e,n,r){return function(){var e=be(ke().mark((function e(t,n,r,i){var a,o,u;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.sc(r),e.t0=a.zi,!e.t0){e.next=6;break}return e.next=5,wx(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.sc(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(FI(t,n.targetId,u.cc),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,wx(t.localStore,n,!0);case 3:return o=e.sent,u=new lI(n,o.ir),s=u.sc(o.documents),c=Nk.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),FI(t,r,l.cc),f=new fI(n,r,u),e.abrupt("return",(t.wc.set(n,f),t._c.has(r)?t._c.get(r).push(n):t._c.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),yI.apply(this,arguments)}function gI(e,t){return kI.apply(this,arguments)}function kI(){return(kI=be(ke().mark((function e(t,n){var r,i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=av(t),i=r.wc.get(n),!((a=r._c.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r._c.set(i.targetId,a.filter((function(e){return!dg(e,n)}))),void r.wc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,gx(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),u_(r.remoteStore,i.targetId),LI(r,i.targetId)})).catch(Vv);case 9:e.next=14;break;case 11:return LI(r,i.targetId),e.next=14,gx(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wI(e,t,n){return bI.apply(this,arguments)}function bI(){return bI=be(ke().mark((function e(t,n,r){var i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=sE(t),e.prev=1,e.next=4,function(e,t){var n,r,i=av(e),a=xv.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Dg());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=xg(),s=Dg();return i.Zi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=Pe(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=rk(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new ok(c.key,l,xy(l.value.mapValue),Xg.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Eg(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Tc[e.currentUser.toKey()];r||(r=new Mm(kv)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,VI(i,a.changes);case 9:return e.next=11,__(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=G_(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),bI.apply(this,arguments)}function xI(e,t){return _I.apply(this,arguments)}function _I(){return(_I=be(ke().mark((function e(t,n){var r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=av(t),e.prev=1,e.next=4,px(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.yc.get(t);n&&(iv(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.fc=!0:e.modifiedDocuments.size>0?iv(n.fc):e.removedDocuments.size>0&&(iv(n.fc),n.fc=!1))})),e.next=8,VI(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Vv(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function II(e,t,n){var r=av(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.wc.forEach((function(e,n){var r=n.view.Mu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=av(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=Pe(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Mu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&nI(n)}(r.eventManager,t),i.length&&r.dc.nu(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function EI(e,t,n){return SI.apply(this,arguments)}function SI(){return SI=be(ke().mark((function e(t,n,r){var i,a,o,u,s,c;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=av(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.yc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Mm(Cv.comparator)).insert(o,_y.newNoDocument(o,_v.min())),s=Dg().add(o),c=new Ck(_v.min(),new Map,new Mm(kv),u,s),e.next=9,xI(i,c);case 9:i.gc=i.gc.remove(o),i.yc.delete(n),jI(i),e.next=16;break;case 14:return e.next=16,gx(i.localStore,n,!1).then((function(){return LI(i,n,r)})).catch(Vv);case 16:case"end":return e.stop()}}),e)}))),SI.apply(this,arguments)}function TI(e,t){return CI.apply(this,arguments)}function CI(){return(CI=be(ke().mark((function e(t,n){var r,i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=av(t),i=n.batch.batchId,e.prev=1,e.next=4,hx(r.localStore,n);case 4:return a=e.sent,OI(r,i,null),RI(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,VI(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Vv(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function NI(e,t,n){return AI.apply(this,arguments)}function AI(){return(AI=be(ke().mark((function e(t,n,r){var i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=av(t),e.prev=1,e.next=4,function(e,t){var n=av(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return iv(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,OI(i,n,r),RI(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,VI(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Vv(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function DI(e,t){return PI.apply(this,arguments)}function PI(){return(PI=be(ke().mark((function e(t,n){var r,i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h_((r=av(t)).remoteStore)||Zp("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=av(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Ec.get(i)||[]).push(n),r.Ec.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=G_(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}function RI(e,t){(e.Ec.get(t)||[]).forEach((function(e){e.resolve()})),e.Ec.delete(t)}function OI(e,t,n){var r=av(e),i=r.Tc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function LI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=Pe(e._c.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.wc.delete(a),n&&e.dc.Pc(a,n)}}catch(o){i.e(o)}finally{i.f()}e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((function(t){e.Ic.containsKey(t)||MI(e,t)}))}function MI(e,t){e.mc.delete(t.path.canonicalString());var n=e.gc.get(t);null!==n&&(u_(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),jI(e))}function FI(e,t,n){var r,i=Pe(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof sI?(e.Ic.addReference(a.key,t),UI(e,a)):a instanceof cI?(Zp("SyncEngine","Document no longer in limbo: "+a.key),e.Ic.removeReference(a.key,t),e.Ic.containsKey(a.key)||MI(e,a.key)):rv()}}catch(o){i.e(o)}finally{i.f()}}function UI(e,t){var n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(Zp("SyncEngine","New document in limbo: "+n),e.mc.add(r),jI(e))}function jI(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){var t=e.mc.values().next().value;e.mc.delete(t);var n=new Cv(Ev.fromString(t)),r=e.Ac.next();e.yc.set(r,new hI(n)),e.gc=e.gc.insert(n,r),o_(e.remoteStore,new yw(lg(ig(n.path)),r,"TargetPurposeLimboResolution",em.ct))}}function VI(e,t,n){return zI.apply(this,arguments)}function zI(){return zI=be(ke().mark((function e(t,n,r){var i,a,o,u;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=av(t),a=[],o=[],u=[],e.t0=i.wc.isEmpty(),e.t0){e.next=9;break}return i.wc.forEach((function(e,t){u.push(i.Rc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=ox.Li(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.dc.nu(a),e.next=9,function(){var e=be(ke().mark((function e(t,n){var r,i,a,o,u,s,c,l;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=av(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Bv.forEach(n,(function(t){return Bv.forEach(t.Fi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Bv.forEach(t.Bi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Hv(e.t0)){e.next=10;break}throw e.t0;case 10:Zp("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=Pe(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Ji.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Ji=r.Ji.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),zI.apply(this,arguments)}function BI(e,t){return qI.apply(this,arguments)}function qI(){return(qI=be(ke().mark((function e(t,n){var r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=av(t)).currentUser.isEqual(n)){e.next=11;break}return Zp("SyncEngine","User change. New user:",n.toKey()),e.next=5,lx(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Ec.forEach((function(e){e.forEach((function(e){e.reject(new uv(ov.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,VI(r,i.er);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function GI(e,t){var n=av(e),r=n.yc.get(t);if(r&&r.fc)return Dg().add(r.key);var i=Dg(),a=n._c.get(t);if(!a)return i;var o,u=Pe(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.wc.get(s);i=i.unionWith(c.view.nc)}}catch(l){u.e(l)}finally{u.f()}return i}function KI(e,t){return WI.apply(this,arguments)}function WI(){return(WI=be(ke().mark((function e(t,n){var r,i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=av(t),e.next=3,wx(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.hc(i),e.abrupt("return",(r.isPrimaryClient&&FI(r,n.targetId,a.cc),a));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function HI(e,t){return QI.apply(this,arguments)}function QI(){return(QI=be(ke().mark((function e(t,n){var r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=av(t),e.abrupt("return",xx(r.localStore,n).then((function(e){return VI(r,e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function YI(e,t,n,r){return $I.apply(this,arguments)}function $I(){return $I=be(ke().mark((function e(t,n,r,i){var a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=av(t),e.next=3,function(e,t){var n=av(e),r=av(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Sn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Bv.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,__(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(OI(a,n,i||null),RI(a,n),function(e,t){av(av(e).mutationQueue).Cn(t)}(a.localStore,n)):rv();case 11:return e.next=13,VI(a,o);case 13:e.next=16;break;case 15:Zp("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),$I.apply(this,arguments)}function XI(e,t){return JI.apply(this,arguments)}function JI(){return(JI=be(ke().mark((function e(t,n){var r,i,a,o,u,s,c,l;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(uE(r=av(t)),sE(r),!0!==n||!0===r.vc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,ZI(r,i.toArray());case 5:return a=e.sent,r.vc=!0,e.next=9,j_(r.remoteStore,!0);case 9:o=Pe(a);try{for(o.s();!(u=o.n()).done;)s=u.value,o_(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.vc){e.next=25;break}return c=[],l=Promise.resolve(),r._c.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return LI(r,t),gx(r.localStore,t,!0)})),u_(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,ZI(r,c);case 21:return function(e){var t=av(e);t.yc.forEach((function(e,n){u_(t.remoteStore,n)})),t.Ic.Ts(),t.yc=new Map,t.gc=new Mm(Cv.comparator)}(r),r.vc=!1,e.next=25,j_(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ZI(e,t,n){return eE.apply(this,arguments)}function eE(){return eE=be(ke().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,m,y;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=av(t),a=[],o=[],u=Pe(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i._c.get(c))||0===f.length){e.next=34;break}return e.next=11,yx(i.localStore,lg(f[0]));case 11:l=e.sent,h=Pe(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.wc.get(p),e.next=20,KI(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,bx(i.localStore,c);case 36:return y=e.sent,e.next=39,yx(i.localStore,y);case 39:return l=e.sent,e.next=42,mI(i,tE(y),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.dc.nu(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),eE.apply(this,arguments)}function tE(e){return rg(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function nE(e){var t=av(e);return av(av(t.localStore).persistence).$i()}function rE(e,t,n,r){return iE.apply(this,arguments)}function iE(){return iE=be(ke().mark((function e(t,n,r,i){var a,o,u,s;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=av(t)).vc){e.next=3;break}return e.abrupt("return",void Zp("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a._c.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,xx(a.localStore,yg(o[0]));case 10:return u=e.sent,s=Ck.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,Gm.EMPTY_BYTE_STRING),e.next=14,VI(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,gx(a.localStore,n,!0);case 17:return LI(a,n,i),e.abrupt("break",20);case 19:rv();case 20:case"end":return e.stop()}}),e)}))),iE.apply(this,arguments)}function aE(e,t,n){return oE.apply(this,arguments)}function oE(){return(oE=be(ke().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=uE(t)).vc){e.next=45;break}a=Pe(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i._c.has(u)){e.next=10;break}return Zp("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,bx(i.localStore,u);case 12:return s=e.sent,e.next=15,yx(i.localStore,s);case 15:return c=e.sent,e.next=18,mI(i,tE(s),c.targetId,!1,c.resumeToken);case 18:o_(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=Pe(r),e.prev=30,h=ke().mark((function e(){var t;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i._c.has(t),!e.t0){e.next=5;break}return e.next=5,gx(i.localStore,t,!1).then((function(){u_(i.remoteStore,t),LI(i,t)})).catch(Vv);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])})))).apply(this,arguments)}function uE(e){var t=av(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=xI.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=GI.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=EI.bind(null,t),t.dc.nu=eI.bind(null,t.eventManager),t.dc.Pc=tI.bind(null,t.eventManager),t}function sE(e){var t=av(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=TI.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=NI.bind(null,t),t}function cE(e,t,n){var r=av(e);(function(){var e=be(ke().mark((function e(t,n,r){var i,a,o,u,s;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=av(e),r=Kk(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.qs.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(uI(i)),a=new oI(i,t.localStore,n.serializer),e.next=15,n.bc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.zu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.bc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,VI(t,s.Ju,void 0);case 31:return e.next=33,function(e,t){var n=av(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.qs.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Hu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(tv("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var lE=function(){function e(){Ne(this,e),this.synchronizeTabs=!1}return De(e,[{key:"initialize",value:function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=Qx(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return cx(this.persistence,new ux,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new $b(Jb.zs,this.serializer)}},{key:"createSharedClientState",value:function(e){return new Fx}},{key:"terminate",value:function(){var e=be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),fE=function(e){Oe(n,e);var t=Fe(n);function n(e,r,i){var a;return Ne(this,n),(a=t.call(this)).Vc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return De(n,[{key:"initialize",value:function(){var e=be(ke().mark((function e(t){var r=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yn(Le(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Vc.initialize(this,t);case 4:return e.next=6,sE(this.Vc.syncEngine);case 6:return e.next=8,__(this.Vc.remoteStore);case 8:return e.next=10,this.persistence.Ii((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return cx(this.persistence,new ux,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new Sb(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new Zv(t,this.persistence);return new Jv(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=ax(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?fb.withCacheSize(this.cacheSizeBytes):fb.DEFAULT;return new nx(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Wx(),Hx(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new Fx}}]),n}(lE),hE=function(e){Oe(n,e);var t=Fe(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this,e,r,!1)).Vc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return De(n,[{key:"initialize",value:function(){var e=be(ke().mark((function e(t){var r,i=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yn(Le(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Vc.syncEngine,e.t0=this.sharedClientState instanceof Mx,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={jr:YI.bind(null,r),zr:rE.bind(null,r),Wr:aE.bind(null,r),$i:nE.bind(null,r),Qr:HI.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ii(function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,XI(i.Vc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=Wx();if(!Mx.D(t))throw new uv(ov.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=ax(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Mx(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(fE),dE=function(){function e(){Ne(this,e)}return De(e,[{key:"initialize",value:function(){var e=be(ke().mark((function e(t,n){var r=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return II(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=BI.bind(null,this.syncEngine),e.next=12,j_(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Y_}},{key:"createDatastore",value:function(e){var t,n=Qx(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Kx(t));return function(e,t,n,r){return new Zx(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return II(o.syncEngine,e,0)},a=jx.D()?new jx:new Ux,new t_(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new dI(e,t,n,r,i,a);return o&&(u.vc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=av(t),Zp("RemoteStore","RemoteStore shutting down."),n.vu.add(5),e.next=5,i_(n);case 5:n.Pu.shutdown(),n.bu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function pE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return be(ke().mark((function r(){var i;return ke().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var vE=function(){function e(t){Ne(this,e),this.observer=t,this.muted=!1}return De(e,[{key:"next",value:function(e){this.observer.next&&this.Sc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Sc(this.observer.error,e):ev("Uncaught Error in snapshot listener:",e.toString())}},{key:"Dc",value:function(){this.muted=!0}},{key:"Sc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),mE=function(){function e(t,n){var r=this;Ne(this,e),this.Cc=t,this.serializer=n,this.metadata=new sv,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then((function(e){e&&e.Qu()?r.metadata.resolve(e.Gu.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Gu))))}),(function(e){return r.metadata.reject(e)}))}return De(e,[{key:"close",value:function(){return this.Cc.cancel()}},{key:"getMetadata",value:function(){var e=be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bc",value:function(){var e=be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Nc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Nc",value:function(){var e=be(ke().mark((function e(){var t,n,r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.kc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.xc.decode(t),r=Number(n),isNaN(r)&&this.Mc("length string (".concat(n,") is not valid number")),e.next=9,this.$c(r);case 9:return i=e.sent,e.abrupt("return",new iI(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"kc",value:function(){var e=be(ke().mark((function e(){var t,n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Oc()<0)){e.next=7;break}return e.next=3,this.Fc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Oc())<0&&this.Mc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"$c",value:function(){var e=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Fc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Mc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.xc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mc",value:function(e){throw this.Cc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Fc",value:function(){var e=be(ke().mark((function e(){var t,n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Cc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),yE=function(){function e(t){Ne(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return De(e,[{key:"lookup",value:function(){var e=be(ke().mark((function e(t){var n,r=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new uv(ov.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=be(ke().mark((function e(t,n){var r,i,a,o,u,s;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=av(t),i=Jk(r.serializer)+"/documents",a={documents:n.map((function(e){return Qk(r.serializer,e)}))},e.next=5,r.vo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=nw(r.serializer,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());iv(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new hk(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=be(ke().mark((function e(){var t,n=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Cv.fromPath(t);n.mutations.push(new dk(r,n.precondition(r)))})),e.next=7,function(){var e=be(ke().mark((function e(t,n){var r,i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=av(t),i=Jk(r.serializer)+"/documents",a={writes:n.map((function(e){return rw(r.serializer,e)}))},e.next=3,r.Io("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw rv();t=_v.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new uv(ov.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(_v.min())?Xg.exists(!1):Xg.updateTime(t):Xg.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(_v.min()))throw new uv(ov.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Xg.updateTime(t)}return Xg.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),gE=function(){function e(t,n,r,i,a){Ne(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Bc=r.maxAttempts,this.qo=new Yx(this.asyncQueue,"transaction_retry")}return De(e,[{key:"run",value:function(){this.Bc-=1,this.Lc()}},{key:"Lc",value:function(){var e=this;this.qo.No(be(ke().mark((function t(){var n,r;return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new yE(e.datastore),(r=e.qc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Uc(t)}))}))})).catch((function(t){e.Uc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"qc",value:function(e){try{var t=this.updateFunction(e);return!tm(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Uc",value:function(e){var t=this;this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Lc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Kc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!gk(t)}return!1}}]),e}(),kE=function(){function e(t,n,r,i){var a=this;Ne(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Yp.UNAUTHENTICATED,this.clientId=gv.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zp("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Zp("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return De(e,[{key:"getConfiguration",value:function(){var e=be(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new uv(ov.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new sv;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(be(ke().mark((function n(){var r;return ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=G_(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function wE(e,t){return bE.apply(this,arguments)}function bE(){return bE=be(ke().mark((function e(t,n){var r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Zp("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,lx(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),bE.apply(this,arguments)}function xE(e,t){return _E.apply(this,arguments)}function _E(){return(_E=be(ke().mark((function e(t,n){var r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,EE(t);case 3:return r=e.sent,Zp("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return F_(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return F_(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function IE(e){return"FirebaseError"===e.name?e.code===ov.FAILED_PRECONDITION||e.code===ov.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function EE(e){return SE.apply(this,arguments)}function SE(){return(SE=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return Zp("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,wE(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),IE(n=e.t0)){e.next=13;break}throw n;case 13:return tv("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,wE(t,new lE);case 16:e.next=21;break;case 18:return Zp("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,wE(t,new lE);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function TE(e){return CE.apply(this,arguments)}function CE(){return(CE=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return Zp("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,xE(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return Zp("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,xE(t,new dE);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function NE(e){return EE(e).then((function(e){return e.persistence}))}function AE(e){return EE(e).then((function(e){return e.localStore}))}function DE(e){return TE(e).then((function(e){return e.remoteStore}))}function PE(e){return TE(e).then((function(e){return e.syncEngine}))}function RE(e){return TE(e).then((function(e){return e.datastore}))}function OE(e){return LE.apply(this,arguments)}function LE(){return(LE=be(ke().mark((function e(t){var n,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,TE(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=pI.bind(null,n.syncEngine),r.onUnlisten=gI.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ME(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new sv;return e.asyncQueue.enqueueAndForget(be(ke().mark((function i(){return ke().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new vE({next:function(a){t.enqueueAndForget((function(){return J_(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new uv(ov.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new uv(ov.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new rI(ig(n.path),a,{includeMetadataChanges:!0,Ku:!0});return $_(e,o)},i.next=3,OE(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function FE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new sv;return e.asyncQueue.enqueueAndForget(be(ke().mark((function i(){return ke().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new vE({next:function(n){t.enqueueAndForget((function(){return J_(e,o)})),n.fromCache&&"server"===r.source?i.reject(new uv(ov.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new rI(n,a,{includeMetadataChanges:!0,Ku:!0});return $_(e,o)},i.next=3,OE(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function UE(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var jE=new Map;function VE(e,t,n){if(!n)throw new uv(ov.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function zE(e,t,n,r){if(!0===t&&!0===r)throw new uv(ov.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function BE(e){if(!Cv.isDocumentKey(e))throw new uv(ov.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function qE(e){if(Cv.isDocumentKey(e))throw new uv(ov.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function GE(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":rv()}function KE(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new uv(ov.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=GE(e);throw new uv(ov.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function WE(e,t){if(t<=0)throw new uv(ov.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var HE=function(){function e(t){var n,r;if(Ne(this,e),void 0===t.host){if(void 0!==t.ssl)throw new uv(ov.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new uv(ov.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}zE("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=UE(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new uv(ov.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new uv(ov.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new uv(ov.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return De(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}]),e}(),QE=function(){function e(t,n,r,i){Ne(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new HE({}),this._settingsFrozen=!1}return De(e,[{key:"app",get:function(){if(!this._app)throw new uv(ov.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new uv(ov.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new HE(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new lv;switch(e.type){case"firstParty":return new pv(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new uv(ov.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=jE.get(e);t&&(Zp("ComponentProvider","Removing Datastore"),jE.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function YE(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=KE(e,QE))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&tv("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Yp.MOCK_USER;else{o=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[qe(JSON.stringify({alg:"none",type:"JWT"})),qe(JSON.stringify(a)),""].join(".")}(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new uv(ov.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Yp(s)}e._authCredentials=new fv(new cv(o,u))}}var $E=function(){function e(t,n,r){Ne(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return De(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new JE(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),XE=function(){function e(t,n,r){Ne(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return De(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),JE=function(e){Oe(n,e);var t=Fe(n);function n(e,r,i){var a;return Ne(this,n),(a=t.call(this,e,r,ig(i)))._path=i,a.type="collection",a}return De(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new $E(this.firestore,null,new Cv(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(XE);function ZE(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=mt(e),VE("collection","path",t),e instanceof QE){var a=Ev.fromString.apply(Ev,[t].concat(r));return qE(a),new JE(e,null,a)}if(!(e instanceof $E||e instanceof JE))throw new uv(ov.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Ev.fromString.apply(Ev,[t].concat(r)));return qE(o),new JE(e.firestore,null,o)}function eS(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=mt(e),1===arguments.length&&(t=gv.A()),VE("doc","path",t),e instanceof QE){var a=Ev.fromString.apply(Ev,[t].concat(r));return BE(a),new $E(e,null,new Cv(a))}if(!(e instanceof $E||e instanceof JE))throw new uv(ov.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Ev.fromString.apply(Ev,[t].concat(r)));return BE(o),new $E(e.firestore,e instanceof JE?e.converter:null,new Cv(o))}function tS(e,t){return e=mt(e),t=mt(t),(e instanceof $E||e instanceof JE)&&(t instanceof $E||t instanceof JE)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function nS(e,t){return e=mt(e),t=mt(t),e instanceof XE&&t instanceof XE&&e.firestore===t.firestore&&dg(e._query,t._query)&&e.converter===t.converter}var rS=function(){function e(){var t=this;Ne(this,e),this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Yx(this,"async_queue_retry"),this.Xc=function(){var e=Hx();e&&Zp("AsyncQueue","Visibility state changed to "+e.visibilityState),t.qo.Mo()};var n=Hx();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Xc)}return De(e,[{key:"isShuttingDown",get:function(){return this.jc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Zc(),this.ta(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;var t=Hx();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Zc(),this.jc)return new Promise((function(){}));var n=new sv;return this.ta((function(){return t.jc&&t.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Qc.push(e),t.ea()}))}},{key:"ea",value:function(){var e=be(ke().mark((function e(){var t=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Qc.length){e.next=14;break}return e.prev=1,e.next=4,this.Qc[0]();case 4:this.Qc.shift(),this.qo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Hv(e.t0)){e.next=12;break}throw e.t0;case 12:Zp("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Qc.length>0&&this.qo.No((function(){return t.ea()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"ta",value:function(e){var t=this,n=this.Gc.then((function(){return t.Hc=!0,e().catch((function(e){t.Wc=e,t.Hc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw ev("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Hc=!1,e}))}));return this.Gc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);var i=q_.createAndSchedule(this,e,t,n,(function(e){return r.na(e)}));return this.zc.push(i),i}},{key:"Zc",value:function(){this.Wc&&rv()}},{key:"verifyOperationInProgress",value:function(){}},{key:"sa",value:function(){var e=be(ke().mark((function e(){var t;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Gc,e.next=3,t;case 3:if(t!==this.Gc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ia",value:function(e){var t,n=Pe(this.zc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ra",value:function(e){var t=this;return this.sa().then((function(){t.zc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=Pe(t.zc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.sa()}))}},{key:"oa",value:function(e){this.Yc.push(e)}},{key:"na",value:function(e){var t=this.zc.indexOf(e);this.zc.splice(t,1)}}]),e}();function iS(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=Pe(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var aS=function(){function e(){Ne(this,e),this._progressObserver={},this._taskCompletionResolver=new sv,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return De(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),oS=function(e){Oe(n,e);var t=Fe(n);function n(e,r,i,a){var o;return Ne(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new rS,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return De(n,[{key:"_terminate",value:function(){return this._firestoreClient||sS(this),this._firestoreClient.terminate()}}]),n}(QE);function uS(e){return e._firestoreClient||sS(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function sS(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new Jm(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,UE(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new kE(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function cS(e,t,n){var r=new sv;return e.asyncQueue.enqueue(be(ke().mark((function i(){var a;return ke().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,wE(e,n);case 3:return i.next=5,xE(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),IE(a=i.t0)){i.next=13;break}throw a;case 13:tv("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function lS(e){return function(e){return e.asyncQueue.enqueue(be(ke().mark((function t(){var n,r;return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,NE(e);case 2:return n=t.sent,t.next=5,DE(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=av(e);return t.vu.delete(0),n_(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(uS(e=KE(e,oS)))}function fS(e){return function(e){return e.asyncQueue.enqueue(be(ke().mark((function t(){var n,r;return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,NE(e);case 2:return n=t.sent,t.next=5,DE(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=av(t)).vu.add(0),e.next=4,i_(n);case 4:n.bu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(uS(e=KE(e,oS)))}function hS(e,t){var n=uS(e=KE(e,oS)),r=new aS;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new mE(e,t)}(function(e,t){if(e instanceof Uint8Array)return pE(e,t);if(e instanceof ArrayBuffer)return pE(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?xk().encode(e):e),t)}(n,Qx(t));e.asyncQueue.enqueueAndForget(be(ke().mark((function t(){return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=cE,t.next=3,PE(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function dS(e,t){return function(e,t){return e.asyncQueue.enqueue(be(ke().mark((function n(){return ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=av(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.qs.getNamedQuery(e,t)}))},n.next=3,AE(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(uS(e=KE(e,oS)),t).then((function(t){return t?new XE(e,null,t.query):null}))}function pS(e){if(e._initialized||e._terminated)throw new uv(ov.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var vS=function(){function e(t){Ne(this,e),this._byteString=t}return De(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Gm.fromBase64String(t))}catch(t){throw new uv(ov.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Gm.fromUint8Array(t))}}]),e}(),mS=function(){function e(){Ne(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new uv(ov.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tv(n)}return De(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var yS=De((function e(t){Ne(this,e),this._methodName=t})),gS=function(){function e(t,n){if(Ne(this,e),!isFinite(t)||t<-90||t>90)throw new uv(ov.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new uv(ov.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return De(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return kv(this._lat,e._lat)||kv(this._long,e._long)}}]),e}(),kS=/^__.*__$/,wS=function(){function e(t,n,r){Ne(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return De(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new ok(e,this.data,this.fieldMask,t,this.fieldTransforms):new ak(e,this.data,t,this.fieldTransforms)}}]),e}(),bS=function(){function e(t,n,r){Ne(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return De(e,[{key:"toMutation",value:function(e,t){return new ok(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function xS(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rv()}}var _S=function(){function e(t,n,r,i,a,o){Ne(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return De(e,[{key:"path",get:function(){return this.settings.path}},{key:"ca",get:function(){return this.settings.ca}},{key:"aa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ha",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}},{key:"da",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}},{key:"wa",value:function(e){return this.aa({path:void 0,la:!0})}},{key:"_a",value:function(e){return qS(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ua",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.fa(this.path.get(e))}},{key:"fa",value:function(e){if(0===e.length)throw this._a("Document fields must not be empty");if(xS(this.ca)&&kS.test(e))throw this._a('Document fields cannot begin and end with "__"')}}]),e}(),IS=function(){function e(t,n,r){Ne(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Qx(t)}return De(e,[{key:"ya",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new _S({ca:e,methodName:t,ga:n,path:Tv.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function ES(e){var t=e._freezeSettings(),n=Qx(e._databaseId);return new IS(e._databaseId,!!t.ignoreUndefinedProperties,n)}function SS(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ya(a.merge||a.mergeFields?2:0,t,n,i);jS("Data must be an object, but it was:",o,r);var u,s,c=FS(r,o);if(a.merge)u=new Bm(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=Pe(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=VS(t,l.value,n);if(!o.contains(d))throw new uv(ov.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));GS(f,d)||f.push(d)}}catch(p){h.e(p)}finally{h.f()}u=new Bm(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new wS(new by(c),u,s)}var TS=function(e){Oe(n,e);var t=Fe(n);function n(){return Ne(this,n),t.apply(this,arguments)}return De(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(yS);function CS(e,t,n){return new _S({ca:3,ga:t.settings.ga,methodName:e._methodName,la:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var NS=function(e){Oe(n,e);var t=Fe(n);function n(){return Ne(this,n),t.apply(this,arguments)}return De(n,[{key:"_toFieldTransform",value:function(e){return new Yg(e.path,new zg)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(yS),AS=function(e){Oe(n,e);var t=Fe(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this,e)).pa=r,i}return De(n,[{key:"_toFieldTransform",value:function(e){var t=CS(this,e,!0),n=this.pa.map((function(e){return MS(e,t)})),r=new Bg(n);return new Yg(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(yS),DS=function(e){Oe(n,e);var t=Fe(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this,e)).pa=r,i}return De(n,[{key:"_toFieldTransform",value:function(e){var t=CS(this,e,!0),n=this.pa.map((function(e){return MS(e,t)})),r=new Gg(n);return new Yg(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(yS),PS=function(e){Oe(n,e);var t=Fe(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this,e)).Ia=r,i}return De(n,[{key:"_toFieldTransform",value:function(e){var t=new Wg(e.serializer,Mg(e.serializer,this.Ia));return new Yg(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(yS);function RS(e,t,n,r){var i=e.ya(1,t,n);jS("Data must be an object, but it was:",i,r);var a=[],o=by.empty();Om(r,(function(e,r){var u=BS(t,e,n);r=mt(r);var s=i.da(u);if(r instanceof TS)a.push(u);else{var c=MS(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Bm(a);return new bS(o,u,i.fieldTransforms)}function OS(e,t,n,r,i,a){var o=e.ya(1,t,n),u=[VS(t,r,n)],s=[i];if(a.length%2!=0)throw new uv(ov.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(VS(t,a[c])),s.push(a[c+1]);for(var l=[],f=by.empty(),h=u.length-1;h>=0;--h)if(!GS(l,u[h])){var d=u[h],p=s[h];p=mt(p);var v=o.da(d);if(p instanceof TS)l.push(d);else{var m=MS(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new Bm(l);return new bS(f,y,o.fieldTransforms)}function LS(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return MS(n,e.ya(r?4:3,t))}function MS(e,t){if(US(e=mt(e)))return jS("Unsupported field value:",t,e),FS(e,t);if(e instanceof yS)return function(e,t){if(!xS(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=Pe(e);try{for(a.s();!(n=a.n()).done;){var o=MS(n.value,t.wa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=mt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Mg(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=xv.fromDate(e);return{timestampValue:Bk(t.serializer,n)}}if(e instanceof xv){var r=new xv(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Bk(t.serializer,r)}}if(e instanceof gS)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof vS)return{bytesValue:qk(t.serializer,e._byteString)};if(e instanceof $E){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t._a("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Wk(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(GE(e)))}(e,t)}function FS(e,t){var n={};return Lm(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Om(e,(function(e,r){var i=MS(r,t.ha(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function US(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof xv||e instanceof gS||e instanceof vS||e instanceof $E||e instanceof yS)}function jS(e,t,n){if(!US(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=GE(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function VS(e,t,n){if((t=mt(t))instanceof mS)return t._internalPath;if("string"==typeof t)return BS(e,t);throw qS("Field path arguments must be of type string or ",e,!1,void 0,n)}var zS=new RegExp("[~\\*/\\[\\]]");function BS(e,t,n){if(t.search(zS)>=0)throw qS("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return Ue(mS,gt(t.split(".")))._internalPath}catch(r){throw qS("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function qS(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new uv(ov.INVALID_ARGUMENT,u+e+s)}function GS(e,t){return e.some((function(e){return e.isEqual(t)}))}var KS=function(){function e(t,n,r,i,a){Ne(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return De(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new $E(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new WS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(HS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),WS=function(e){Oe(n,e);var t=Fe(n);function n(){return Ne(this,n),t.apply(this,arguments)}return De(n,[{key:"data",value:function(){return Yn(Le(n.prototype),"data",this).call(this)}}]),n}(KS);function HS(e,t){return"string"==typeof t?BS(e,t):t instanceof mS?t._internalPath:t._delegate._internalPath}function QS(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new uv(ov.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var YS=De((function e(){Ne(this,e)})),$S=function(e){Oe(n,e);var t=Fe(n);function n(){return Ne(this,n),t.apply(this,arguments)}return De(n)}(YS);function XS(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof YS&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof ZS})).length,n=e.filter((function(e){return e instanceof JS})).length;if(t>1||t>0&&n>0)throw new uv(ov.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=Pe(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var JS=function(e){Oe(n,e);var t=Fe(n);function n(e,r,i){var a;return Ne(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return De(n,[{key:"_apply",value:function(e){var t=this._parse(e);return fT(e._query,t),new XE(e.firestore,e.converter,fg(e._query,t))}},{key:"_parse",value:function(e){var t=ES(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new uv(ov.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){lT(o,a);var s,c=[],l=Pe(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(cT(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=cT(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||lT(o,a),u=LS(n,"where",o,"in"===a||"not-in"===a);return Ay.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}($S);var ZS=function(e){Oe(n,e);var t=Fe(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return De(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:Dy.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=Pe(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;fT(r,a),r=fg(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new XE(e.firestore,e.converter,fg(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(YS);var eT=function(e){Oe(n,e);var t=Fe(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return De(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new uv(ov.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new uv(ov.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Ty(t,n);return function(e,t){if(null===og(e)){var n=ug(e);null!==n&&hT(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new XE(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new ng(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}($S);var tT=function(e){Oe(n,e);var t=Fe(n);function n(e,r,i){var a;return Ne(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return De(n,[{key:"_apply",value:function(e){return new XE(e.firestore,e.converter,hg(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}($S);var nT=function(e){Oe(n,e);var t=Fe(n);function n(e,r,i){var a;return Ne(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return De(n,[{key:"_apply",value:function(e){var t=sT(e,this.type,this._docOrFields,this._inclusive);return new XE(e.firestore,e.converter,function(e,t){return new ng(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}($S);function rT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nT._create("startAt",t,!0)}function iT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nT._create("startAfter",t,!1)}var aT=function(e){Oe(n,e);var t=Fe(n);function n(e,r,i){var a;return Ne(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return De(n,[{key:"_apply",value:function(e){var t=sT(e,this.type,this._docOrFields,this._inclusive);return new XE(e.firestore,e.converter,function(e,t){return new ng(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}($S);function oT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return aT._create("endBefore",t,!1)}function uT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return aT._create("endAt",t,!0)}function sT(e,t,n,r){if(n[0]=mt(n[0]),n[0]instanceof KS)return function(e,t,n,r,i){if(!r)throw new uv(ov.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=Pe(cg(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(cy(t,r.key));else{var c=r.data.field(s.field);if(Ym(c))throw new uv(ov.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new uv(ov.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Iy(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=ES(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new uv(ov.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new uv(ov.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!sg(e)&&-1!==c.indexOf("/"))throw new uv(ov.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Ev.fromString(c));if(!Cv.isDocumentKey(l))throw new uv(ov.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Cv(l);u.push(cy(t,f))}else{var h=LS(n,r,c);u.push(h)}}return new Iy(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function cT(e,t,n){if("string"==typeof(n=mt(n))){if(""===n)throw new uv(ov.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sg(t)&&-1!==n.indexOf("/"))throw new uv(ov.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Ev.fromString(n));if(!Cv.isDocumentKey(r))throw new uv(ov.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return cy(e,new Cv(r))}if(n instanceof $E)return cy(e,n._key);throw new uv(ov.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(GE(n),"."))}function lT(e,t){if(!Array.isArray(e)||0===e.length)throw new uv(ov.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function fT(e,t){if(t.isInequality()){var n=ug(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new uv(ov.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=og(e);null!==i&&hT(e,r,i)}var a=function(e,t){var n,r=Pe(e);try{for(r.s();!(n=r.n()).done;){var i,a=Pe(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new uv(ov.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new uv(ov.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function hT(e,t,n){if(!n.isEqual(t))throw new uv(ov.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var dT=function(){function e(){Ne(this,e)}return De(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(ny(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Hm(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Qm(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw rv()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return Om(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new gS(Hm(e.latitude),Hm(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=$m(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Xm(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Wm(e);return new xv(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Ev.fromString(e);iv(mw(n));var r=new Zm(n.get(1),n.get(3)),i=new Cv(n.popFirst(5));return r.isEqual(t)||ev("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function pT(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var vT=function(e){Oe(n,e);var t=Fe(n);function n(e){var r;return Ne(this,n),(r=t.call(this)).firestore=e,r}return De(n,[{key:"convertBytes",value:function(e){return new vS(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new $E(this.firestore,null,t)}}]),n}(dT);var mT=function(){function e(t,n){Ne(this,e),this.hasPendingWrites=t,this.fromCache=n}return De(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),yT=function(e){Oe(n,e);var t=Fe(n);function n(e,r,i,a,o,u){var s;return Ne(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return De(n,[{key:"exists",value:function(){return Yn(Le(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new gT(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(HS("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(KS),gT=function(e){Oe(n,e);var t=Fe(n);function n(){return Ne(this,n),t.apply(this,arguments)}return De(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Yn(Le(n.prototype),"data",this).call(this,e)}}]),n}(yT),kT=function(){function e(t,n,r,i){Ne(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new mT(i.hasPendingWrites,i.fromCache),this.query=r}return De(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new gT(n._firestore,n._userDataWriter,r.key,r,new mT(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new uv(ov.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new gT(e._firestore,e._userDataWriter,t.doc.key,t.doc,new mT(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new gT(e._firestore,e._userDataWriter,t.doc.key,t.doc,new mT(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:wT(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function wT(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rv()}}function bT(e,t){return e instanceof yT&&t instanceof yT?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof kT&&t instanceof kT&&e._firestore===t._firestore&&nS(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var xT=function(e){Oe(n,e);var t=Fe(n);function n(e){var r;return Ne(this,n),(r=t.call(this)).firestore=e,r}return De(n,[{key:"convertBytes",value:function(e){return new vS(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new $E(this.firestore,null,t)}}]),n}(dT);function _T(e){e=KE(e,$E);var t=KE(e.firestore,oS),n=uS(t),r=new xT(t);return function(e,t){var n=new sv;return e.asyncQueue.enqueueAndForget(be(ke().mark((function r(){return ke().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=be(ke().mark((function e(t,n,r){var i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=av(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new uv(ov.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=G_(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,AE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new yT(t,r,e._key,n,new mT(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function IT(e){e=KE(e,XE);var t=KE(e.firestore,oS),n=uS(t),r=new xT(t);return function(e,t){var n=new sv;return e.asyncQueue.enqueueAndForget(be(ke().mark((function r(){return ke().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=be(ke().mark((function e(t,n,r){var i,a,o,u,s;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wx(t,n,!0);case 3:i=e.sent,a=new lI(n,i.ir),o=a.sc(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=G_(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,AE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new kT(t,r,e,n)}))}function ET(e,t,n){e=KE(e,$E);var r=KE(e.firestore,oS),i=pT(e.converter,t,n);return NT(r,[SS(ES(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Xg.none())])}function ST(e,t,n){e=KE(e,$E);for(var r=KE(e.firestore,oS),i=ES(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return NT(r,[("string"==typeof(t=mt(t))||t instanceof mS?OS(i,"updateDoc",e._key,t,n,o):RS(i,"updateDoc",e._key,t)).toMutation(e._key,Xg.exists(!0))])}function TT(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=mt(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||iS(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(iS(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof $E)l=KE(e.firestore,oS),f=ig(e._key.path),c={next:function(t){n[s]&&n[s](AT(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=KE(e,XE);l=KE(p.firestore,oS),f=p._query;var v=new xT(l);c={next:function(e){n[s]&&n[s](new kT(l,v,p,e))},error:n[s+1],complete:n[s+2]},QS(e._query)}return function(e,t,n,r){var i=new vE(r),a=new rI(t,i,n);return e.asyncQueue.enqueueAndForget(be(ke().mark((function t(){return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=$_,t.next=3,OE(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Dc(),e.asyncQueue.enqueueAndForget(be(ke().mark((function t(){return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=J_,t.next=3,OE(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(uS(l),f,h,c)}function CT(e,t){return function(e,t){var n=new vE(t);return e.asyncQueue.enqueueAndForget(be(ke().mark((function t(){return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){av(e).ku.add(t),t.next()},t.next=3,OE(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Dc(),e.asyncQueue.enqueueAndForget(be(ke().mark((function t(){return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){av(e).ku.delete(t)},t.next=3,OE(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(uS(e=KE(e,oS)),iS(t)?t:{next:t})}function NT(e,t){return function(e,t){var n=new sv;return e.asyncQueue.enqueueAndForget(be(ke().mark((function r(){return ke().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=wI,r.next=3,PE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(uS(e),t)}function AT(e,t,n){var r=n.docs.get(t._key),i=new xT(e);return new yT(e,i,t._key,r,new mT(n.hasPendingWrites,n.fromCache),t.converter)}var DT={maxAttempts:5},PT=function(){function e(t,n){Ne(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ES(t)}return De(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=RT(e,this._firestore),i=pT(r.converter,t,n),a=SS(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Xg.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=RT(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=mt(t))||t instanceof mS?OS(this._dataReader,"WriteBatch.update",i._key,t,n,o):RS(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Xg.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=RT(e,this._firestore);return this._mutations=this._mutations.concat(new hk(t._key,Xg.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new uv(ov.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function RT(e,t){if((e=mt(e)).firestore!==t)throw new uv(ov.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var OT=function(e){Oe(n,e);var t=Fe(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this,e,r))._firestore=e,i}return De(n,[{key:"get",value:function(e){var t=this,r=RT(e,this._firestore),i=new xT(this._firestore);return Yn(Le(n.prototype),"get",this).call(this,e).then((function(e){return new yT(t._firestore,i,r._key,e._document,new mT(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){Ne(this,e),this._firestore=t,this._transaction=n,this._dataReader=ES(t)}return De(e,[{key:"get",value:function(e){var t=this,n=RT(e,this._firestore),r=new vT(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return rv();var i=e[0];if(i.isFoundDocument())return new KS(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new KS(t._firestore,r,n._key,null,n.converter);throw rv()}))}},{key:"set",value:function(e,t,n){var r=RT(e,this._firestore),i=pT(r.converter,t,n),a=SS(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=RT(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=mt(t))||t instanceof mS?OS(this._dataReader,"Transaction.update",i._key,t,n,o):RS(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=RT(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function LT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new AS("arrayUnion",t)}function MT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new DS("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){$p=e}(mn),cn(new kt("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new oS(new hv(e.getProvider("auth-internal")),new mv(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new uv(ov.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zm(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),xn(Qp,"3.12.1",e),xn(Qp,"3.12.1","esm2017")}();function FT(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new uv("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function UT(){if("undefined"===typeof Uint8Array)throw new uv("unimplemented","Uint8Arrays are not available in this environment.")}function jT(){if("undefined"==typeof atob)throw new uv("unimplemented","Blobs are unavailable in Firestore in this environment.")}var VT=function(){function e(t){Ne(this,e),this._delegate=t}return De(e,[{key:"toBase64",value:function(){return jT(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return UT(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return jT(),new e(vS.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return UT(),new e(vS.fromUint8Array(t))}}]),e}();function zT(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=Pe(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var BT=function(){function e(){Ne(this,e)}return De(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){pS(e=KE(e,oS));var n=uS(e);if(n._uninitializedComponentsProvider)throw new uv(ov.FAILED_PRECONDITION,"SDK cache is already specified.");tv("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new dE;return cS(n,i,new fE(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){pS(e=KE(e,oS));var t=uS(e);if(t._uninitializedComponentsProvider)throw new uv(ov.FAILED_PRECONDITION,"SDK cache is already specified.");tv("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new dE;return cS(t,r,new hE(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new uv(ov.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new sv;return e._queue.enqueueAndForgetEvenWhileRestricted(be(ke().mark((function n(){return ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=be(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Gv.D()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Gv.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(ax(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),qT=function(){function e(t,n,r){var i=this;Ne(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Zm||(this._appCompat=t)}return De(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||tv("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};YE(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return lS(this._delegate)}},{key:"disableNetwork",value:function(){return fS(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&zE("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){var t=new sv;return e.asyncQueue.enqueueAndForget(be(ke().mark((function n(){return ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=DI,n.next=3,PE(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(uS(KE(this._delegate,oS)))}},{key:"onSnapshotsInSync",value:function(e){return CT(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new uv("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new rC(this,ZE(this._delegate,e))}catch(t){throw YT(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new QT(this,eS(this._delegate,e))}catch(t){throw YT(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new eC(this,function(e,t){if(e=KE(e,QE),VE("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new uv(ov.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new XE(e,null,function(e){return new ng(Ev.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw YT(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=KE(e,oS);var r=Object.assign(Object.assign({},DT),n);return function(e){if(e.maxAttempts<1)throw new uv(ov.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new sv;return e.asyncQueue.enqueueAndForget(be(ke().mark((function i(){var a;return ke().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,RE(e);case 2:a=i.sent,new gE(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(uS(e),(function(n){return t(new OT(e,n))}),r)}(this._delegate,(function(n){return e(new KT(t,n))}))}},{key:"batch",value:function(){var e=this;return uS(this._delegate),new WT(new PT(this._delegate,(function(t){return NT(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return hS(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return dS(this._delegate,e).then((function(e){return e?new eC(t,e):null}))}}]),e}(),GT=function(e){Oe(n,e);var t=Fe(n);function n(e){var r;return Ne(this,n),(r=t.call(this)).firestore=e,r}return De(n,[{key:"convertBytes",value:function(e){return new VT(new vS(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return QT.forKey(t,this.firestore,null)}}]),n}(dT);var KT=function(){function e(t,n){Ne(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new GT(t)}return De(e,[{key:"get",value:function(e){var t=this,n=iC(e);return this._delegate.get(n).then((function(e){return new JT(t._firestore,new yT(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=iC(e);return n?(FT("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=iC(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=iC(e);return this._delegate.delete(t),this}}]),e}(),WT=function(){function e(t){Ne(this,e),this._delegate=t}return De(e,[{key:"set",value:function(e,t,n){var r=iC(e);return n?(FT("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=iC(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=iC(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),HT=function(){function e(t,n,r){Ne(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return De(e,[{key:"fromFirestore",value:function(e,t){var n=new gT(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ZT(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new GT(t),n),i.set(n,a)),a}}]),e}();HT.INSTANCES=new WeakMap;var QT=function(){function e(t,n){Ne(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new GT(t)}return De(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new rC(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new rC(this.firestore,ZE(this._delegate,e))}catch(t){throw YT(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=mt(e))instanceof $E&&tS(this._delegate,e)}},{key:"set",value:function(e,t){t=FT("DocumentReference.set",t);try{return t?ET(this._delegate,e,t):ET(this._delegate,e)}catch(n){throw YT(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?ST(this._delegate,e):ST.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw YT(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return NT(KE((e=this._delegate).firestore,oS),[new hk(e._key,Xg.none())]);var e}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=$T(n),a=XT(n,(function(t){return new JT(e.firestore,new yT(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return TT(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?_T(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=KE(e,$E);var t=KE(e.firestore,oS);return ME(uS(t),e._key,{source:"server"}).then((function(n){return AT(t,e,n)}))}(this._delegate):function(e){e=KE(e,$E);var t=KE(e.firestore,oS);return ME(uS(t),e._key).then((function(n){return AT(t,e,n)}))}(this._delegate)).then((function(e){return new JT(t.firestore,new yT(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(HT.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new uv("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new $E(n._delegate,r,new Cv(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new $E(n._delegate,r,t))}}]),e}();function YT(e,t,n){return e.message=e.message.replace(t,n),e}function $T(e){var t,n=Pe(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!zT(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function XT(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=zT(e[0])?e[0]:zT(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var JT=function(){function e(t,n){Ne(this,e),this._firestore=t,this._delegate=n}return De(e,[{key:"ref",get:function(){return new QT(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return bT(this._delegate,e._delegate)}}]),e}(),ZT=function(e){Oe(n,e);var t=Fe(n);function n(){return Ne(this,n),t.apply(this,arguments)}return De(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return void 0!==t||rv(),t}}]),n}(JT),eC=function(){function e(t,n){Ne(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new GT(t)}return De(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,XS(this._delegate,function(e,t,n){var r=t,i=HS("where",e);return JS._create(i,r,n)}(t,n,r)))}catch(i){throw YT(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,XS(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=HS("orderBy",e);return eT._create(n,t)}(t,n)))}catch(r){throw YT(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,XS(this._delegate,(WE("limit",n=t),tT._create("limit",n,"F"))))}catch(r){throw YT(r,"limit()","Query.limit()")}var n}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,XS(this._delegate,(WE("limitToLast",n=t),tT._create("limitToLast",n,"L"))))}catch(r){throw YT(r,"limitToLast()","Query.limitToLast()")}var n}},{key:"startAt",value:function(){try{return new e(this.firestore,XS(this._delegate,rT.apply(void 0,arguments)))}catch(t){throw YT(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,XS(this._delegate,iT.apply(void 0,arguments)))}catch(t){throw YT(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,XS(this._delegate,oT.apply(void 0,arguments)))}catch(t){throw YT(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,XS(this._delegate,uT.apply(void 0,arguments)))}catch(t){throw YT(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return nS(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?IT(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=KE(e,XE);var t=KE(e.firestore,oS),n=uS(t),r=new xT(t);return FE(n,e._query,{source:"server"}).then((function(n){return new kT(t,r,e,n)}))}(this._delegate):function(e){e=KE(e,XE);var t=KE(e.firestore,oS),n=uS(t),r=new xT(t);return QS(e._query),FE(n,e._query).then((function(n){return new kT(t,r,e,n)}))}(this._delegate)).then((function(e){return new nC(t.firestore,new kT(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=$T(n),a=XT(n,(function(t){return new nC(e.firestore,new kT(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return TT(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(HT.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),tC=function(){function e(t,n){Ne(this,e),this._firestore=t,this._delegate=n}return De(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new ZT(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),nC=function(){function e(t,n){Ne(this,e),this._firestore=t,this._delegate=n}return De(e,[{key:"query",get:function(){return new eC(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new ZT(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new tC(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new ZT(n._firestore,r))}))}},{key:"isEqual",value:function(e){return bT(this._delegate,e._delegate)}}]),e}(),rC=function(e){Oe(n,e);var t=Fe(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return De(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new QT(this.firestore,e):null}},{key:"doc",value:function(e){try{return new QT(this.firestore,void 0===e?eS(this._delegate):eS(this._delegate,e))}catch(t){throw YT(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=KE(e.firestore,oS),r=eS(e),i=pT(e.converter,t);return NT(n,[SS(ES(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Xg.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new QT(t.firestore,e)}))}},{key:"isEqual",value:function(e){return tS(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(HT.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(eC);function iC(e){return KE(e,$E)}var aC=function(){function e(){Ne(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=Ue(mS,n)}return De(e,[{key:"isEqual",value:function(e){return(e=mt(e))instanceof mS&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Tv.keyField().canonicalString())}}]),e}(),oC=function(){function e(t){Ne(this,e),this._delegate=t}return De(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new NS("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new TS("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=LT.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=MT.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=new PS("increment",t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),uC={Firestore:qT,GeoPoint:gS,Timestamp:xv,Blob:VT,Transaction:KT,WriteBatch:WT,DocumentReference:QT,DocumentSnapshot:JT,Query:eC,QueryDocumentSnapshot:ZT,QuerySnapshot:nC,CollectionReference:rC,FieldPath:aC,FieldValue:oC,setLogLevel:function(e){var t;t=e,Xp.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new kt("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},uC)))}(e,(function(e,t){return new qT(e,t,new BT)})),e.registerVersion("@firebase/firestore-compat","0.3.10")}(Qn);Qn.initializeApp({apiKey:"AIzaSyAUnbVwO40hLrpO2Z0ZaP4FlNPYrAmBpvc",authDomain:"alectowatch.firebaseapp.com",projectId:"alectowatch",storageBucket:"alectowatch.appspot.com",messagingSenderId:"71024024661",appId:"1:71024024661:web:ad81f3d063b2d5e4ef48dc"});var sC=function(){var e=be(ke().mark((function e(t){var n,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fC.collection("users").where("email","==",t).get();case 3:if((n=e.sent).empty){e.next=7;break}return r=n.docs[0],e.abrupt("return",r.data());case 7:return e.abrupt("return",null);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),cC=Qn.auth(),lC=Qn.firestore(),fC=Qn.firestore(),hC=function(){var e=Se((0,t.useState)(""),2),n=e[0],r=e[1],i=Se((0,t.useState)(""),2),a=i[0],o=i[1],u=ie(q),s=function(){var e=be(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,sC(n);case 4:if(e.sent){e.next=8;break}return alert("This email is not registered."),e.abrupt("return");case 8:return e.next=10,cC.signInWithEmailAndPassword(n,a);case 10:r(""),o(""),u.push("/welcome"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),console.error("Error signing in:",e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}();return(0,pe.jsxs)("div",{className:"signin-container",children:[(0,pe.jsx)("h2",{children:"Sign In"}),(0,pe.jsxs)("form",{className:"signin-form",onSubmit:s,children:[(0,pe.jsx)("input",{type:"email",name:"email",placeholder:"Email",value:n,onChange:function(e){return r(e.target.value)},required:!0}),(0,pe.jsx)("input",{type:"password",name:"password",placeholder:"Password",value:a,onChange:function(e){return o(e.target.value)},required:!0}),(0,pe.jsx)("button",{type:"submit",children:"Sign In"})]}),(0,pe.jsx)("div",{className:"register-link",children:(0,pe.jsxs)("p",{children:["Don't have an account? ",(0,pe.jsx)(fe,{to:"/registration",children:"Register"})]})})]})},dC=function(){var e=Se((0,t.useState)(""),2),n=e[0],r=e[1],i=Se((0,t.useState)(""),2),a=i[0],o=i[1],u=Se((0,t.useState)(""),2),s=u[0],c=u[1],l=function(){var e=be(ke().mark((function e(t){var i,u;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,sC(a);case 4:if(!e.sent){e.next=8;break}return alert("This email is already registered."),e.abrupt("return");case 8:return e.next=10,cC.createUserWithEmailAndPassword(a,s);case 10:return i=e.sent,u=i.user,e.next=14,lC.collection("users").doc(u.uid).set({username:n,email:a});case 14:r(""),o(""),c(""),alert("Registration successful!"),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(1),console.error("Error registering user:",e.t0.message);case 23:case"end":return e.stop()}}),e,null,[[1,20]])})));return function(t){return e.apply(this,arguments)}}();return(0,pe.jsxs)("div",{className:"registration-container",children:[(0,pe.jsx)("h2",{children:"Sign Up"}),(0,pe.jsxs)("form",{className:"registration-form",onSubmit:l,children:[(0,pe.jsx)("input",{type:"text",name:"username",placeholder:"Username",value:n,onChange:function(e){return r(e.target.value)},required:!0}),(0,pe.jsx)("input",{type:"email",name:"email",placeholder:"Email",value:a,onChange:function(e){return o(e.target.value)},required:!0}),(0,pe.jsx)("input",{type:"password",name:"password",placeholder:"Password",value:s,onChange:function(e){return c(e.target.value)},required:!0}),(0,pe.jsx)("button",{type:"submit",children:"Register"})]})]})},pC=function(){var e=Se((0,t.useState)(""),2),n=e[0],r=e[1],i=Se((0,t.useState)(""),2),a=i[0],o=i[1],u=Se((0,t.useState)({width:window.innerWidth,height:window.innerHeight}),2),s=u[0],c=u[1];return(0,t.useEffect)((function(){var e=setInterval((function(){var e=(new Date).toLocaleTimeString();r(e)}),1e3);fetch("https://ipapi.co/json/").then((function(e){return e.json()})).then((function(e){var t="".concat(e.city,", ").concat(e.region,", ").concat(e.country);o(t)})).catch((function(e){console.error("Error fetching user location:",e)}));var t=function(){c({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",t),function(){clearInterval(e),window.removeEventListener("resize",t)}}),[]),(0,pe.jsxs)("div",{className:"welcome-container",children:[(0,pe.jsx)("h2",{children:"Welcome!"}),(0,pe.jsx)("p",{className:"welcome-description",children:"Discover the best in home security."}),(0,pe.jsxs)("div",{className:"current-time",children:[(0,pe.jsxs)("p",{children:["Current Time: ",n]}),(0,pe.jsx)("button",{onClick:function(){return r((new Date).toLocaleTimeString())},children:"Refresh Time"})]}),(0,pe.jsxs)("p",{className:"user-location",children:["User Location: ",a]}),(0,pe.jsxs)("p",{className:"window-size",children:["Window Size: ",s.width," x ",s.height]})]})},vC=function(){return(0,pe.jsxs)("div",{className:"feature-page",children:[(0,pe.jsx)("h2",{children:"24/7 Surveillance"}),(0,pe.jsx)("p",{children:"24/7 Surveillance: Stay connected and monitor your home or property from anywhere at any time using the AlectoWatch mobile app."}),(0,pe.jsx)("img",{src:"https://firebasestorage.googleapis.com/v0/b/alectowatch.appspot.com/o/24-7.png?alt=media&token=116ed5b4-c08b-4bc2-a5fc-3fb2b6a91fd5&_gl=1*fgc1lo*_ga*MTAzMzAzNjQzLjE2ODU0NzA5Mjg.*_ga_CW55HF8NVT*MTY4NTUxNDM5NC41LjEuMTY4NTUxNDYxMi4wLjAuMA..",alt:"Surveillance",className:"feature-image"})]})},mC=function(){return(0,pe.jsxs)("div",{className:"feature-page",children:[(0,pe.jsx)("h2",{children:"Intelligent Intrusion Detection"}),(0,pe.jsx)("p",{children:"Intelligent Intrusion Detection: AlectoWatch utilizes AI algorithms to intelligently differentiate between normal movements and potential threats, reducing false alarms and providing accurate detection and sending instant smart alerts to your smartphone if it detects any breach in your security system."}),(0,pe.jsx)("img",{src:"https://firebasestorage.googleapis.com/v0/b/alectowatch.appspot.com/o/Intelligent%20Intrusion%20Detection.jpeg?alt=media&token=df1c4bcf-6460-4e23-948e-e937067888ca&_gl=1*1wacmie*_ga*MTAzMzAzNjQzLjE2ODU0NzA5Mjg.*_ga_CW55HF8NVT*MTY4NTUxNDM5NC41LjEuMTY4NTUxNTE2Ny4wLjAuMA..",alt:"IntelligentIntrusionDetection",className:"feature-image"})]})},yC=function(){return(0,pe.jsxs)("div",{className:"feature-page",children:[(0,pe.jsx)("h2",{children:"Night Vision"}),(0,pe.jsx)("p",{children:"Night Vision: See clearly even in low-light or dark environments with AlectoWatch's advanced night vision capabilities and communicate in real-time with anyone near the AlectoWatch cameras using the built-in two-way audio feature."}),(0,pe.jsx)("img",{src:"https://firebasestorage.googleapis.com/v0/b/alectowatch.appspot.com/o/Night%20Vision.jpg?alt=media&token=8c50255c-c712-4233-85a1-a16ad2229af1&_gl=1*pkfnrp*_ga*MTAzMzAzNjQzLjE2ODU0NzA5Mjg.*_ga_CW55HF8NVT*MTY4NTUxNDM5NC41LjEuMTY4NTUxNTI2MC4wLjAuMA..",alt:"NightVision",className:"feature-image"})]})},gC=function(){return(0,pe.jsxs)("div",{className:"feature-page",children:[(0,pe.jsx)("h2",{children:"Smart Home Integration"}),(0,pe.jsx)("p",{children:"Smart Home Integration: Seamlessly integrate AlectoWatch with other smart home devices, such as smart locks or lighting systems, for enhanced security and automation."}),(0,pe.jsx)("img",{src:"https://firebasestorage.googleapis.com/v0/b/alectowatch.appspot.com/o/Smart%20Home%20Integration.png?alt=media&token=c5cd7b1a-c016-4937-b155-bc55aaaba7ba&_gl=1*1xrchpb*_ga*MTAzMzAzNjQzLjE2ODU0NzA5Mjg.*_ga_CW55HF8NVT*MTY4NTUxNDM5NC41LjEuMTY4NTUxNTQ0Ny4wLjAuMA..",alt:"SmartHomeIntegration",className:"feature-image"})]})},kC=function(){return(0,pe.jsxs)("div",{className:"feature-page",children:[(0,pe.jsx)("h2",{children:"Cloud Storage"}),(0,pe.jsx)("p",{children:"Cloud Storage: Safely store and access recorded video footage in the cloud, providing an extra layer of backup and security"}),(0,pe.jsx)("img",{src:"https://firebasestorage.googleapis.com/v0/b/alectowatch.appspot.com/o/Cloud%20Storage.jpg?alt=media&token=1b4140b3-1311-45d0-80a0-59d4a7a46ad4&_gl=1*chniyy*_ga*MTAzMzAzNjQzLjE2ODU0NzA5Mjg.*_ga_CW55HF8NVT*MTY4NTUxNDM5NC41LjEuMTY4NTUxNTYxNi4wLjAuMA..",alt:"CloudStorage",className:"feature-image"})]})},wC=function(){return(0,pe.jsxs)("div",{className:"feature-page",children:[(0,pe.jsx)("h2",{children:"Multi-User Access"}),(0,pe.jsx)("p",{children:"Multi-User Access: Share access to your AlectoWatch system with trusted family members or friends, allowing them to monitor and control security settings."}),(0,pe.jsx)("img",{src:"https://firebasestorage.googleapis.com/v0/b/alectowatch.appspot.com/o/Multi-User%20Access.png?alt=media&token=8a10640e-d55d-4d82-a0c3-5689979dd0d7&_gl=1*9zp69c*_ga*MTAzMzAzNjQzLjE2ODU0NzA5Mjg.*_ga_CW55HF8NVT*MTY4NTUxNDM5NC41LjEuMTY4NTUxNTcxNi4wLjAuMA..",alt:"MultiUserAccess",className:"feature-image"})]})},bC=function(){return(0,pe.jsxs)("div",{className:"feature-page",children:[(0,pe.jsx)("h2",{children:"Facial Recognition"}),(0,pe.jsx)("p",{children:"Facial Recognition: The AlectoWatch system employs facial recognition technology to identify familiar faces and send customized notifications when recognized individuals are detected."}),(0,pe.jsx)("img",{src:"https://firebasestorage.googleapis.com/v0/b/alectowatch.appspot.com/o/Facial%20Recognition.jpg?alt=media&token=1149198e-02da-4cd0-bb3a-0c00cfc1814d&_gl=1*lzmmps*_ga*MTAzMzAzNjQzLjE2ODU0NzA5Mjg.*_ga_CW55HF8NVT*MTY4NTUxNDM5NC41LjEuMTY4NTUxNTg0NC4wLjAuMA..",alt:"FacialRecognition",className:"feature-image"})]})},xC=function(){return(0,pe.jsxs)("div",{className:"feature-page",children:[(0,pe.jsx)("h2",{children:"Smart Monitoring Zones"}),(0,pe.jsx)("p",{children:"Smart Monitoring Zones: By utilizing AI-based zoning, AlectoWatch enables you to define specific areas within your property for enhanced monitoring, triggering alerts and recording activities in those zones."}),(0,pe.jsx)("img",{src:"https://firebasestorage.googleapis.com/v0/b/alectowatch.appspot.com/o/Smart%20Monitoring%20Zones.png?alt=media&token=80ee9736-ce80-433f-813e-c9fdd755d3f3&_gl=1*z75yn9*_ga*MTAzMzAzNjQzLjE2ODU0NzA5Mjg.*_ga_CW55HF8NVT*MTY4NTUxNDM5NC41LjEuMTY4NTUxNTk4MC4wLjAuMA..",alt:"SmartMonitoringZones",className:"feature-image"})]})},_C=function(){return(0,pe.jsxs)("div",{className:"feature-page",children:[(0,pe.jsx)("h2",{children:"Adaptive Learning"}),(0,pe.jsx)("p",{children:"Adaptive Learning: AlectoWatch continuously learns from user interactions and adjusts its algorithms over time to provide personalized security recommendations and improved system performance."}),(0,pe.jsx)("img",{src:"https://firebasestorage.googleapis.com/v0/b/alectowatch.appspot.com/o/Adaptive%20Learning.jpeg?alt=media&token=db58b9ad-e0c2-4995-b9df-fd58820c6292&_gl=1*v9jbft*_ga*MTAzMzAzNjQzLjE2ODU0NzA5Mjg.*_ga_CW55HF8NVT*MTY4NTUxNDM5NC41LjEuMTY4NTUxNjAzNC4wLjAuMA..",alt:"AdaptiveLearning",className:"feature-image"})]})},IC=function(){return(0,pe.jsxs)("div",{className:"feature-page",children:[(0,pe.jsx)("h2",{children:"Smart Insights and Recommendations"}),(0,pe.jsx)("p",{children:"Smart Insights and Recommendations: AlectoWatch's AI capabilities provide intelligent insights and recommendations based on user activity and security patterns, helping users optimize their security settings and improve overall home safety."}),(0,pe.jsx)("img",{src:"https://firebasestorage.googleapis.com/v0/b/alectowatch.appspot.com/o/Smart%20Insights%20and%20Recommendations.jpg?alt=media&token=79d3cc1b-d7e0-476c-b47c-533f0fbcc94a&_gl=1*oc3f47*_ga*MTAzMzAzNjQzLjE2ODU0NzA5Mjg.*_ga_CW55HF8NVT*MTY4NTUxNDM5NC41LjEuMTY4NTUxNjEzMy4wLjAuMA..",alt:"SmartInsightsAndRecommendations",className:"feature-image"})]})};var EC=function(){return(0,pe.jsx)(ae,{children:(0,pe.jsxs)(re,{children:[(0,pe.jsx)(X,{exact:!0,path:"/",component:ve}),(0,pe.jsx)(X,{exact:!0,path:"/about",component:me}),(0,pe.jsx)(X,{exact:!0,path:"/contact",component:ye}),(0,pe.jsx)(X,{exact:!0,path:"/signin",component:hC}),(0,pe.jsx)(X,{exact:!0,path:"/registration",component:dC}),(0,pe.jsx)(X,{exact:!0,path:"/welcome",component:pC}),(0,pe.jsx)(X,{exact:!0,path:"/surveillance",component:vC}),(0,pe.jsx)(X,{exact:!0,path:"/IntelligentIntrusionDetection",component:mC}),(0,pe.jsx)(X,{exact:!0,path:"/NightVision",component:yC}),(0,pe.jsx)(X,{exact:!0,path:"/SmartHomeIntegration",component:gC}),(0,pe.jsx)(X,{exact:!0,path:"/CloudStorage",component:kC}),(0,pe.jsx)(X,{exact:!0,path:"/MultiUserAccess",component:wC}),(0,pe.jsx)(X,{exact:!0,path:"/FacialRecognition",component:bC}),(0,pe.jsx)(X,{exact:!0,path:"/SmartMonitoringZones",component:xC}),(0,pe.jsx)(X,{exact:!0,path:"/AdaptiveLearning",component:_C}),(0,pe.jsx)(X,{exact:!0,path:"/SmartInsightsAndRecommendations",component:IC})]})})};r.render((0,pe.jsx)(t.StrictMode,{children:(0,pe.jsx)(EC,{})}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.9f427f62.js.map